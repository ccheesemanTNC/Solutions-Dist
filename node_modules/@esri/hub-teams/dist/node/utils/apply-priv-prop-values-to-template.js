"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.applyPrivPropValuesToTemplate = void 0;
const hub_common_1 = require("@esri/hub-common");
/**
 * Updates template based upon new privPropValues property
 * In the templates config hash.
 * This allows us to conditionally change out parts of the template
 * @param {object} user
 * @param {object} template
 * @returns {object} Returns updated template
 */
function applyPrivPropValuesToTemplate(user, template) {
    const templateCopy = hub_common_1.cloneObject(template);
    // Only two templates actually have this in config atm, so we want to be safe.
    const ppv = hub_common_1.getWithDefault(template, "config.privPropValues", []);
    // iterate over privPropValues
    ppv.forEach((entry) => {
        // entry === each privPropValue obj { priv, prop, value}
        // If user privileges includes the privilege in privPropValue...
        if (hub_common_1.includes(user.privileges, entry.priv)) {
            // update the group template with appropriate prop / value changes
            templateCopy[entry.prop] = entry.value; // for example updating the membershipAccess
        }
    });
    return templateCopy;
}
exports.applyPrivPropValuesToTemplate = applyPrivPropValuesToTemplate;
//# sourceMappingURL=apply-priv-prop-values-to-template.js.map