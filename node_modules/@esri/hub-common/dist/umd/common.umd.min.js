!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).arcgisHub=e.arcgisHub||{})}(this,function(c){"use strict";function L(r,n){return Object.keys(r).reduce(function(e,t){return e[t]=n(r[t],t,r),e},{})}function N(e,r,n){return n=n||"",Array.isArray(e)?e.map(t):!e||!_(e)||G(e)||B(e)||j(e)?r(e,n):Object.assign({},e,L(e,t));function t(e,t){return N(e,r,""+(n?n+"."+t:t))}}function R(e){return"string"==typeof e||e instanceof String}function G(e){return e instanceof Date}function j(e){return"function"==typeof e}function _(e){return"object"==typeof e}function B(e){return e instanceof RegExp}function C(e,t){return t.split(".").reduce(function(e,t){return e?e[t]:void 0},e)}function l(e){var t,r={};if(Array.isArray(e))r=e.map(l);else if("object"==typeof e)for(var n in e)e.hasOwnProperty(n)&&(null!=(t=e[n])&&"object"==typeof t?t instanceof Date?r[n]=new Date(t.getTime()):r[n]=l(t):r[n]=t);else r=e;return r}function K(e,r,n){return e?e.reduce(function(e,t){return e=C(t,r)===n?t:e},null):null}function V(e){return""+(e=void 0===e?"i":e)+Math.random().toString(36).substr(2,8)}function H(e,t){return null!=e&&(t=l(t)).push(e),t}function W(e){return(e=(e=e.toLowerCase()).replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi," ")).replace(/(\-|\_|\.|\s)+(.)?/g,function(e,t,r){return r?r.toUpperCase():""}).replace(/(^|\/)([A-Z])/g,function(e,t,r){return e.toLowerCase()})}function z(e,t,r){return r.indexOf(e)===t}function Y(e,n,o){void 0===o&&(o=!0);e=l(e);return Object.keys(n).reduce(function(e,t){var r;return null!==n[t]&&void 0!==n[t]&&(r=l(n[t]),Array.isArray(r)?e[t]=r:e[t]=o&&"object"==typeof r?Y(e[t]||{},r,o):r),e},e)}function J(e){return(e=Array.from(e))[0]=e[0].toUpperCase(),e.join("")}var Q=function(e){return null==e};function Z(e){return e.reduce(function(e,t){return e.concat(t)},[])}function $(e,t,r){void 0===r&&(r={});var t=t.split("."),n=e,o=t.length-1;t.forEach(function(e,t){n.hasOwnProperty(e)&&null!=n[e]?t===o&&("object"!=typeof n[e]||Array.isArray(n[e])?n[e]=r:n[e]=Object.assign(n[e],l(r))):n[e]=t===o?r:{},n=n[e]})}function a(e,t,r){e=C(e,t);return void 0!==e?e:r}function X(t){return Object.keys(t).forEach(function(e){t[e]&&"object"==typeof t[e]?X(t[e]):null==t[e]&&delete t[e]}),t}function ee(e,r,n){return N(e,function(e){if(!R(e))return e;var t=B(r)?r:new RegExp(r,"g");return e.replace(t,n)})}function te(t,r,e){return Array.isArray(e)&&e.length?(e.forEach(function(e){void 0!==C(t,e)&&$(r,e,C(t,e))}),r):t}function p(e,t,r){$(r,e=Array.isArray(e)?e.join("."):e,t)}function re(r,n){return Array.isArray(r)?r.reduce(function(e,t){return n(t)?e=t:ne(t)&&(t=re(t,n))&&(e=t),e},void 0):ne(r)?n(r)?r:Object.keys(r).reduce(function(e,t){return e=ne(r[t])&&(t=re(r[t],n))?t:e},void 0):void 0}function ne(e){var t=!1;return t=!e||!_(e)||G(e)||B(e)||j(e)?t:!0}function oe(e,n,o){void 0===o&&(o=5);return e.reduce(function(e,t){var r=e[e.length-1];return r&&r.length!==o||e.push(r=[]),r.push(t),e},[]).reduce(function(e,r){return e.then(function(t){var e=r.map(function(e){return n(e)});return Promise.all(e).then(function(e){return t.concat(e)})})},Promise.resolve([]))}function d(e,t){return-1!==e.indexOf(t)}var ie=function(e,t){return(ie=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function ae(e,t){function r(){this.constructor=e}ie(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var se,P=function(){return(P=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function ue(e,t){var r={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,o=Object.getOwnPropertySymbols(e);n<o.length;n++)t.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]]);return r}function f(e,a,s,u){return new(s=s||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,o)}i((u=u.apply(e,a||[])).next())})}function m(n,o){var i,a,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){u.label=t[1];break}if(6===t[0]&&u.label<s[1]){u.label=s[1],s=t;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(t);break}s[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],a=0}finally{i=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}}function h(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n}function ce(e,t,r){var n=this;return t=t||"UNKNOWN_ERROR",r=a(r,"rootCause",r),(n=se.call(this,t)||this).operation=e,n.name="OperationError",n.rootCause=r,Object.setPrototypeOf(n,ce.prototype),n.stack=a(r,"stack",(new Error).stack),n}ae(ce,se=Error);function le(e){return function(r){return e.reduce(function(e,t){return e.then(t).catch(function(e){return"OperationError"===e.name?Promise.reject(e):(e="IPipeableFn did not reject with an OperationError \n Operation Stack: \n "+r.stack.toString(),(e=new pe("pipeline execution error",e)).operationStack=r.stack.serialize(),Promise.reject(e))})},Promise.resolve(r))}}var pe=ce;function n(r,n){return void 0===n&&(n={}),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.apply(void 0,e).catch(function(e){return n})}}function de(e){var r=(new Date).getTime();return Array(e).fill(0).reduce(function(e){var t=(r+16*Math.random())%16|0;return r=Math.floor(r/16),e=""+e+t.toString(16)},"")}function fe(e){"{"===e[0]&&(e=e.substring(1,e.length-1));return/^(\{){0,1}[0-9a-fA-F]{8}[-]?[0-9a-fA-F]{4}[-]?[0-9a-fA-F]{4}[-]?[0-9a-fA-F]{4}[-]?[0-9a-fA-F]{12}(\}){0,1}$/gi.test(e)}function me(e){return"string"==typeof e?e.trim().toLowerCase().replace(/ +/g,"-").replace(/[^\w-]/g,"").replace(/-+/g,"-"):e}c.Level=void 0,(S=c.Level||(c.Level={}))[S.all=0]="all",S[S.debug=1]="debug",S[S.info=2]="info",S[S.warn=3]="warn",S[S.error=4]="error",S[S.off=5]="off";e.setLogLevel=function(e){this.logLevel=e},e.log=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.isLevelPermitted(c.Level.debug)&&console.log.apply(console,h([e],t))},e.debug=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.isLevelPermitted(c.Level.debug)&&console.debug.apply(console,h([e],t))},e.info=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.isLevelPermitted(c.Level.info)&&console.info.apply(console,h([e],t))},e.warn=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.isLevelPermitted(c.Level.warn)&&console.warn.apply(console,h([e],t))},e.error=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.isLevelPermitted(c.Level.error)&&console.error.apply(console,h([e],t))},e.isLevelPermitted=function(e){return this.logLevel<=e},e.logLevel=c.Level.off;var g=e;function e(){}function he(e){return e.capabilities.includes("updateitemcontrol")}function ge(t){return Object.keys(t).some(function(e){e=t[e];if(!e)return!1;switch((e=e&&e.toParam?e.toParam():e).constructor.name){case"Array":case"Object":case"Date":case"Function":case"Boolean":case"String":case"Number":return!1;default:return!0}})}function ye(o){var i={};return Object.keys(o).forEach(function(e){var t=o[e];if((t=t&&t.toParam?t.toParam():t)||0===t||"boolean"==typeof t||"string"==typeof t){switch(t.constructor.name){case"Array":var r=null==(r=null==(r=t[0])?void 0:r.constructor)?void 0:r.name,n="Array"===r?t:"Object"===r?JSON.stringify(t):t.join(",");break;case"Object":n=JSON.stringify(t);break;case"Date":n=t.valueOf();break;case"Function":n=null;break;case"Boolean":n=t+"";break;default:n=t}(n||0===n||"string"==typeof n||Array.isArray(n))&&(i[e]=n)}}),i}function ve(e){var t=ye(e);return Object.keys(t).map(function(e){return function t(r,e){return Array.isArray(e)&&e[0]&&Array.isArray(e[0])?e.map(function(e){return t(r,e)}).join("&"):encodeURIComponent(r)+"="+encodeURIComponent(e)}(e,t[e])}).join("&")}var y=function(e,t,r,n,o){e=e||"UNKNOWN_ERROR",t=t||"UNKNOWN_ERROR_CODE",this.name="ArcGISRequestError",this.message="UNKNOWN_ERROR_CODE"===t?e:t+": "+e,this.originalMessage=e,this.code=t,this.response=r,this.url=n,this.options=o};function t(e){console&&console.warn&&console.warn.apply(console,[e])}y.prototype=Object.create(Error.prototype),y.prototype.constructor=y;var be,we="@esri/arcgis-rest-js",Se={httpMethod:"POST",params:{f:"json"}},xe=(ae(Ae,be=y),Ae.prototype.retry=function(e,n){function o(t,r){e(i.url,i.options).then(function(e){e=P(P({},i.options),{authentication:e});return a+=1,v(i.url,e)}).then(function(e){t(e)}).catch(function(e){"ArcGISAuthError"===e.name&&a<n?o(t,r):"ArcGISAuthError"===e.name&&n<=a?r(i):r(e)})}var i=this,a=(void 0===n&&(n=3),0);return new Promise(function(e,t){o(e,t)})},Ae);function Ae(e,t,r,n,o){r=be.call(this,e=void 0===e?"AUTHENTICATION_ERROR":e,t=void 0===t?"AUTHENTICATION_ERROR_CODE":t,r,n,o)||this;return r.name="ArcGISAuthError",r.message="AUTHENTICATION_ERROR_CODE"===t?e:t+": "+e,r}function v(a,e){void 0===e&&(e={params:{f:"json"}});var s=P(P(P({httpMethod:"POST"},Se),e),{params:P(P({},Se.params),e.params),headers:P(P({},Se.headers),e.headers)}),e=[],t=[];if(s.fetch||"undefined"==typeof fetch?(e.push("`fetch`"),t.push("`node-fetch`")):s.fetch=fetch.bind(Function("return this")()),"undefined"==typeof Promise&&(e.push("`Promise`"),t.push("`es6-promise`")),"undefined"==typeof FormData&&(e.push("`FormData`"),t.push("`isomorphic-form-data`")),!s.fetch||"undefined"==typeof Promise||"undefined"==typeof FormData)throw new Error("`arcgis-rest-request` requires a `fetch` implementation and global variables for `Promise` and `FormData` to be present in the global scope. You are missing "+e.join(", ")+". We recommend installing the "+t.join(", ")+" modules at the root of your application to add these to the global scope. See https://bit.ly/2KNwWaJ for more info.");var e=s.httpMethod,u=s.authentication,n=s.rawResponse,c=P({f:"json"},s.params),r=null,l={method:e,credentials:s.credentials||"same-origin"};return s.headers&&s.headers["X-Esri-Auth-Client-Id"]&&-1<a.indexOf("/oauth2/platformSelf")&&(l.credentials="include"),(u?u.getToken(a,{fetch:s.fetch}).catch(function(e){return e.url=a,e.options=s,r=e,Promise.resolve("")}):Promise.resolve("")).then(function(e){e.length&&(c.token=e),u&&u.getDomainCredentials&&(l.credentials=u.getDomainCredentials(a));var t,r,n,o,i={},e=("GET"===l.method&&(c.token&&s.hideToken&&"undefined"==typeof window&&(i["X-Esri-Authorization"]="Bearer "+c.token,delete c.token),r=""===ve(c)?a:a+"?"+ve(c),s.maxUrlLength&&r.length>s.maxUrlLength||c.token&&s.hideToken?(l.method="POST",e.length&&s.hideToken&&(c.token=e,delete i["X-Esri-Authorization"])):a=r),new RegExp("/items/.+/updateResources").test(a));return"POST"===l.method&&(l.body=(r=e,r=ge(t=c)||r,o=ye(t),r?(n=new FormData,Object.keys(o).forEach(function(e){var t;"undefined"!=typeof Blob&&o[e]instanceof Blob?(t=o.fileName||o[e].name||e,n.append(e,o[e],t)):n.append(e,o[e])}),n):ve(t))),l.headers=P(P({},i),s.headers),"undefined"!=typeof window||l.headers.referer||(l.headers.referer=we),ge(c)||e||(l.headers["Content-Type"]="application/x-www-form-urlencoded"),s.fetch(a,l)}).then(function(e){var t,r;if(!e.ok)throw t=e.status,r=e.statusText,new y(r,"HTTP "+t,e,a,s);if(n)return e;switch(c.f){case"json":case"geojson":return e.json();case"html":case"text":return e.text();default:return e.blob()}}).then(function(e){var t;return"json"!==c.f&&"geojson"!==c.f||n?e:(e=function(t,e,r,n){if(400<=t.code)throw i=t.message,a=t.code,new y(i,a,t,e,r);if(t.error){var o=t.error,i=o.message,a=o.code,o=o.messageCode,s=o||a||"UNKNOWN_ERROR_CODE";if(498===a||499===a||"GWM_0003"===o||400===a&&"Unable to generate token."===i)throw n||new xe(i,s,t,e,r);throw new y(i,s,t,e,r)}if("failed"!==t.status&&"failure"!==t.status)return t;i=void 0,a="UNKNOWN_ERROR_CODE";try{i=JSON.parse(t.statusMessage).message,a=JSON.parse(t.statusMessage).code}catch(e){i=t.statusMessage||t.message}throw new y(i,a,t,e,r)}(e,a,s,r),r&&(t=a.toLowerCase().split(/\/rest(\/admin)?\/services\//)[0],s.authentication.federatedServers[t]={token:[],expires:new Date(Date.now()+864e5)},r=null),e)})}function Ee(r,e,t){var n=P(P({params:{}},t),r);return n.params=e.reduce(function(e,t){return!r[t]&&"boolean"!=typeof r[t]||(e[t]=r[t]),e},n.params),["params","httpMethod","rawResponse","authentication","portal","fetch","maxUrlLength","headers"].reduce(function(e,t){return n[t]&&(e[t]=n[t]),e},{})}function b(e){return"string"==typeof e&&"/"===(e=e.trim())[e.length-1]?e.slice(0,-1):e}function ke(e){return e.replace(/^#/,"").split("&").reduce(function(e,t){r=(t=(t=t).split("="))[0],t=t[1];var r={key:decodeURIComponent(r),value:decodeURIComponent(t)};return e[r.key]=r.value,e},{})}function De(e,t){return t.rawResponse=!1,v(e,t).then(function(e){var t={token:e.access_token,username:e.username,expires:new Date(Date.now()+(1e3*e.expires_in-1e3)),ssl:!0===e.ssl};return e.refresh_token&&(t.refreshToken=e.refresh_token),t})}function Te(e,t){return"undefined"!=typeof window&&window.location&&window.location.host?t.params.referer=window.location.host:t.params.referer=we,v(e,t)}var Ie=/^https?:\/\/(\S+)\.arcgis\.com.+/;function Ce(e){return Ie.test(e)}function Pe(e){if(!Ie.test(e))return null;e=e.match(Ie)[1].split(".").pop();return e.includes("dev")?"dev":e.includes("qa")?"qa":"production"}function qe(e,t){t=b(function(e){if(!Ie.test(e))return e;switch(Pe(e)){case"dev":return"https://devext.arcgis.com/sharing/rest";case"qa":return"https://qaext.arcgis.com/sharing/rest";default:return"https://www.arcgis.com/sharing/rest"}}(t)).replace(/https?:\/\//,""),e=b(e).replace(/https?:\/\//,"");return new RegExp(e,"i").test(t)}Object.defineProperty(w.prototype,"token",{get:function(){return this._token},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"tokenExpires",{get:function(){return this._tokenExpires},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"refreshToken",{get:function(){return this._refreshToken},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"refreshTokenExpires",{get:function(){return this._refreshTokenExpires},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"trustedServers",{get:function(){return console.log("DEPRECATED: use federatedServers instead"),this.federatedServers},enumerable:!1,configurable:!0}),w.beginOAuth2=function(e,t){void 0===t&&(t=window),e.duration&&console.log("DEPRECATED: 'duration' is deprecated - use 'expiration' instead");var r,n,o=P({portal:"https://www.arcgis.com/sharing/rest",provider:"arcgis",expiration:20160,popup:!0,popupWindowFeatures:"height=400,width=600,menubar=no,location=yes,resizable=yes,scrollbars=yes,status=yes",state:e.clientId,locale:""},e),i=o.portal,a=o.provider,s=o.clientId,u=o.expiration,c=o.redirectUri,l=o.popup,p=o.popupWindowFeatures,d=o.state,f=o.locale,o=o.params,a="arcgis"===a?i+"/oauth2/authorize?client_id="+s+"&response_type=token&expiration="+(e.duration||u)+"&redirect_uri="+encodeURIComponent(c)+"&state="+d+"&locale="+f:i+"/oauth2/social/authorize?client_id="+s+"&socialLoginProviderName="+a+"&autoAccountCreateForSocial=true&response_type=token&expiration="+(e.duration||u)+"&redirect_uri="+encodeURIComponent(c)+"&state="+d+"&locale="+f;{if(o&&(a=a+"&"+ve(o)),l)return(n={promise:null,resolve:null,reject:null}).promise=new Promise(function(e,t){n.resolve=e,n.reject=t}),r=n,t["__ESRI_REST_AUTH_HANDLER_"+s]=function(e,t){if(e)return e=JSON.parse(e),void r.reject(new xe(e.errorMessage,e.error));t&&(e=JSON.parse(t),r.resolve(new w({clientId:s,portal:i,ssl:e.ssl,token:e.token,tokenExpires:new Date(e.expires),username:e.username})))},t.open(a,"oauth-window",p),r.promise;t.location.href=a}},w.completeOAuth2=function(e,o){void 0===o&&(o=window);var e=P({portal:"https://www.arcgis.com/sharing/rest",popup:!0},e),i=e.portal,a=e.clientId,s=e.popup;function t(e,t){try{var r=void 0,n="__ESRI_REST_AUTH_HANDLER_"+a;if(s&&(o.opener?o.opener.parent&&o.opener.parent[n]?r=o.opener.parent[n]:o.opener&&o.opener[n]&&(r=o.opener[n]):o!==o.parent&&o.parent&&o.parent[n]&&(r=o.parent[n]),r))return r(e?JSON.stringify(e):void 0,JSON.stringify(t)),void o.close()}catch(e){throw new xe('Unable to complete authentication. It\'s possible you specified popup based oAuth2 but no handler from "beginOAuth2()" present. This generally happens because the "popup" option differs between "beginOAuth2()" and "completeOAuth2()".')}if(e)throw new xe(e.errorMessage,e.error);return new w({clientId:a,portal:i,ssl:t.ssl,token:t.token,tokenExpires:t.expires,username:t.username})}e=ke(o.location.hash);if(!e.access_token)return r=void 0,n="Unknown error",e.error&&(r=e.error,n=e.error_description),t({error:r,errorMessage:n});var r=e.access_token,n=new Date(Date.now()+1e3*parseInt(e.expires_in,10)-6e4),u=e.username;return t(void 0,{token:r,expires:n,ssl:"true"===e.ssl,username:u})},w.fromParent=function(e,n){var o;return!n&&window&&(n=window),new Promise(function(t,r){o=function(e){if(e.source===n.parent&&e.data)try{return t(w.parentMessageHandler(e))}catch(e){return r(e)}},n.addEventListener("message",o,!1),n.parent.postMessage({type:"arcgis:auth:requestCredential"},e)}).then(function(e){return n.removeEventListener("message",o,!1),e})},w.authorize=function(e,t){e.duration&&console.log("DEPRECATED: 'duration' is deprecated - use 'expiration' instead");var r=P({portal:"https://arcgis.com/sharing/rest",expiration:20160},e),n=r.portal,o=r.clientId,i=r.expiration,r=r.redirectUri;t.writeHead(301,{Location:n+"/oauth2/authorize?client_id="+o+"&expiration="+(e.duration||i)+"&response_type=code&redirect_uri="+encodeURIComponent(r)}),t.end()},w.exchangeAuthorizationCode=function(e,t){var e=P({portal:"https://www.arcgis.com/sharing/rest",refreshTokenTTL:20160},e),r=e.portal,n=e.clientId,o=e.redirectUri,i=e.refreshTokenTTL;return De(r+"/oauth2/token",{params:{grant_type:"authorization_code",client_id:n,redirect_uri:o,code:t}}).then(function(e){return new w({clientId:n,portal:r,ssl:e.ssl,redirectUri:o,refreshToken:e.refreshToken,refreshTokenTTL:i,refreshTokenExpires:new Date(Date.now()+60*(i-1)*1e3),token:e.token,tokenExpires:e.expires,username:e.username})})},w.deserialize=function(e){e=JSON.parse(e);return new w({clientId:e.clientId,refreshToken:e.refreshToken,refreshTokenExpires:new Date(e.refreshTokenExpires),username:e.username,password:e.password,token:e.token,tokenExpires:new Date(e.tokenExpires),portal:e.portal,ssl:e.ssl,tokenDuration:e.tokenDuration,redirectUri:e.redirectUri,refreshTokenTTL:e.refreshTokenTTL})},w.fromCredential=function(e){var t=void 0===e.ssl||e.ssl,r=e.expires||Date.now()+72e5;return new w({portal:e.server.includes("sharing/rest")?e.server:e.server+"/sharing/rest",ssl:t,token:e.token,username:e.userId,tokenExpires:new Date(r)})},w.parentMessageHandler=function(e){if("arcgis:auth:credential"===e.data.type)return w.fromCredential(e.data.credential);var t;throw"arcgis:auth:error"===e.data.type?((t=new Error(e.data.error.message)).name=e.data.error.name,t):new Error("Unknown message type.")},w.prototype.toCredential=function(){return{expires:this.tokenExpires.getTime(),server:this.portal,ssl:this.ssl,token:this.token,userId:this.username}},w.prototype.getUser=function(e){var t,r=this;return this._pendingUserRequest||(this._user?Promise.resolve(this._user):(t=this.portal+"/community/self",e=P(P({httpMethod:"GET",authentication:this},e),{rawResponse:!1}),this._pendingUserRequest=v(t,e).then(function(e){return r._user=e,r._pendingUserRequest=null,e}),this._pendingUserRequest))},w.prototype.getPortal=function(e){var t,r=this;return this._pendingPortalRequest||(this._portalInfo?Promise.resolve(this._portalInfo):(t=this.portal+"/portals/self",e=P(P({httpMethod:"GET",authentication:this},e),{rawResponse:!1}),this._pendingPortalRequest=v(t,e).then(function(e){return r._portalInfo=e,r._pendingPortalRequest=null,e}),this._pendingPortalRequest))},w.prototype.getUsername=function(){return this.username?Promise.resolve(this.username):this._user?Promise.resolve(this._user.username):this.getUser().then(function(e){return e.username})},w.prototype.getToken=function(e,t){return r=this.portal,n=e,o=Ce(r),i=Ce(n),r=Pe(r),n=Pe(n),o&&i&&r===n||new RegExp(this.portal,"i").test(e)?this.getFreshToken(t):this.getTokenForServer(e,t);var r,n,o,i},w.prototype.validateAppAccess=function(r){return this.getToken(this.portal).then(function(e){return v((t=void 0===t?"https://www.arcgis.com/sharing/rest":t)+"/oauth2/validateAppAccess",{method:"POST",params:{f:"json",client_id:r,token:e}});var t})},w.prototype.toJSON=function(){return{clientId:this.clientId,refreshToken:this.refreshToken,refreshTokenExpires:this.refreshTokenExpires,username:this.username,password:this.password,token:this.token,tokenExpires:this.tokenExpires,portal:this.portal,ssl:this.ssl,tokenDuration:this.tokenDuration,redirectUri:this.redirectUri,refreshTokenTTL:this.refreshTokenTTL}},w.prototype.serialize=function(){return JSON.stringify(this)},w.prototype.enablePostMessageAuth=function(e,t){!t&&window&&(t=window),this._hostHandler=this.createPostMessageHandler(e),t.addEventListener("message",this._hostHandler,!1)},w.prototype.disablePostMessageAuth=function(e){(e=!e&&window?window:e).removeEventListener("message",this._hostHandler,!1)},w.prototype.refreshSession=function(e){return this._user=null,this.username&&this.password?this.refreshWithUsernameAndPassword(e):this.clientId&&this.refreshToken?this.refreshWithRefreshToken():Promise.reject(new xe("Unable to refresh token."))},w.prototype.getServerRootUrl=function(e){var e=b(e).split(/\/rest(\/admin)?\/services(?:\/|#|\?|$)/)[0].match(/(https?:\/\/)(.+)/),t=(e[0],e[1]),e=e[2].split("/"),r=e[0],e=e.slice(1);return""+t+r.toLowerCase()+"/"+e.join("/")},w.prototype.getDomainCredentials=function(t){return this.trustedDomains&&this.trustedDomains.length&&this.trustedDomains.some(function(e){return t.startsWith(e)})?"include":"same-origin"},w.prototype.createPostMessageHandler=function(o){var i=this;return function(e){var t=-1<o.indexOf(e.origin),r="arcgis:auth:requestCredential"===e.data.type,n=i.tokenExpires.getTime()>Date.now();t&&r&&(t={},t=n?((r=i.toCredential()).server=r.server.replace("/sharing/rest",""),{type:"arcgis:auth:credential",credential:r}):{type:"arcgis:auth:error",error:{name:"tokenExpiredError",message:"Session token was expired, and not returned to the child application"}},e.source.postMessage(t,e.origin))}},w.prototype.getTokenForServer=function(t,r){var n=this,o=this.getServerRootUrl(t),e=this.federatedServers[o];return e&&e.expires&&e.expires.getTime()>Date.now()?Promise.resolve(e.token):this._pendingTokenRequests[o]||(this._pendingTokenRequests[o]=this.fetchAuthorizedDomains().then(function(){return v(o+"/rest/info",{credentials:n.getDomainCredentials(t)}).then(function(e){if(e.owningSystemUrl){if(qe(e.owningSystemUrl,n.portal))return v(e.owningSystemUrl+"/sharing/rest/info",r);throw new xe(t+" is not federated with "+n.portal+".","NOT_FEDERATED")}if(e.authInfo&&void 0!==n.federatedServers[o])return Promise.resolve({authInfo:e.authInfo});throw new xe(t+" is not federated with any portal and is not explicitly trusted.","NOT_FEDERATED")}).then(function(e){return e.authInfo.tokenServicesUrl}).then(function(e){return n.token&&n.tokenExpires.getTime()>Date.now()?Te(e,{params:{token:n.token,serverUrl:t,expiration:n.tokenDuration,client:"referer"}}):Te(e,{params:{username:n.username,password:n.password,expiration:n.tokenDuration,client:"referer"}}).then(function(e){return n._token=e.token,n._tokenExpires=new Date(e.expires),e})}).then(function(e){return n.federatedServers[o]={expires:new Date(e.expires),token:e.token},delete n._pendingTokenRequests[o],e.token})}),this._pendingTokenRequests[o])},w.prototype.getFreshToken=function(e){var t=this;return this.token&&!this.tokenExpires||this.token&&this.tokenExpires&&this.tokenExpires.getTime()>Date.now()?Promise.resolve(this.token):(this._pendingTokenRequests[this.portal]||(this._pendingTokenRequests[this.portal]=this.refreshSession(e).then(function(e){return t._pendingTokenRequests[t.portal]=null,e.token})),this._pendingTokenRequests[this.portal])},w.prototype.refreshWithUsernameAndPassword=function(e){var t=this,e=P({params:{username:this.username,password:this.password,expiration:this.tokenDuration}},e);return Te(this.portal+"/generateToken",e).then(function(e){return t._token=e.token,t._tokenExpires=new Date(e.expires),t})},w.prototype.refreshWithRefreshToken=function(e){var t=this;if(this.refreshToken&&this.refreshTokenExpires&&this.refreshTokenExpires.getTime()<Date.now())return this.refreshRefreshToken(e);e=P({params:{client_id:this.clientId,refresh_token:this.refreshToken,grant_type:"refresh_token"}},e);return De(this.portal+"/oauth2/token",e).then(function(e){return t._token=e.token,t._tokenExpires=e.expires,t})},w.prototype.refreshRefreshToken=function(e){var t=this,e=P({params:{client_id:this.clientId,refresh_token:this.refreshToken,redirect_uri:this.redirectUri,grant_type:"exchange_refresh_token"}},e);return De(this.portal+"/oauth2/token",e).then(function(e){return t._token=e.token,t._tokenExpires=e.expires,t._refreshToken=e.refreshToken,t._refreshTokenExpires=new Date(Date.now()+60*(t.refreshTokenTTL-1)*1e3),t})},w.prototype.fetchAuthorizedDomains=function(){var t=this;return this.server||!this.portal?Promise.resolve(this):this.getPortal().then(function(e){return e.authorizedCrossOriginDomains&&e.authorizedCrossOriginDomains.length&&(t.trustedDomains=e.authorizedCrossOriginDomains.filter(function(e){return!e.startsWith("http://")}).map(function(e){return e.startsWith("https://")?e:"https://"+e})),t})};var Oe=w;function w(e){var t;this.clientId=e.clientId,this._refreshToken=e.refreshToken,this._refreshTokenExpires=e.refreshTokenExpires,this.username=e.username,this.password=e.password,this._token=e.token,this._tokenExpires=e.tokenExpires,this.portal=e.portal?b(e.portal):"https://www.arcgis.com/sharing/rest",this.ssl=e.ssl,this.provider=e.provider||"arcgis",this.tokenDuration=e.tokenDuration||20160,this.redirectUri=e.redirectUri,this.refreshTokenTTL=e.refreshTokenTTL||20160,this.server=e.server,this.federatedServers={},this.trustedDomains=[],e.server&&(t=this.getServerRootUrl(e.server),this.federatedServers[t]={token:e.token,expires:e.tokenExpires}),this._pendingTokenRequests={}}function Fe(e){e=e.privileges;return d(void 0===e?[]:e,"portal:user:createItem")}function Ue(e,t){var r,n=!1,o=e.itemControl,i=e.owner,a=e.orgId,s=t.roleId,u=t.role,c=t.username,l=t.groups,p=t.orgId,o=d(["admin","update"],o)||!!i&&i===c||!!(!!a&&a===p)&&!s&&"org_admin"===u,i=Fe(t);return i&&o?n=!0:i&&(r=h(C(e,"groupIds")||[],[C(e,"properties.collaborationGroupId")]),n=l.some(function(e){return he(e)&&d(r,e.id)})),n}var Me=["portal:user:createGroup","portal:user:createItem","portal:user:shareToGroup","portal:user:viewOrgGroups","portal:user:viewOrgItems"];function Le(e){var r,t=e.host,n=e.path,e=e.query,t=t.endsWith("/")?t:t+"/",n=new URL(n,t);return n.search=(void 0===(r=e)&&(r={}),t=Object.keys(r).filter(function(e){return void 0!==r[e]}).reduce(function(e,t){return e[t]=r[t],e},{}),new URLSearchParams(t).toString()),n.toString()}function s(e){return(e=void 0===e?{}:e).portal?b(e.portal):e.authentication?e.authentication.portal:"https://www.arcgis.com/sharing/rest"}function Ne(e){var t=JSON.parse(JSON.stringify(e));return t.data&&("undefined"!=typeof Blob&&e.data instanceof Blob||"ReadStream"===e.data.constructor.name?t.file=e.data:t.text=e.data,delete t.data),t}function Re(e){return e.owner?Promise.resolve(e.owner):e.item&&e.item.owner?Promise.resolve(e.item.owner):e.authentication&&e.authentication.getUsername?e.authentication.getUsername():Promise.reject(new Error("Could not determine the owner of this item. Pass the `owner`, `item.owner`, or `authentication` option."))}function Ge(t){return Re(t).then(function(e){e=t.folderId?s(t)+"/content/users/"+e+"/"+t.folderId+"/items/"+t.item.id+"/update":s(t)+"/content/users/"+e+"/items/"+t.item.id+"/update";return t.params=P(P({},t.params),Ne(t.item)),v(e,t)})}function je(e){var r,e=P({folderId:null},e);return(r=e).multipart&&!r.filename?Promise.reject(new Error("The filename is required for a multipart request.")):Re(r).then(function(e){var e=s(r)+"/content/users/"+e,t=e+"/addItem",e=(r.folderId&&(t=e+"/"+r.folderId+"/addItem"),r.params=P(P({},r.params),Ne(r.item)),Ee(r,["owner","folderId","file","dataUrl","text","async","multipart","filename","overwrite"],{params:P({},r.params)}));return v(t,e)})}var _e=/[\x00-\x1F\x7F-\x9F\xA0]/g;function Be(e,t){return v(Ke(e,t),P({httpMethod:"GET"},t))}var Ke=function(e,t){return("string"==typeof t?t:s(t))+"/content/items/"+e};function Ve(e,t){e=Ke(e,t)+"/data",t=P({httpMethod:"GET",params:{}},t);return t.file&&(t.params.f=null),v(e,t).catch(function(e){var t=RegExp(/The string did not match the expected pattern|(Unexpected end of (JSON input|data at line 1 column 1))/i);if(!t.test(e.message))throw e})}function He(e){var t=Ke(e.id,e)+"/relatedItems",r=P({httpMethod:"GET",params:{direction:e.direction}},e);return"string"==typeof e.relationshipType?r.params.relationshipType=e.relationshipType:r.params.relationshipTypes=e.relationshipType,delete r.direction,delete r.relationshipType,v(t,r)}function We(e,t){var r,n,o=t||{},i=o.fileName,i=void 0===i?"iteminfo.xml":i,o=o.readAs,o=void 0===o?"text":o,t=P({httpMethod:"GET"},t);return i="/info/"+i,r=o,o=""+Ke(o=e,e=t)+i,i=P({params:{}},e),n=i.rawResponse,i.rawResponse=!0,i.params.f=null,v(o,i).then(function(e){return n?e:"json"!==r?e[r]():e.text().then(function(e){return JSON.parse(e.replace(_e,""))})})}function ze(t){return Re(t).then(function(e){return v(s(t)+"/content/users/"+e+"/items/"+t.id+"/unprotect",t)})}function Ye(e){return t=e.groupId,v(s(e=e)+"/community/groups/"+t,P({httpMethod:"GET"},e)).then(function(e){return e.userMembership.memberType}).catch(function(){return"none"});var t}function Je(t){return Re(t).then(function(e){return v(s(t)+"/content/users/"+e+"/items/"+t.id+"/delete",t)})}r.prototype.match=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.termStack=this.termStack.concat(e),this},r.prototype.in=function(e){return this.hasRange||this.hasTerms?(e&&"*"!==e&&(this.q+=e+":"),this.commit()):(t("`in("+(e?'"'+e+'"':"")+")`"+" was called with no call to `match(...)` or `from(...)`/`to(...)`. Your query was not modified."),this)},r.prototype.startGroup=function(){return this.commit(),0<this.openGroups&&(this.q+=" "),this.openGroups++,this.q+="(",this},r.prototype.endGroup=function(){return this.openGroups<=0?t("`endGroup(...)` was called without calling `startGroup(...)` first. Your query was not modified."):(this.commit(),this.openGroups--,this.q+=")"),this},r.prototype.and=function(){return this.addModifier("and")},r.prototype.or=function(){return this.addModifier("or")},r.prototype.not=function(){return this.addModifier("not")},r.prototype.from=function(e){return this.hasTerms?t('`from(...)` is not allowed after `match(...)` try using `.from(...).to(...).in(...)`. Optionally, you may see this because dates are incorrectly formatted. Dates should be a primative Date value, aka a number in milliseconds or Date object, ie new Date("2020-01-01").  Your query was not modified.'):this.rangeStack[0]=e,this},r.prototype.to=function(e){return this.hasTerms?t('`to(...)` is not allowed after `match(...)` try using `.from(...).to(...).in(...)`. Optionally, you may see this because dates are incorrectly formatted. Dates should be a primative Date value, aka a number in milliseconds or Date object, ie new Date("2020-01-01"). Your query was not modified.'):this.rangeStack[1]=e,this},r.prototype.boost=function(e){return this.commit(),this.q+="^"+e,this},r.prototype.toParam=function(){return this.commit(),this.cleanup(),this.q},r.prototype.clone=function(){return this.commit(),this.cleanup(),new r(this.q+"")},r.prototype.addModifier=function(e){return this.currentModifer?(t("You have called `"+this.currentModifer+"()` after `"+e+"()`. Your current query was not modified."),this):(this.commit(),""===this.q&&"not"!==e?t("You have called `"+e+"()` without calling another method to modify your query first. Try calling `match()` first."):(this.currentModifer=e,this.q+=""===this.q?"":" ",this.q+=e.toUpperCase()+" "),this)},r.prototype.needsQuotes=function(e){return/\s|:/g.test(e)},r.prototype.formatTerm=function(e){return e instanceof Date?e.getTime():"string"==typeof e&&this.needsQuotes(e)?'"'+e+'"':e},r.prototype.commit=function(){var t=this;return this.currentModifer=void 0,this.hasRange&&(this.q+="["+this.formatTerm(this.rangeStack[0])+" TO "+this.formatTerm(this.rangeStack[1])+"]",this.rangeStack=[void 0,void 0]),this.hasTerms&&(this.q+=this.termStack.map(function(e){return t.formatTerm(e)}).join(" "),this.termStack=[]),this},Object.defineProperty(r.prototype,"hasTerms",{get:function(){return 0<this.termStack.length},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"hasRange",{get:function(){return this.rangeStack.length&&this.rangeStack[0]&&this.rangeStack[1]},enumerable:!1,configurable:!0}),r.prototype.cleanup=function(){if(0<this.openGroups)for(t("Automatically closing "+this.openGroups+" group(s). You can use `endGroup(...)` to remove this warning.");0<this.openGroups;)this.q+=")",this.openGroups--;var e=this.q;this.q=e.replace(/( AND ?| NOT ?| OR ?)*$/,""),e!==this.q&&t("`startGroup(...)` was called without calling `endGroup(...)` first. Your query was not modified."),this.q=this.q.replace(/(\(\))*/,"")};var Qe=r;function r(e){void 0===e&&(e=""),this.termStack=[],this.rangeStack=[],this.openGroups=0,this.q=e}function Ze(r,n){var e,t="string"==typeof r||r instanceof Qe?{httpMethod:"GET",params:{q:r}}:Ee(r,["q","num","start","sortField","sortOrder","searchUserAccess","searchUserName","filter","countFields","countSize","categories","categoryFilters"],{httpMethod:"GET"});switch(n){case"item":e="/search";break;case"group":e="/community/groups";break;case"groupContent":if("string"==typeof r||r instanceof Qe||!r.groupId)return Promise.reject(new Error("you must pass a `groupId` option to `searchGroupContent`"));e="/content/groups/"+r.groupId+"/search";break;default:e="/portals/self/users/search"}return v(s(t)+e,t).then(function(t){return t.nextStart&&-1!==t.nextStart&&(t.nextPage=function(){var e;return"string"==typeof r||r instanceof Qe?e={q:r,start:t.nextStart}:(e=r).start=t.nextStart,Ze(e,n)}),t})}function $e(e){return Ze(e,"item")}function Xe(e,t){if(0===e.length)return[];for(var r=[],n=0;n<e.length;n+=t)r.push(e.slice(n,n+t));return r}function et(e){var t=e.id,r=s(e)+"/community/groups/"+t+"/addUsers",t=Object.assign({},e,{admins:void 0,users:void 0}),e=h(tt("users",e.users,t),tt("admins",e.admins,t)).map(function(e){return v(r,e).catch(function(e){return{errors:[e]}})});return Promise.all(e).then(rt)}function tt(o,e,i){return!e||e.length<1?[]:Xe(e,25).map(function(e){return t=o,e=e,r=i,Object.assign({},r,((n={})[t]=e,n.params=P(P({},r.params),((r={})[t]=e,r)),n));var t,r,n})}function rt(e){var t=e.filter(function(e){return e.notAdded}).reduce(function(e,t){return e.concat(t.notAdded)},[]),e=e.filter(function(e){return e.errors}).reduce(function(e,t){return e.concat(t.errors)},[]),t={notAdded:t};return 0<e.length&&(t.errors=e),t}function nt(t){var e=t.id,r=t.users,n=s(t)+"/community/groups/"+e+"/removeUsers",e=Xe(r,25).map(function(e){return e=P(P({},t),{users:e,params:{users:e}}),v(n,e).catch(function(e){return{errors:[e]}})});return Promise.all(e).then(function(e){function t(r){return e.filter(function(e){return e[r]}).reduce(function(e,t){return e.concat(t[r])},[])}var r=t("errors"),n={notRemoved:t("notRemoved")};return r.length?P(P({},n),{errors:r}):n})}function ot(e){var r,t=e.id,n=s(e)+"/community/groups/"+t+"/invite",t=Xe((r=e).users,25).map(function(e){var t=r;return(t=Object.assign({},t)).params=P(P({},t.params),{users:e,role:t.role,expiration:t.expiration}),t}).map(function(e){return v(n,e).catch(function(e){return{errors:[e]}})});return Promise.all(t).then(it)}function it(e){var t=e.every(function(e){return e.success}),e=e.reduce(function(e,t){return e.concat(t.errors||[])},[]),t={success:t};return 0<e.length&&(t.errors=e),t}function at(e){return v(s(e)+"/community/groups/"+e.id+"/unprotect",e)}function st(e){return v(s(e)+"/community/groups/"+e.id+"/delete",P({},e))}function ut(e){var t=s(e)+"/community/groups/"+e.id+"/updateUsers",r={authentication:e.authentication,params:{}};return"admin"===e.newMemberType?r.params.admins=e.users:r.params.users=e.users,v(t,r)}function ct(e){var n,t=s(e)+"/portals/self/createNotification",e=Xe((n=e).users,n.batchSize||25).map(function(e){return e=e,t=n,(r=Object.assign({},t)).params=P(P({},r.params),{users:e,subject:t.subject,message:t.message,notificationChannelType:r.notificationChannelType}),r;var t,r}).map(function(e){return v(t,e).catch(function(e){return{errors:[e]}})});return Promise.all(e).then(lt)}function lt(e){var t=e.every(function(e){return e.success}),e=e.reduce(function(e,t){return e.concat(t.errors||[])},[]),t={success:t};return 0<e.length&&(t.errors=e),t}function pt(e){var t,r,n={httpMethod:"GET"};return"string"==typeof e?r="https://www.arcgis.com/sharing/rest/community/users/"+e:(t=e.username||e.authentication.username,r=s(e)+"/community/users/"+encodeURIComponent(t),n=P(P({},e),n)),v(r,n)}function dt(t){return $e({q:"id: "+t.id+" AND group: "+t.groupId,start:1,num:10,sortField:"title",authentication:t.authentication,httpMethod:"POST"}).then(function(e){if(0<e.total)return e.results.some(function(e){return e.id===t.id})})}function ft(l){return dt(l).then(function(e){if(e)return{itemId:l.id,shortcut:!0,notSharedWith:[]};var s,u,e=l.authentication.username,t=l.owner,c=l.confirmItemControl,t=t||e;return t!==e?(u=s=!1,Promise.all([pt({username:e,authentication:l.authentication}),pt({username:t,authentication:l.authentication}),Ye(l)]).then(function(e){var t=e[0],r=e[1],e=e[2],n=(s="org_admin"===t.role&&!t.roleId,u=t.orgId!==r.orgId,!!c),o=s,i=l,a=[];if(i.groupId!==t.favGroupId)if(n){if(!o)throw Error("This item can not be shared to shared editing group "+i.groupId+" by "+t.username+" as they not the item owner or org admin.");a.push(ht(t,t,!1,"Error adding "+t.username+" as member to edit group "+i.groupId+". Consequently item "+i.id+" was not shared to the group.",i),ht(t,r,!0,"none"===e?"Error adding user "+r.username+" to edit group "+i.groupId+". Consequently item "+i.id+" was not shared to the group.":"Error promoting user "+r.username+" to admin in edit group "+i.groupId+". Consequently item "+i.id+" was not shared to the group.",i))}else if(o)a.push(ht(t,t,!1,"Error adding "+t.username+" as member to view group "+i.groupId+". Consequently item "+i.id+" was not shared to the group.",i));else if("none"===e)throw new Error("This item can not be shared by "+t.username+" as they are not a member of the specified group "+i.groupId+".");return a}).then(function(e){var t=e[0],r=(void 0===t?{promise:Promise.resolve({notAdded:[]}),revert:function(e){return Promise.resolve(e)}}:t).revert;return Promise.all(e.map(function(e){return e.promise})).then(function(){return mt(l,s,u)}).then(function(e){return r(e)})})):mt(l)}).then(function(e){if(e.notSharedWith.length)throw Error("Item "+l.id+" could not be shared to group "+l.groupId+".");return e})}function mt(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!1);var n=e.authentication.username,o=e.owner||n,i=s(e)+"/content/items/"+e.id+"/share";return(o===n||t&&!r)&&(i=s(e)+"/content/users/"+o+"/items/"+e.id+"/share"),e.params={groups:e.groupId,confirmItemControl:e.confirmItemControl},v(i,e)}function ht(e,t,r,n,o){var i,a=t.groups||[],s=a.find(function(e){return e.id===o.groupId});if(e.orgId!==t.orgId)throw Error("User "+t.username+" is not a member of the same org as "+e.username+". Consequently they can not be added added to group "+o.groupId+" nor can item "+o.id+" be shared to the group.");if(!s&&511<a.length)throw Error("User "+t.username+" already has 512 groups, and can not be added to group "+o.groupId+". Consequently item "+o.id+" can not be shared to the group.");return a=s?r&&"member"===s.userMembership.memberType?(i=ut({id:o.groupId,users:[t.username],newMemberType:"admin",authentication:o.authentication}).then(function(e){e=e.results.reduce(function(e,t){return t.success||e.push(t.username),e},[]);return Promise.resolve({notAdded:e})}).catch(function(){return{notAdded:[t.username]}}),function(e){return ut({id:o.groupId,users:[t.username],newMemberType:"member",authentication:o.authentication}).then(function(){return e}).catch(function(){return e})}):(i=Promise.resolve({notAdded:[]}),function(e){return Promise.resolve(e)}):(i=et(((e={id:o.groupId})[r?"admins":"users"]=[t.username],e.authentication=o.authentication,e)).then(function(e){if(e.errors&&e.errors.length)throw e.errors[0];return e}).catch(function(){return{notAdded:[t.username]}}),function(e){return nt({id:o.groupId,users:[t.username],authentication:o.authentication}).then(function(){return e})}),{promise:i.then(function(e){if(e.notAdded.length)throw new Error(n);return e}),revert:a}}function gt(a){return dt(a).then(function(e){if(!e)return Promise.resolve({itemId:a.id,shortcut:!0,notUnsharedFrom:[]});var o=a.authentication.username,i=a.owner;return Promise.all([Ye(a),pt({username:o,authentication:a.authentication})]).then(function(e){var t=e[0],e=e[1],e="org_admin"===e.role&&!e.roleId;if(!((i||o)===o)&&!e&&["admin","owner"].indexOf(t)<0)throw Error("This item can not be unshared from group "+a.groupId+" by "+o+" as they not the item owner, an org admin, group admin or group owner.");var e=a,t=e.authentication.username,r=e.owner||t,n=s(e)+"/content/items/"+e.id+"/unshare";return r===t&&(n=s(e)+"/content/users/"+r+"/items/"+e.id+"/unshare"),e.params={groups:e.groupId},v(n,e)}).then(function(e){if(e.notUnsharedFrom.length)throw Error("Item "+a.id+" could not be unshared to group "+a.groupId);return e})})}function yt(e){var t=null;return t=t||"self",t=s(e)+"/portals/"+t,e=P({httpMethod:"GET"},e),v(t,e)}function vt(e){if("string"==typeof e)return e.replace(/\/sharing\/rest\/?$/,"");if("object"==typeof e){var t=e.portalSelf||e,r=t.portalHostname,n=t.urlKey,o=t.customBaseUrl;if(r||n&&o)return t.isPortal?"https://"+t.portalHostname:"https://"+t.urlKey+"."+t.customBaseUrl}return vt(s(e))}var bt={devext:"https://d1011m9qpnz5mw.cloudfront.net",qaext:"https://dyq9ux9ryu4qj.cloudfront.net",www:"https://d1iq7pbacwn5rb.cloudfront.net"};function wt(e){return e.isPortal?vt(e)+"/apps/sites":(e=e.portalHostname.split(".")[0],(bt[e]||bt.www)+"/opendata-ui/assets")}function St(e){return vt(e)+"/sharing/rest"}function xt(e){return e=(e=e.toLowerCase()).includes("//")?e.split("//")[1]:e}function At(e){if(!e)return[];e=e.replace(/^http(s?):\/\//,"");return["http://"+e,"https://"+e]}function Et(e){var t;return e.match(/(qaext|\.mapsqa)\.arcgis.com/)?t="https://hubqa.arcgis.com":e.match(/(devext|\.mapsdevext)\.arcgis.com/)?t="https://hubdev.arcgis.com":e.match(/(www|\.maps)\.arcgis.com/)&&(t="https://hub.arcgis.com"),t}function kt(e){if(e.isPortal)throw new Error("Hub Url is not available in ArcGIS Enterprise");return Et(e.portalHostname)}function Dt(e,t){return vt(t)+"/home/item.html?id="+e}var Tt=function(e,t,r){var n=e.id,e=e.access,t=St(t)+"/content/items/"+n,n=new URLSearchParams({f:"json"});return"public"!==e&&r&&n.append("token",r),t+"?"+n.toString()},It=function(e,t,r){t=Tt(e,t,r),r="\\/"+e.id+"\\?f=json",r=new RegExp(r);return t&&t.replace(r,"/"+e.id+"/data").replace(/\&token/,"?token")};function Ct(e){var t;return e.match(/(qaext|\.mapsqa)\.arcgis.com/)?t="https://hubqa.arcgis.com":e.match(/(devext|\.mapsdevext)\.arcgis.com/)?t="https://hubdev.arcgis.com":e.match(/(www|\.maps)\.arcgis.com/)&&(t="https://hub.arcgis.com"),t}function Pt(e){var t=e;return e.match(/(qaext|\.mapsqa)\.arcgis.com/)?t="https://qaext.arcgis.com":e.match(/(devext|\.mapsdevext)\.arcgis.com/)?t="https://devext.arcgis.com":e.match(/(www|\.maps)\.arcgis.com/)&&(t="https://www.arcgis.com"),t}function qt(e){return Ot.test(e)}var Ot=/\/(map|feature)server/i,Ft=function(e){e=e.match(Ot),e=e&&e[1];return e&&J(e)+" Service"};function Ut(e){var t=e&&e.hubApiUrl;return t||Et(St(e))}var Mt="/api/v3/domains",Lt="/api/v3/datasets",Nt="/api/discussions/v1",Rt=(Object.defineProperty(o.prototype,"session",{get:function(){return this._authentication},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isAuthenticated",{get:function(){return!!this._authentication},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"userRequestOptions",{get:function(){if(this.isAuthenticated)return{authentication:this._authentication,portal:this.sharingApiUrl}},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"requestOptions",{get:function(){var e={portal:this.sharingApiUrl};return e=this.isAuthenticated?{authentication:this._authentication,portal:this.sharingApiUrl}:e},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"hubRequestOptions",{get:function(){return{authentication:this.session,isPortal:this.isPortal,portalSelf:this.portal,hubApiUrl:this.hubUrl,portal:this.sharingApiUrl}},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"portalUrl",{get:function(){return this.isAuthenticated?this.isPortal?"https://"+this._portalSelf.portalHostname:"https://"+this._portalSelf.urlKey+"."+this._portalSelf.customBaseUrl:this._portalUrl},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"sharingApiUrl",{get:function(){return this.portalUrl+"/sharing/rest"},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"hubUrl",{get:function(){return this._hubUrl},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isPortal",{get:function(){return this._portalSelf?this._portalSelf.isPortal:-1===this._portalUrl.indexOf("arcgis.com")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"discussionsServiceUrl",{get:function(){if(this._hubUrl)return""+this._hubUrl+Nt},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"hubSearchServiceUrl",{get:function(){if(this._hubUrl)return""+this._hubUrl+Lt},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"domainServiceUrl",{get:function(){if(this._hubUrl)return""+this._hubUrl+Mt},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"eventsConfig",{get:function(){if(this._portalSelf)return C(this._portalSelf,"portalProperties.hub.settings.events")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"hubEnabled",{get:function(){return a(this._portalSelf,"portalProperties.hub.enabled",!1)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"communityOrgId",{get:function(){if(this._portalSelf)return C(this._portalSelf,"portalProperties.hub.settings.communityOrg.orgId")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"communityOrgHostname",{get:function(){if(this._portalSelf)return C(this._portalSelf,"portalProperties.hub.settings.communityOrg.portalHostname")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"communityOrgUrl",{get:function(){if(this.communityOrgHostname)return"https://"+this.communityOrgHostname},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"helperServices",{get:function(){if(this._portalSelf)return this._portalSelf.helperServices},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"currentUser",{get:function(){return this._currentUser},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"portal",{get:function(){return this._portalSelf},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"properties",{get:function(){return this._properties},enumerable:!1,configurable:!0}),o);function o(e){this._portalUrl="https://www.arcgis.com",this.id=e.id,this._portalUrl=e.portalUrl,this._hubUrl=e.hubUrl,e.authentication&&(this._authentication=e.authentication),e.portalSelf&&(this._portalSelf=e.portalSelf),e.currentUser&&(this._currentUser=e.currentUser),e.properties&&(this._properties=e.properties)}i.create=function(r){return void 0===r&&(r={}),f(this,void 0,void 0,function(){var t;return m(this,function(e){switch(e.label){case 0:return[4,(t=new i(r)).initialize()];case 1:return e.sent(),[2,t]}})})},i.prototype.setAuthentication=function(t){return f(this,void 0,void 0,function(){return m(this,function(e){switch(e.label){case 0:return this._authentication=t,this._portalUrl=t.portal.replace("/sharing/rest",""),[4,this.initialize()];case 1:return e.sent(),[2]}})})},i.prototype.setProperties=function(e){this._properties=e,this._context=new Rt(this.contextOpts)},i.prototype.clearAuthentication=function(){this._context.isPortal||(this._portalUrl=Pt(this._portalUrl)),this._authentication=null,this._portalSelf=null,this._currentUser=null,this._context=new Rt(this.contextOpts)},Object.defineProperty(i.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),i.prototype.initialize=function(){return f(this,void 0,void 0,function(){var t,r,n;return m(this,function(e){switch(e.label){case 0:if(!this._authentication||this._portalSelf&&this._currentUser)return[3,4];g.debug("ArcGISContextManager-"+this.id+": Initializing"),t=this._authentication.username,t=[yt({authentication:this._authentication}),pt({username:t,authentication:this._authentication})],e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Promise.all(t)];case 2:return n=e.sent(),r=n[0],n=n[1],this._portalSelf=r,this._currentUser=n,g.debug("ArcGISContextManager-"+this.id+": received portalSelf and currentUser"),[3,4];case 3:throw r=e.sent(),n='ArcGISContextManager could not fetch portal & user for "'+this._authentication.username+'" using '+this._authentication.portal+".",g.error(n),console.error(n),r;case 4:return g.debug("ArcGISContextManager-"+this.id+": updating context"),this._context=new Rt(this.contextOpts),[2]}})})},Object.defineProperty(i.prototype,"contextOpts",{get:function(){var e={id:this.id,portalUrl:this._portalUrl,hubUrl:this._hubUrl,properties:this._properties};return this._authentication&&(e.authentication=this._authentication),this._portalSelf&&(e.portalSelf=this._portalSelf),this._currentUser&&(e.currentUser=this._currentUser),e},enumerable:!1,configurable:!0});var Gt=i;function i(e){this._portalUrl="https://www.arcgis.com",this._logLevel=c.Level.error,this.id=(new Date).getTime(),e.logLevel&&(this._logLevel=e.logLevel),g.setLogLevel(this._logLevel),g.debug("ArcGISContextManager:ctor: Creating "+this.id),e.properties&&(this._properties=e.properties),e.authentication?(this._authentication=e.authentication,this._portalUrl=this._authentication.portal.replace("/sharing/rest","")):e.portalUrl&&(this._portalUrl=e.portalUrl),this._hubUrl=Ct(this._portalUrl),e.portal&&(this._portalSelf=l(e.portal)),e.currentUser&&(this._currentUser=l(e.currentUser))}var jt=function(e){var t;if(e)return t=e.toLocaleLowerCase(),Object.keys(u).find(function(e){return u[e].some(function(e){return e.toLocaleLowerCase()===t})})},u={app:["Application","City Engine Web Scene","CityEngine Web Scene","Dashboard","Insights Page","Insights Workbook","Operation View","Web Mapping Application","StoryMap","Web Experience","Urban Model"],dataset:["CSV Collection","CSV","Feature Collection Template","Feature Collection","Feature Layer","Feature Service","File Geodatabase","GeoJSON","GeoJson","KML Collection","KML","Microsoft Excel","Raster Layer","Shapefile","Stream Service","Table"],document:["CAD Drawing","Document Link","Hub Page","Site Page","Image","iWork Keynote","iWork Numbers","iWork Pages","Microsoft Powerpoint","Microsoft Visio","Microsoft Word","Notebook","PDF","Pro Map","Report Template"],event:["Hub Event"],feedback:["Form","Quick Capture Project"],initiative:["Hub Initiative"],template:["Hub Initiative Template"],solution:["Solution"],map:["Image Collection","Image Service","Map Service Layer","Map Service","Scene Service","Scene Layer","Vector Tile Service","Web Map Service","Web Map Tile Service","Web Map","Web Scene","WFS","WMS","WMTS"],other:["360 VR Experience","AppBuilder Widget Package","Application Configuration","ArcPad Package","Code Attachment","Code Sample","Desktop Add In","Desktop Application Template","Desktop Application","Desktop Style","Explorer Add In","Explorer Layer","Geocoding Service","Geometry Service","Geoprocessing Package","Geoprocessing Sample","Geoprocessing Service","Layer File","Layer Package","Layer Template","Layer","Layout","Locator Package","Map Area","Map Document","Map Package","Map Service Definition","Map Template","Mobile Application","Mobile Map Package","Native Application","Network Analysis Service","Operations Dashboard Add In","Project Package","Project Template","Raster Function Template","Rule Package","Scene Package","Service Definition","SQLite Geodatabase","Style","Tile Package","Vector Tile Package","Workflow Manager Package"],site:["Hub Site Application","Site Application"]},S=u.app,_t=u.dataset,x=u.document,A=u.event,E=u.feedback,Bt=u.initiative,Kt=u.map,Vt=u.other,Ht=u.site,Wt=["360 VR Experience","Application","CityEngine Web Scene","Code Sample","CSV Collection","CSV","CAD Drawing","Desktop Application","Desktop Application Template","Desktop Style","File Geodatabase","GeoJson","Geoprocessing Package","Geoprocessing Sample","Image","iWork Keynote","iWork Numbers","KML Collection","KML","Layer","Layer File","Layer Package","Layout","Locator Package","Map Package","Map Service Definition","Map Template","Microsoft Excel","Microsoft Powerpoint","Microsoft Visio","Microsoft Word","Notebook","Operations Dashboard Add In","PDF","Pro Map","Project Package","Project Template","Raster function template","Rule Package","Service Definition","Shapefile","Vector Tile Package","Workflow Manager Package"],zt=["Data"],Yt={app:S.concat(E),dataset:_t,document:x,event:A,initiative:Bt,map:Kt,other:Vt,site:Ht,downloadableTypes:Wt,downloadableTypeKeywords:zt,apiTypes:["Feature Service","Map Service","Image Service"]};function Jt(e){return-1!==Wt.indexOf(e.type)||e.typeKeywords&&zt.some(function(t){return e.typeKeywords.some(function(e){return e===t})})}var Qt=new RegExp(/.+(?:map|feature|image)server/i);function Zt(e){var t=e.match(Qt);return t?t[0]:b(e.split("?")[0])}function $t(e){return[[e.xmin,e.ymin],[e.xmax,e.ymax]]}var Xt={xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:{wkid:4326}};function er(e){var t=e.portalSelf,r=t.defaultExtent,t=C(t,"helperServices.geometry.url");if(!t)return Promise.resolve(Xt);if(!r)return Promise.resolve(Xt);t+="/project",r={httpMethod:"POST",params:{geometries:JSON.stringify({geometryType:"esriGeometryEnvelope",geometries:[r]}),transformForward:!1,transformation:"",inSR:r.spatialReference.wkid,outSR:4326,f:"json"}};return e.authentication&&(r.authentication=e.authentication),v(t,r).then(function(e){e=e.geometries[0];return{xmin:e.xmin,ymin:e.ymin,xmax:e.xmax,ymax:e.ymax,spatialReference:{wkid:4326}}}).catch(function(e){return Xt})}var tr=function(e){return Array.isArray(e)&&Array.isArray(e[0])&&Array.isArray(e[1])};function rr(e){return console.warn("DEPRECATED: use isBBox() instead"),tr(e)}var nr=function(e){var t=e[0],r=t[0],t=t[1],e=e[1],n=e[0],e=e[1];return{rings:[[[r,t],[n,t],[n,e],[r,e],[r,t]]],spatialReference:{wkid:4326}}};function or(e){var t,r;switch((e||"").toLowerCase()){case"image service":t="dataset";break;case"feature service":case"raster layer":t="map";break;case"microsoft excel":t="document";break;case"cad drawing":case"feature collection template":case"report template":t="content";break;default:t={other:"content",solution:"template"}[r=jt(e)]||r}return t}function ir(e){return e&&e.isPortal}var k,ar=function(e,t){return!!e&&"public"===e.access&&!ir(t)},sr=function(e,t){return!ir(t)&&"public"===e.access&&"CSV"===e.type&&e.size<=5e6},ur=function(e,t,r){var n,o,r=lr(e,t,r);return r||(o="/content","feedback"===(n=or(e))?o="/feedback/surveys":cr(e)?o="/pages":-1<["app","dataset","document","map","template"].indexOf(n)&&(o="/"+n+"s"),r=o+"/"+t),r},cr=function(e){return["Hub Page","Site Page"].includes(e)},lr=function(e,t,r){var n;return"Solution"===e&&(0<(null==r?void 0:r.indexOf("Deployed"))&&(n="/content/"+t),n="/templates/"+t+"/about"),n};function pr(e){return{updateFrequency:"metadata.dataIdInfo.resMaint.maintFreq.MaintFreqCd.@_value",reviseDate:"metadata.dataIdInfo.idCitation.date.reviseDate",pubDate:"metadata.dataIdInfo.idCitation.date.pubDate",createDate:"metadata.dataIdInfo.idCitation.date.createDate",metadataUpdateFrequency:"metadata.mdMaint.maintFreq.MaintFreqCd.@_value",metadataUpdatedDate:"metadata.mdDateSt"}[e]}function dr(e,t){t=pr(t);return t&&C(e,t)}(S=k=k||{}).Year="year",S.Month="month",S.Day="day",S.Time="time";function fr(e){return Array.isArray(e)?e:[e]}var mr=function(e){var t=[];return fr(C(e,"metadata.distInfo")||[]).forEach(function(e){fr(e.distTranOps||[]).forEach(function(e){fr(e.onLineSrc||[]).forEach(function(e){t.push(e)})})}),t.length?t:null},hr=function(e,t){t=t.url&&Zt(t.url);return t&&e.linkage.includes(t)},gr=function(e,t,r){var n=e.linkage,r=C(r,"authentication.token");return r&&hr(e,t)&&(t=new URL(e.linkage),(e=new URLSearchParams(t.search)).set("token",r),t.search=e.toString(),n=t.toString()),n},yr=[{type:"CC0-1.0",abbr:"CC0",name:"Public Domain Dedication",url:"http://creativecommons.org/publicdomain/zero/1.0"},{type:"CC-BY-4.0",abbr:"CC BY",name:"Attribution 4.0 International",url:"http://creativecommons.org/licenses/by/4.0"},{type:"CC-BY-3.0",abbr:"CC BY 3.0",name:"Attribution 3.0 Unported",url:"http://creativecommons.org/licenses/by/3.0"},{type:"CC-BY-2.5",abbr:"CC BY 2.5",name:"Attribution 2.5 Generic",url:"http://creativecommons.org/licenses/by/2.5"},{type:"CC-BY-2.0",abbr:"CC BY 2.0",name:"Attribution 2.0 Generic",url:"http://creativecommons.org/licenses/by/2.0"},{type:"CC-BY-1.0",abbr:"CC BY 1.0",name:"Attribution 1.0 Generic",url:"http://creativecommons.org/licenses/by/1.0"},{type:"CC-BY-SA-4.0",abbr:"CC BY-SA",name:"Attribution-ShareAlike 4.0 International",url:"http://creativecommons.org/licenses/by-sa/4.0"},{type:"CC-BY-SA-3.0",abbr:"CC BY-SA 3.0",name:"Attribution-ShareAlike 3.0 Unported",url:"http://creativecommons.org/licenses/by-sa/3.0"},{type:"CC-BY-SA-2.5",abbr:"CC BY-SA 2.5",name:"Attribution-ShareAlike 2.5 Generic",url:"http://creativecommons.org/licenses/by-sa/2.5"},{type:"CC-BY-SA-2.0",abbr:"CC BY-SA 2.0",name:"Attribution-ShareAlike 2.0 Generic",url:"http://creativecommons.org/licenses/by-sa/2.0"},{type:"CC-BY-SA-1.0",abbr:"CC BY-SA 1.0",name:"Attribution-ShareAlike 1.0 Generic",url:"http://creativecommons.org/licenses/by-sa/1.0"},{type:"CC-BY-ND-4.0",abbr:"CC BY-ND",name:"Attribution-NoDerivatives 4.0 International",url:"http://creativecommons.org/licenses/by-nd/4.0"},{type:"CC-BY-ND-3.0",abbr:"CC BY-ND 3.0",name:"Attribution-NoDerivs 3.0 Unported",url:"http://creativecommons.org/licenses/by-nd/3.0"},{type:"CC-BY-ND-2.5",abbr:"CC BY-ND 2.5",name:"Attribution-NoDerivs 2.5 Generic",url:"http://creativecommons.org/licenses/by-nd/2.5"},{type:"CC-BY-ND-2.0",abbr:"CC BY-ND 2.0",name:"Attribution-NoDerivs 2.0 Generic",url:"http://creativecommons.org/licenses/by-nd/2.0"},{type:"CC-BY-ND-1.0",abbr:"CC BY-ND 1.0",name:"Attribution-NoDerivs 1.0 Generic",url:"http://creativecommons.org/licenses/by-nd/1.0"},{type:"CC-BY-NC-4.0",abbr:"CC BY-NC",name:"Attribution-NonCommercial 4.0 International",url:"https://creativecommons.org/licenses/by-nc/4.0"},{type:"CC-BY-NC-3.0",abbr:"CC BY-NC 3.0",name:"Attribution-NonCommercial 3.0 Unported",url:"https://creativecommons.org/licenses/by-nc/3.0"},{type:"CC-BY-NC-2.5",abbr:"CC BY-NC 2.5",name:"Attribution-NonCommercial 2.5 Generic",url:"https://creativecommons.org/licenses/by-nc/2.5"},{type:"CC-BY-NC-2.0",abbr:"CC BY-NC 2.0",name:"Attribution-NonCommercial 2.0 Generic",url:"https://creativecommons.org/licenses/by-nc/2.0"},{type:"CC-BY-NC-1.0",abbr:"CC BY-NC 1.0",name:"Attribution-NonCommercial 1.0 Generic",url:"https://creativecommons.org/licenses/by-nc/1.0"},{type:"CC-BY-NC-SA-4.0",abbr:"CC BY-NC-SA",name:"Attribution-NonCommercial-ShareAlike 4.0 International",url:"https://creativecommons.org/licenses/by-nc-sa/4.0"},{type:"CC-BY-NC-SA-3.0",abbr:"CC BY-NC-SA 3.0",name:"Attribution-NonCommercial-ShareAlike 3.0 Unported",url:"https://creativecommons.org/licenses/by-nc-sa/3.0"},{type:"CC-BY-NC-SA-2.5",abbr:"CC BY-NC-SA 2.5",name:"Attribution-NonCommercial-ShareAlike 2.5 Generic",url:"https://creativecommons.org/licenses/by-nc-sa/2.5"},{type:"CC-BY-NC-SA-2.0",abbr:"CC BY-NC-SA 2.0",name:"Attribution-NonCommercial-ShareAlike 2.0 Generic",url:"https://creativecommons.org/licenses/by-nc-sa/2.0"},{type:"CC-BY-NC-SA-1.0",abbr:"CC BY-NC-SA 1.0",name:"Attribution-NonCommercial-ShareAlike 1.0 Generic",url:"https://creativecommons.org/licenses/by-nc-sa/1.0"},{type:"CC-BY-NC-ND-4.0",abbr:"CC BY-NC-ND",name:"Attribution-NonCommercial-NoDerivatives 4.0 International",url:"https://creativecommons.org/licenses/by-nc-nd/4.0"},{type:"CC-BY-NC-ND-3.0",abbr:"CC BY-NC-ND 3.0",name:"Attribution-NonCommercial-NoDerivs 3.0 Unported",url:"https://creativecommons.org/licenses/by-nc-nd/3.0"},{type:"CC-BY-NC-ND-2.5",abbr:"CC BY-NC-ND 2.5",name:"Attribution-NonCommercial-NoDerivs 2.5 Generic",url:"https://creativecommons.org/licenses/by-nc-nd/2.5"},{type:"CC-BY-NC-ND-2.0",abbr:"CC BY-NC-ND 2.0",name:"Attribution-NonCommercial-NoDerivs 2.0 Generic",url:"https://creativecommons.org/licenses/by-nc-nd/2.0"},{type:"CC-BY-NC-ND-1.0",abbr:"CC BY-NC-ND 1.0",name:"Attribution-NonCommercial-NoDerivs 1.0 Generic",url:"https://creativecommons.org/licenses/by-nc-nd/1.0"},{type:"PDDL-1.0",abbr:"PDDL",name:"ODC Public Domain Dedication and License",url:"http://opendatacommons.org/licenses/pddl/summary"},{type:"ODbL-1.0",abbr:"ODbL",name:"ODC Open Database License",url:"http://opendatacommons.org/licenses/odbl/summary"},{type:"ODC-BY-1.0",abbr:"ODC BY",name:"ODC Attribution License",url:"http://opendatacommons.org/licenses/by/summary"}];function vr(r){var e,t=!(e={type:(r=r||"")?"custom":"none",text:r}),n=yr.filter(function(e){return e=e,(t=(t=r).toLowerCase()).includes(e.name.toLowerCase())||t.includes(e.url.toLowerCase())||t.includes(e.abbr.toLowerCase());var t});return n.length&&(t=!0,e=n.pop()),t||(n=void 0,!function(e){try{return new URL(e).protocol}catch(e){return}}(r)?(t=r,new RegExp(/^<a[\s]+(href\s?=\s?["'].*?["'])+([^>]?)>((?:.(?!\<\/a\>))*.)?<\/a>$|^<a[\s]+(href\s?=\s?["'].*?["'])+([^>]?)\/>/).test(t)&&(t=new RegExp(/href\s?=\s?["'](.*?)["']/),n=r.match(t)[1])):n=r,n&&(e.url=n,e.text="")),e.text||delete e.text,e}function br(e,t,r){if(!e||!e.thumbnail)return null;var n=r||{},o=n.token,n=n.width,t=Tt(e,t,o=o||"string"!=typeof r?o:r).split("?"),r=t[0],o=t[1],t=new URLSearchParams(o),o=(t.delete("f"),n&&t.append("w",n+""),t.toString()),n=r+"/info/"+e.thumbnail;return o?n+"?"+o:n}function wr(e,t){return{"001":c.UpdateFrequency.Continual,"002":c.UpdateFrequency.Daily,"003":c.UpdateFrequency.Weekly,"004":c.UpdateFrequency.Fortnightly,"005":c.UpdateFrequency.Monthly,"006":c.UpdateFrequency.Quarterly,"007":c.UpdateFrequency.Biannually,"008":c.UpdateFrequency.Annually,"009":c.UpdateFrequency.AsNeeded,"010":c.UpdateFrequency.Irregular,"011":c.UpdateFrequency.NotPlanned,"012":c.UpdateFrequency.Unknown,"013":c.UpdateFrequency.Semimonthly}[dr(e,t||"updateFrequency")]}function Sr(e){return null!=(e={appbuilderExtension:"file",appbuilderWidgetPackage:"widgets-source",application:"web",applicationConfiguration:"app-gear",arcgisProMap:"desktop",cadDrawing:"file-cad",cityEngineWebScene:"urban-model",codeAttachment:"file-code",codeSample:"file-code",colorSet:"palette",contentCategorySet:"label",csv:"file-csv",cSV:"file-csv",cSVCollection:"file-csv",dashboard:"dashboard",desktopApplication:"desktop",documentLink:"link",excaliburImageryProject:"file",explorerMap:"file",exportPackage:"file",featureCollection:"data",featureCollectionTemplate:"file",featureLayer:"data",featureService:"collection",fileGeodatabase:"data",form:"survey",geocodingService:"file",geodataService:"file",geometryService:"file",geopackage:"file",geoprocessingService:"file",globeLayer:"layers",globeService:"file",hubInitiative:"initiative",hubInitiativeTemplate:"initiative-template",hubPage:"browser",hubSiteApplication:"web",image:"file-image",imageService:"data",insightsModel:"file",insightsPage:"graph-moving-average",insightsTheme:"palette",insightsWorkbook:"graph-moving-average",iWorkPages:"file-text",iWorkKeynote:"presentation",iWorkNumbers:"file-report",kML:"data",kMLCollection:"data",layer:"layers",layerPackage:"layers",layerTemplate:"file",locatorPackage:"file",mapArea:"file",mapDocument:"map-contents",mapImageLayer:"collection",mapPackage:"file",mapService:"collection",microsoftExcel:"file-report",microsoftPowerpoint:"presentation",microsoftWord:"file-text",mission:"file",mobileMapPackage:"map-contents",nativeApplication:"mobile",nativeApplicationInstaller:"file",nativeApplicationTemplate:"file",mobileApplication:"mobile",networkAnalysisService:"file",notebook:"code",orientedImageryCatalog:"file",orthoMappingProject:"file",orthoMappingTemplate:"file",pDF:"file-pdf",quickCaptureProject:"mobile",rasterFunctionTemplate:"file",rasterLayer:"map",realTimeAnalytic:"file",relationalDatabaseConnection:"file",reportTemplate:"file",sceneLayer:"data",sceneService:"urban-model",serviceDefinition:"file",shapefile:"data",solution:"puzzle-piece",sqliteGeodatabase:"file",statisticalDataCollection:"file",storymap:"tour",storyMap:"tour",storymapTheme:"palette",symbolSet:"file",table:"table",urbanModel:"urban-model",vectorTilePackage:"file-shape",vectorTileService:"map",visioDocument:"conditional-rules",webExperience:"apps",webMap:"map",webMappingApplication:"apps",webScene:"urban-model",wfs:"map",wFS:"map",wMS:"map",wMTS:"map",workflowManagerService:"file",workforceProject:"list-check"}[W(e||"")])?e:"file"}function xr(e,t){var r=(r=t.authentication)&&r.token;return{portalHome:Dt(e.id,t),portalApi:Tt(e,t,r),portalData:It(e,t,r),thumbnail:br(e,t,{token:r})}}function Ar(e,t){var r;return r=sr(e,t)?Ut(t).replace("/api/v3","")+"/datasets/"+e.id+"_0/FeatureServer/0":r}var Er=function(e){e=e&&1===e.length?e[0]:void 0;return e&&e.capabilities.includes("Query")?e:void 0},kr=function(e,t,r,n){return!sr(e,n)&&t&&r&&1<r.length&&!Cr(e.url)},Dr=(c.UpdateFrequency=void 0,(E=c.UpdateFrequency||(c.UpdateFrequency={})).Continual="continual",E.Daily="daily",E.Weekly="weekly",E.Fortnightly="fortnightly",E.Monthly="monthly",E.Quarterly="quarterly",E.Biannually="biannually",E.Annually="annually",E.AsNeeded="as-needed",E.Irregular="irregular",E.NotPlanned="not-planned",E.Unknown="unknown",E.Semimonthly="semimonthly",function(e,t){e=dr(e,t),/^\d{4}$/.test(e=""+e)?(r=new Date(+e,0,1),n=k.Year):/^\d{4}-\d{1,2}$/.test(e)?(o=e.split("-"),r=new Date(+o[0],+o[1]-1,1),n=k.Month):/^\d{4}-\d{1,2}-\d{1,2}$/.test(e)?(o=e.split("-"),r=new Date(+o[0],+o[1]-1,+o[2]),n=k.Day):Number.isNaN(Date.parse(e))||(r=new Date(e),n=e.includes("T")?k.Time:k.Day);var r,n,o=r&&n&&{date:r,precision:n};return o&&P(P({},o),{source:"metadata."+pr(t)})}),Tr=function(e,t){t+=".editingInfo.lastEditDate",e=C(e,t);return e&&{date:new Date(e),source:t,precision:k.Day}},Ir=function(e,t){return{date:new Date(e[t]),precision:k.Day,source:"item."+t}},Cr=function(e){e=e&&e.match(/\/\d+$/);return e&&e[0].slice(1)},Pr=function(e){return e&&"feature service"===e.toLowerCase()};function qr(e){var t=(e=void 0===e?{}:e).type,r=e.typeKeywords||[];return("Site Application"===e.type||"Web Mapping Application"===e.type&&d(r,"hubSite"))&&(t="Hub Site Application"),("Site Page"===e.type||"Web Mapping Application"===e.type&&d(r,"hubPage"))&&(t="Hub Page"),"Hub Initiative"===e.type&&d(r,"hubInitiativeTemplate")&&(t="Hub Initiative Template"),t="Web Mapping Application"===e.type&&d(r,"hubSolutionTemplate")?"Solution":t}function Or(e){return Cr(e.url)||Pr(e.type)&&e.typeKeywords&&d(e.typeKeywords,"Singlelayer")&&"0"}var Fr=function(e){var t;if("public"===e.access)return t=e.id,e=Or(e),e?t+"_"+e:t};function Ur(e){if(!e)return e;var t=["categories",""];return e.map(function(e){return e.split("/")}).reduce(function(e,t,r){return h(e,t)},[]).filter(function(e){return!d(t,e.toLowerCase())})}function Mr(e,t,r){var n=Cr(e.url),o=n?parseInt(n,10):r;return t&&(Q(o)?Pr(e.type)&&Er(t):t.find(function(e){return e.id===o}))}function Lr(e){return e.isView}var Nr=function(n,e){var t,r,o=e||{},i=o.slug,a=o.requestOptions,s=o.data,u=o.metadata,c=o.groupIds,l=o.ownerUser,p=o.org,d=o.errors,f=o.server,m=o.layers,h=o.recordCount,g=o.boundary,y=o.extent,v=o.searchDescription,o=o.statistics,b=Mr(n,m,null==e?void 0:e.layerId),w=(e=b,sr(t=n,w=a)?t.id:ar(t,w)?e?t.id+"_"+e.id:Fr(t):void 0),e=i||w||n.id,S=((kr(t=n,r=b,m,a)?r.name:t.title||t.name)||"").replace(/_/g," "),x=kr(n,b,m,a)&&b.description,A=b?b.type:qr(n),E=P({relative:ur(A,e,n.typeKeywords)},a&&xr(n,a)),k=Ar(n,a),D=(r=n,Dr((t={metadata:u,layer:b,server:f}).metadata,"reviseDate")||Tr(t,"layer")||Tr(t,"server")||Ir(r,"modified")),T=(a=n,Dr(t=u,"pubDate")||Dr(t,"createDate")||Ir(a,"created")),I=(r=n,Dr(u,"metadataUpdatedDate")||Ir(r,"modified"));return P(P({item:n},n),{slug:i,data:s,metadata:u,groupIds:c,ownerUser:l,org:p,errors:d||[],server:f,layers:m,recordCount:h,statistics:o,hubId:w,identifier:e,get isProxied(){return!!k},layer:b,name:S,get title(){return S},get description(){return x||n.description},type:A,get family(){return or(A)},get url(){return k||(b?Zt(n.url)+"/"+b.id:n.url)},get categories(){return Ur(n.categories)},get actionLinks(){return n.properties&&n.properties.links},get hubActions(){return n.properties&&n.properties.actions},get isDownloadable(){return Jt(n)},get structuredLicense(){return vr(n.licenseInfo)},get permissions(){return{visibility:n.access,control:n.itemControl||"view"}},get extent(){var e=n,t=y,r=b;return e=tr(e.extent)?e.extent:void 0,t=tr(null==t?void 0:t.coordinates)?t.coordinates:void 0,r=4326===C(r,"extent.spatialReference.wkid")?$t(r.extent):void 0,e||t||r},get boundary(){return g||function(e){var t,r=e.extent,n=tr(r),e=(null==(e=e.properties)?void 0:e.boundary)||(n?"item":void 0);switch(e){case"item":t=n?nr(r):null;break;case"none":t=null}return{provenance:e,geometry:t}}(n)},get summary(){return v||n.snippet||n.description},urls:E,get portalHomeUrl(){return E.portalHome},get portalDataUrl(){return E.portalData},get portalApiUrl(){return E.portalApi},get thumbnailUrl(){return E.thumbnail},get createdDate(){return new Date(n.created)},createdDateSource:"item.created",get updatedDate(){return D.date},get updatedDateSource(){return D.source},get updatedDatePrecision(){return D.precision},get modified(){return D.date.getTime()},get publishedDate(){return T.date},get publishedDateSource(){return T.source},get publishedDatePrecision(){return T.precision},get metadataUpdatedDate(){return I.date},get metadataUpdatedDateSource(){return I.source},get metadataUpdatedDatePrecision(){return I.precision},get updateFrequency(){return wr(u)},get metadataUpdateFrequency(){return wr(u,"metadataUpdateFrequency")},get publisher(){return{name:n.owner,username:n.owner}},get metrics(){return n.properties&&n.properties.metrics},get spatialReference(){var e;return(null==(e=null==b?void 0:b.extent)?void 0:e.spatialReference)||function(e){e=e.spatialReference;if(!e||"object"==typeof e)return e;e=parseInt(e+"",10);return isNaN(e)?null:{wkid:e}}(n)||null},get viewDefinition(){var e=b&&Lr(b)&&s&&Array.isArray(s.layers)&&s.layers.find(function(e){return e.id===b.id});return e?e.layerDefinition:void 0},get orgId(){return p?p.id:n.orgId||(null==l?void 0:l.orgId)},get contentTypeIcon(){return console.warn("DEPRECATED: it is now the responsibility of the consuming package to determine the icon"),Sr(A)},get license(){return console.warn("DEPRECATED: use structuredLicense instead"),{name:"Custom License",description:n.accessInformation}},get hubType(){return console.warn("DEPRECATED: use family instead"),or(A)},get additionalResources(){var t=n,e=u,r=void 0;return(e=mr(e))&&e.map(function(e){return{name:e.orName,url:gr(e,t,r),isDataSource:hr(e,t)}})}})};function Rr(e){e=e?e.split("_"):[];return{itemId:e[0],layerId:e[1]}}function Gr(e){e=Rr(e).itemId;return!(!e||fe(e))}function jr(e,t){return/.+::.+/.test(e)?e:t+"::"+e}function _r(e,t){return t&&e.match("^"+t+"::")?e.split(t+"::")[1]:e}function D(){this.operations=[]}D.prototype.startOperation=function(e){e=l(e);e.startedAt=(new Date).getTime(),e.state="working",this.operations.push(e)},D.prototype.start=function(e,t){e={type:e,id:a(t,"id",V(e+"_")),inputs:a(t,"inputs",{}),cleanup:a(t,"cleanup","n/a"),startedAt:(new Date).getTime(),state:"working"};return this.operations.push(e),e.id},D.prototype.getOperation=function(t){return this.operations.find(function(e){return e.id===t})},D.prototype.getOperations=function(){return this.operations},D.prototype.finish=function(e,t){var r=this.getOperation(e);if(!r)throw new Error("No operation with id "+e+" present in stack");r.duration=(new Date).getTime()-r.startedAt,r.state="completed",t&&(r.output=l(t))},D.prototype.merge=function(e){this.operations=h(this.operations,e.operations)},D.prototype.getCompleted=function(){return l(this.operations.filter(function(e){return"completed"===e.state}))},D.prototype.getWorking=function(){return l(this.operations.filter(function(e){return"working"===e.state}))},D.prototype.toString=function(){return this.operations.sort(function(e,t){return e.startedAt<t.startedAt?-1:t.startedAt<e.startedAt?1:0}).map(Kr).join("\n")},D.prototype.serialize=function(){return{operations:l(this.getOperations())}};var Br=D;function Kr(e){var t=e.startedAt+" : Operation "+e.id+" started with inputs "+JSON.stringify(e.inputs)+" but was not completed";return t="completed"===e.state?e.startedAt+" : Operation "+e.id+" took "+e.duration+" ms with inputs "+JSON.stringify(e.inputs)+" and output "+(e.output?JSON.stringify(e.output):"n/a"):t}var Vr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Hr(e,t,r){return e(r={path:t,exports:{},require:function(e,t){throw null==t&&r.path,new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}},r.exports),r.exports}function Wr(e,t){t=Object.assign({},Qr,t),e=e.replace(/<!--[\s\S]*?-->/g,"");for(var r=new zr("!xml"),n=r,o=new RegExp("<((!\\[CDATA\\[([\\s\\S]*?)(\\]\\]>))|(([\\w:\\-\\._]*:)?([\\w:\\-\\._]+))([^>]*)>|((\\/)(([\\w:\\-\\._]*:)?([\\w:\\-\\._]+))>))([^<]*)","g"),i=o.exec(e),a=o.exec(e);i;){var s,u="]]>"===(u=i)[4]?Jr.CDATA:"/"===u[10]?Jr.CLOSING:void 0!==u[8]&&"/"===u[8].substr(u[8].length-1)?Jr.SELF:Jr.OPENING;u===Jr.CLOSING?(n.parent&&i[14]&&(n.parent.val=T.getValue(n.parent.val)+""+Zr(i[14],t)),n=n.parent):u===Jr.CDATA?t.cdataTagName?((s=new zr(t.cdataTagName,n,i[3])).attrsMap=en(i[8],t),n.addChild(s),n.val=T.getValue(n.val)+t.cdataPositionChar,i[14]&&(n.val+=Zr(i[14],t))):n.val=(n.val||"")+(i[3]||"")+Zr(i[14],t):u===Jr.SELF?(s=new zr(t.ignoreNameSpace?i[7]:i[5],n,""),i[8]&&1<i[8].length&&(i[8]=i[8].substr(0,i[8].length-1)),s.attrsMap=en(i[8],t),n.addChild(s)):((s=new zr(t.ignoreNameSpace?i[7]:i[5],n,Zr(i[14],t))).attrsMap=en(i[8],t),n.addChild(s),n=s),i=a,a=o.exec(e)}return r}var T=Hr(function(e,t){function r(e,t){return null!=(t=t.exec(e))}t.isExist=function(e){return void 0!==e},t.isEmptyObject=function(e){return 0===Object.keys(e).length},t.merge=function(e,t){if(t)for(var r=Object.keys(t),n=r.length,o=0;o<n;o++)e[r[o]]=t[r[o]]},t.getValue=function(e){return t.isExist(e)?e:""},t.doesMatch=r,t.doesNotMatch=function(e,t){return!r(e,t)},t.getAllMatches=function(e,t){for(var r=[],n=t.exec(e);n;){for(var o=[],i=n.length,a=0;a<i;a++)o.push(n[a]);r.push(o),n=t.exec(e)}return r}}),zr=function(e,t,r){this.tagname=e,this.parent=t,this.child=[],this.attrsMap,this.val=r,this.addChild=function(e){this.child.push(e)}},Yr=Hr(function(e,t){var r=Vr;function s(e,t){if(!e)return t;var r,n={};for(r in t)n[r]=(D(e,r)?e:t)[r];return n}function f(e,t){var r="";return 55296<=e&&e<=57343||1114111<e?(t&&I("character reference outside the permissible Unicode range"),""):D(x,e)?(t&&I("disallowed character reference"),x[e]):(t&&T(A,e)&&I("disallowed character reference"),65535<e&&(r+=E((e-=65536)>>>10&1023|55296),e=56320|1023&e),r+E(e))}function u(e){return"&#x"+e.toString(16).toUpperCase()+";"}function c(e){return"&#"+e+";"}function l(e,t){function r(e){return a(e.charCodeAt(0))}(t=s(t,l.options)).strict&&v.test(e)&&I("forbidden code point");var n=t.encodeEverything,o=t.useNamedReferences,i=t.allowUnsafeSymbols,a=t.decimal?c:u;return n?(e=e.replace(d,function(e){return o&&D(g,e)?"&"+g[e]+";":r(e)}),o&&(e=e.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;").replace(/&#x66;&#x6A;/g,"&fjlig;")),o&&(e=e.replace(h,function(e){return"&"+g[e]+";"}))):o?e=(e=(e=i?e:e.replace(y,function(e){return"&"+g[e]+";"})).replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;")).replace(h,function(e){return"&"+g[e]+";"}):i||(e=e.replace(y,r)),e.replace(p,function(e){var t=e.charCodeAt(0),e=e.charCodeAt(1);return a(1024*(t-55296)+e-56320+65536)}).replace(m,r)}function n(e,p){var d=(p=s(p,n.options)).strict;return d&&a.test(e)&&I("malformed character reference"),e.replace(b,function(e,t,r,n,o,i,a,s){var u,c,l;return t?(t=t,c=r,d&&!c&&I("character reference was not terminated by a semicolon"),u=parseInt(t,10),f(u,d)):n?(r=n,c=o,d&&!c&&I("character reference was not terminated by a semicolon"),u=parseInt(r,16),f(u,d)):i?D(w,l=i)?w[l]:(d&&I("named character reference was not terminated by a semicolon"),e):(l=a,(t=s)&&p.isAttributeValue?(d&&"="==t&&I("`&` did not start a character reference"),e):(d&&I("named character reference was not terminated by a semicolon"),S[l]+(t||"")))})}var o=t,t=e&&e.exports==o&&e,e="object"==typeof Vr&&Vr,p=(e.global!==e&&e.window!==e||(r=e),/[\uD800-\uDBFF][\uDC00-\uDFFF]/g),d=/[\x01-\x7F]/g,m=/[\x01-\t\x0B\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,h=/<\u20D2|=\u20E5|>\u20D2|\u205F\u200A|\u219D\u0338|\u2202\u0338|\u2220\u20D2|\u2229\uFE00|\u222A\uFE00|\u223C\u20D2|\u223D\u0331|\u223E\u0333|\u2242\u0338|\u224B\u0338|\u224D\u20D2|\u224E\u0338|\u224F\u0338|\u2250\u0338|\u2261\u20E5|\u2264\u20D2|\u2265\u20D2|\u2266\u0338|\u2267\u0338|\u2268\uFE00|\u2269\uFE00|\u226A\u0338|\u226A\u20D2|\u226B\u0338|\u226B\u20D2|\u227F\u0338|\u2282\u20D2|\u2283\u20D2|\u228A\uFE00|\u228B\uFE00|\u228F\u0338|\u2290\u0338|\u2293\uFE00|\u2294\uFE00|\u22B4\u20D2|\u22B5\u20D2|\u22D8\u0338|\u22D9\u0338|\u22DA\uFE00|\u22DB\uFE00|\u22F5\u0338|\u22F9\u0338|\u2933\u0338|\u29CF\u0338|\u29D0\u0338|\u2A6D\u0338|\u2A70\u0338|\u2A7D\u0338|\u2A7E\u0338|\u2AA1\u0338|\u2AA2\u0338|\u2AAC\uFE00|\u2AAD\uFE00|\u2AAF\u0338|\u2AB0\u0338|\u2AC5\u0338|\u2AC6\u0338|\u2ACB\uFE00|\u2ACC\uFE00|\u2AFD\u20E5|[\xA0-\u0113\u0116-\u0122\u0124-\u012B\u012E-\u014D\u0150-\u017E\u0192\u01B5\u01F5\u0237\u02C6\u02C7\u02D8-\u02DD\u0311\u0391-\u03A1\u03A3-\u03A9\u03B1-\u03C9\u03D1\u03D2\u03D5\u03D6\u03DC\u03DD\u03F0\u03F1\u03F5\u03F6\u0401-\u040C\u040E-\u044F\u0451-\u045C\u045E\u045F\u2002-\u2005\u2007-\u2010\u2013-\u2016\u2018-\u201A\u201C-\u201E\u2020-\u2022\u2025\u2026\u2030-\u2035\u2039\u203A\u203E\u2041\u2043\u2044\u204F\u2057\u205F-\u2063\u20AC\u20DB\u20DC\u2102\u2105\u210A-\u2113\u2115-\u211E\u2122\u2124\u2127-\u2129\u212C\u212D\u212F-\u2131\u2133-\u2138\u2145-\u2148\u2153-\u215E\u2190-\u219B\u219D-\u21A7\u21A9-\u21AE\u21B0-\u21B3\u21B5-\u21B7\u21BA-\u21DB\u21DD\u21E4\u21E5\u21F5\u21FD-\u2205\u2207-\u2209\u220B\u220C\u220F-\u2214\u2216-\u2218\u221A\u221D-\u2238\u223A-\u2257\u2259\u225A\u225C\u225F-\u2262\u2264-\u228B\u228D-\u229B\u229D-\u22A5\u22A7-\u22B0\u22B2-\u22BB\u22BD-\u22DB\u22DE-\u22E3\u22E6-\u22F7\u22F9-\u22FE\u2305\u2306\u2308-\u2310\u2312\u2313\u2315\u2316\u231C-\u231F\u2322\u2323\u232D\u232E\u2336\u233D\u233F\u237C\u23B0\u23B1\u23B4-\u23B6\u23DC-\u23DF\u23E2\u23E7\u2423\u24C8\u2500\u2502\u250C\u2510\u2514\u2518\u251C\u2524\u252C\u2534\u253C\u2550-\u256C\u2580\u2584\u2588\u2591-\u2593\u25A1\u25AA\u25AB\u25AD\u25AE\u25B1\u25B3-\u25B5\u25B8\u25B9\u25BD-\u25BF\u25C2\u25C3\u25CA\u25CB\u25EC\u25EF\u25F8-\u25FC\u2605\u2606\u260E\u2640\u2642\u2660\u2663\u2665\u2666\u266A\u266D-\u266F\u2713\u2717\u2720\u2736\u2758\u2772\u2773\u27C8\u27C9\u27E6-\u27ED\u27F5-\u27FA\u27FC\u27FF\u2902-\u2905\u290C-\u2913\u2916\u2919-\u2920\u2923-\u292A\u2933\u2935-\u2939\u293C\u293D\u2945\u2948-\u294B\u294E-\u2976\u2978\u2979\u297B-\u297F\u2985\u2986\u298B-\u2996\u299A\u299C\u299D\u29A4-\u29B7\u29B9\u29BB\u29BC\u29BE-\u29C5\u29C9\u29CD-\u29D0\u29DC-\u29DE\u29E3-\u29E5\u29EB\u29F4\u29F6\u2A00-\u2A02\u2A04\u2A06\u2A0C\u2A0D\u2A10-\u2A17\u2A22-\u2A27\u2A29\u2A2A\u2A2D-\u2A31\u2A33-\u2A3C\u2A3F\u2A40\u2A42-\u2A4D\u2A50\u2A53-\u2A58\u2A5A-\u2A5D\u2A5F\u2A66\u2A6A\u2A6D-\u2A75\u2A77-\u2A9A\u2A9D-\u2AA2\u2AA4-\u2AB0\u2AB3-\u2AC8\u2ACB\u2ACC\u2ACF-\u2ADB\u2AE4\u2AE6-\u2AE9\u2AEB-\u2AF3\u2AFD\uFB00-\uFB04]|\uD835[\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDCCF\uDD04\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDD6B]/g,g={"":"shy","":"zwnj","":"zwj","":"lrm","":"ic","":"it","":"af","":"rlm","":"ZeroWidthSpace","":"NoBreak","":"DownBreve","":"tdot","":"DotDot","\t":"Tab","\n":"NewLine","":"puncsp","":"MediumSpace","":"thinsp","":"hairsp","":"emsp13","":"ensp","":"emsp14","":"emsp","":"numsp","":"nbsp","":"ThickSpace","":"oline",_:"lowbar","":"dash","":"ndash","":"mdash","":"horbar",",":"comma",";":"semi","":"bsemi",":":"colon","":"Colone","!":"excl","":"iexcl","?":"quest","":"iquest",".":"period","":"nldr","":"mldr","":"middot","'":"apos","":"lsquo","":"rsquo","":"sbquo","":"lsaquo","":"rsaquo",'"':"quot","":"ldquo","":"rdquo","":"bdquo","":"laquo","":"raquo","(":"lpar",")":"rpar","[":"lsqb","]":"rsqb","{":"lcub","}":"rcub","":"lceil","":"rceil","":"lfloor","":"rfloor","":"lopar","":"ropar","":"lbrke","":"rbrke","":"lbrkslu","":"rbrksld","":"lbrksld","":"rbrkslu","":"langd","":"rangd","":"lparlt","":"rpargt","":"gtlPar","":"ltrPar","":"lobrk","":"robrk","":"lang","":"rang","":"Lang","":"Rang","":"loang","":"roang","":"lbbrk","":"rbbrk","":"Vert","":"sect","":"para","@":"commat","*":"ast","/":"sol",undefined:null,"&":"amp","#":"num","%":"percnt","":"permil","":"pertenk","":"dagger","":"Dagger","":"bull","":"hybull","":"prime","":"Prime","":"tprime","":"qprime","":"bprime","":"caret","`":"grave","":"acute","":"tilde","^":"Hat","":"macr","":"breve","":"dot","":"die","":"ring","":"dblac","":"cedil","":"ogon","":"circ","":"caron","":"deg","":"copy","":"reg","":"copysr","":"wp","":"rx","":"mho","":"iiota","":"larr","":"nlarr","":"rarr","":"nrarr","":"uarr","":"darr","":"harr","":"nharr","":"varr","":"nwarr","":"nearr","":"searr","":"swarr","":"rarrw","":"nrarrw","":"Larr","":"Uarr","":"Rarr","":"Darr","":"larrtl","":"rarrtl","":"mapstoleft","":"mapstoup","":"map","":"mapstodown","":"larrhk","":"rarrhk","":"larrlp","":"rarrlp","":"harrw","":"lsh","":"rsh","":"ldsh","":"rdsh","":"crarr","":"cularr","":"curarr","":"olarr","":"orarr","":"lharu","":"lhard","":"uharr","":"uharl","":"rharu","":"rhard","":"dharr","":"dharl","":"rlarr","":"udarr","":"lrarr","":"llarr","":"uuarr","":"rrarr","":"ddarr","":"lrhar","":"rlhar","":"lArr","":"nlArr","":"uArr","":"rArr","":"nrArr","":"dArr","":"iff","":"nhArr","":"vArr","":"nwArr","":"neArr","":"seArr","":"swArr","":"lAarr","":"rAarr","":"zigrarr","":"larrb","":"rarrb","":"duarr","":"loarr","":"roarr","":"hoarr","":"forall","":"comp","":"part","":"npart","":"exist","":"nexist","":"empty","":"Del","":"in","":"notin","":"ni","":"notni","":"bepsi","":"prod","":"coprod","":"sum","+":"plus","":"pm","":"div","":"times","<":"lt","":"nlt","<":"nvlt","=":"equals","":"ne","=":"bne","":"Equal",">":"gt","":"ngt",">":"nvgt","":"not","|":"vert","":"brvbar","":"minus","":"mp","":"plusdo","":"frasl","":"setmn","":"lowast","":"compfn","":"Sqrt","":"prop","":"infin","":"angrt","":"ang","":"nang","":"angmsd","":"angsph","":"mid","":"nmid","":"par","":"npar","":"and","":"or","":"cap","":"caps","":"cup","":"cups","":"int","":"Int","":"tint","":"qint","":"oint","":"Conint","":"Cconint","":"cwint","":"cwconint","":"awconint","":"there4","":"becaus","":"ratio","":"Colon","":"minusd","":"mDDot","":"homtht","":"sim","":"nsim","":"nvsim","":"bsim","":"race","":"ac","":"acE","":"acd","":"wr","":"esim","":"nesim","":"sime","":"nsime","":"cong","":"ncong","":"simne","":"ap","":"nap","":"ape","":"apid","":"napid","":"bcong","":"CupCap","":"NotCupCap","":"nvap","":"bump","":"nbump","":"bumpe","":"nbumpe","":"doteq","":"nedot","":"eDot","":"efDot","":"erDot","":"colone","":"ecolon","":"ecir","":"cire","":"wedgeq","":"veeeq","":"trie","":"equest","":"equiv","":"nequiv","":"bnequiv","":"le","":"nle","":"nvle","":"ge","":"nge","":"nvge","":"lE","":"nlE","":"gE","":"ngE","":"lvnE","":"lnE","":"gnE","":"gvnE","":"ll","":"nLtv","":"nLt","":"gg","":"nGtv","":"nGt","":"twixt","":"lsim","":"nlsim","":"gsim","":"ngsim","":"lg","":"ntlg","":"gl","":"ntgl","":"pr","":"npr","":"sc","":"nsc","":"prcue","":"nprcue","":"sccue","":"nsccue","":"prsim","":"scsim","":"NotSucceedsTilde","":"sub","":"nsub","":"vnsub","":"sup","":"nsup","":"vnsup","":"sube","":"nsube","":"supe","":"nsupe","":"vsubne","":"subne","":"vsupne","":"supne","":"cupdot","":"uplus","":"sqsub","":"NotSquareSubset","":"sqsup","":"NotSquareSuperset","":"sqsube","":"nsqsube","":"sqsupe","":"nsqsupe","":"sqcap","":"sqcaps","":"sqcup","":"sqcups","":"oplus","":"ominus","":"otimes","":"osol","":"odot","":"ocir","":"oast","":"odash","":"plusb","":"minusb","":"timesb","":"sdotb","":"vdash","":"nvdash","":"dashv","":"top","":"bot","":"models","":"vDash","":"nvDash","":"Vdash","":"nVdash","":"Vvdash","":"VDash","":"nVDash","":"prurel","":"vltri","":"nltri","":"vrtri","":"nrtri","":"ltrie","":"nltrie","":"nvltrie","":"rtrie","":"nrtrie","":"nvrtrie","":"origof","":"imof","":"mumap","":"hercon","":"intcal","":"veebar","":"barvee","":"angrtvb","":"lrtri","":"Wedge","":"Vee","":"xcap","":"xcup","":"diam","":"sdot","":"Star","":"divonx","":"bowtie","":"ltimes","":"rtimes","":"lthree","":"rthree","":"bsime","":"cuvee","":"cuwed","":"Sub","":"Sup","":"Cap","":"Cup","":"fork","":"epar","":"ltdot","":"gtdot","":"Ll","":"nLl","":"Gg","":"nGg","":"lesg","":"leg","":"gel","":"gesl","":"cuepr","":"cuesc","":"lnsim","":"gnsim","":"prnsim","":"scnsim","":"vellip","":"ctdot","":"utdot","":"dtdot","":"disin","":"isinsv","":"isins","":"isindot","":"notindot","":"notinvc","":"notinvb","":"isinE","":"notinE","":"nisd","":"xnis","":"nis","":"notnivc","":"notnivb","":"barwed","":"Barwed","":"drcrop","":"dlcrop","":"urcrop","":"ulcrop","":"bnot","":"profline","":"profsurf","":"telrec","":"target","":"ulcorn","":"urcorn","":"dlcorn","":"drcorn","":"frown","":"smile","":"cylcty","":"profalar","":"topbot","":"ovbar","":"solbar","":"angzarr","":"lmoust","":"rmoust","":"tbrk","":"bbrk","":"bbrktbrk","":"OverParenthesis","":"UnderParenthesis","":"OverBrace","":"UnderBrace","":"trpezium","":"elinters","":"blank","":"boxh","":"boxv","":"boxdr","":"boxdl","":"boxur","":"boxul","":"boxvr","":"boxvl","":"boxhd","":"boxhu","":"boxvh","":"boxH","":"boxV","":"boxdR","":"boxDr","":"boxDR","":"boxdL","":"boxDl","":"boxDL","":"boxuR","":"boxUr","":"boxUR","":"boxuL","":"boxUl","":"boxUL","":"boxvR","":"boxVr","":"boxVR","":"boxvL","":"boxVl","":"boxVL","":"boxHd","":"boxhD","":"boxHD","":"boxHu","":"boxhU","":"boxHU","":"boxvH","":"boxVh","":"boxVH","":"uhblk","":"lhblk","":"block","":"blk14","":"blk12","":"blk34","":"squ","":"squf","":"EmptyVerySmallSquare","":"rect","":"marker","":"fltns","":"xutri","":"utrif","":"utri","":"rtrif","":"rtri","":"xdtri","":"dtrif","":"dtri","":"ltrif","":"ltri","":"loz","":"cir","":"tridot","":"xcirc","":"ultri","":"urtri","":"lltri","":"EmptySmallSquare","":"FilledSmallSquare","":"starf","":"star","":"phone","":"female","":"male","":"spades","":"clubs","":"hearts","":"diams","":"sung","":"check","":"cross","":"malt","":"sext","":"VerticalSeparator","":"bsolhsub","":"suphsol","":"xlarr","":"xrarr","":"xharr","":"xlArr","":"xrArr","":"xhArr","":"xmap","":"dzigrarr","":"nvlArr","":"nvrArr","":"nvHarr","":"Map","":"lbarr","":"rbarr","":"lBarr","":"rBarr","":"RBarr","":"DDotrahd","":"UpArrowBar","":"DownArrowBar","":"Rarrtl","":"latail","":"ratail","":"lAtail","":"rAtail","":"larrfs","":"rarrfs","":"larrbfs","":"rarrbfs","":"nwarhk","":"nearhk","":"searhk","":"swarhk","":"nwnear","":"toea","":"tosa","":"swnwar","":"rarrc","":"nrarrc","":"cudarrr","":"ldca","":"rdca","":"cudarrl","":"larrpl","":"curarrm","":"cularrp","":"rarrpl","":"harrcir","":"Uarrocir","":"lurdshar","":"ldrushar","":"LeftRightVector","":"RightUpDownVector","":"DownLeftRightVector","":"LeftUpDownVector","":"LeftVectorBar","":"RightVectorBar","":"RightUpVectorBar","":"RightDownVectorBar","":"DownLeftVectorBar","":"DownRightVectorBar","":"LeftUpVectorBar","":"LeftDownVectorBar","":"LeftTeeVector","":"RightTeeVector","":"RightUpTeeVector","":"RightDownTeeVector","":"DownLeftTeeVector","":"DownRightTeeVector","":"LeftUpTeeVector","":"LeftDownTeeVector","":"lHar","":"uHar","":"rHar","":"dHar","":"luruhar","":"ldrdhar","":"ruluhar","":"rdldhar","":"lharul","":"llhard","":"rharul","":"lrhard","":"udhar","":"duhar","":"RoundImplies","":"erarr","":"simrarr","":"larrsim","":"rarrsim","":"rarrap","":"ltlarr","":"gtrarr","":"subrarr","":"suplarr","":"lfisht","":"rfisht","":"ufisht","":"dfisht","":"vzigzag","":"vangrt","":"angrtvbd","":"ange","":"range","":"dwangle","":"uwangle","":"angmsdaa","":"angmsdab","":"angmsdac","":"angmsdad","":"angmsdae","":"angmsdaf","":"angmsdag","":"angmsdah","":"bemptyv","":"demptyv","":"cemptyv","":"raemptyv","":"laemptyv","":"ohbar","":"omid","":"opar","":"operp","":"olcross","":"odsold","":"olcir","":"ofcir","":"olt","":"ogt","":"cirscir","":"cirE","":"solb","":"bsolb","":"boxbox","":"trisb","":"rtriltri","":"LeftTriangleBar","":"NotLeftTriangleBar","":"RightTriangleBar","":"NotRightTriangleBar","":"iinfin","":"infintie","":"nvinfin","":"eparsl","":"smeparsl","":"eqvparsl","":"lozf","":"RuleDelayed","":"dsol","":"xodot","":"xoplus","":"xotime","":"xuplus","":"xsqcup","":"fpartint","":"cirfnint","":"awint","":"rppolint","":"scpolint","":"npolint","":"pointint","":"quatint","":"intlarhk","":"pluscir","":"plusacir","":"simplus","":"plusdu","":"plussim","":"plustwo","":"mcomma","":"minusdu","":"loplus","":"roplus","":"Cross","":"timesd","":"timesbar","":"smashp","":"lotimes","":"rotimes","":"otimesas","":"Otimes","":"odiv","":"triplus","":"triminus","":"tritime","":"iprod","":"amalg","":"capdot","":"ncup","":"ncap","":"capand","":"cupor","":"cupcap","":"capcup","":"cupbrcap","":"capbrcup","":"cupcup","":"capcap","":"ccups","":"ccaps","":"ccupssm","":"And","":"Or","":"andand","":"oror","":"orslope","":"andslope","":"andv","":"orv","":"andd","":"ord","":"wedbar","":"sdote","":"simdot","":"congdot","":"ncongdot","":"easter","":"apacir","":"apE","":"napE","":"eplus","":"pluse","":"Esim","":"eDDot","":"equivDD","":"ltcir","":"gtcir","":"ltquest","":"gtquest","":"les","":"nles","":"ges","":"nges","":"lesdot","":"gesdot","":"lesdoto","":"gesdoto","":"lesdotor","":"gesdotol","":"lap","":"gap","":"lne","":"gne","":"lnap","":"gnap","":"lEg","":"gEl","":"lsime","":"gsime","":"lsimg","":"gsiml","":"lgE","":"glE","":"lesges","":"gesles","":"els","":"egs","":"elsdot","":"egsdot","":"el","":"eg","":"siml","":"simg","":"simlE","":"simgE","":"LessLess","":"NotNestedLessLess","":"GreaterGreater","":"NotNestedGreaterGreater","":"glj","":"gla","":"ltcc","":"gtcc","":"lescc","":"gescc","":"smt","":"lat","":"smte","":"smtes","":"late","":"lates","":"bumpE","":"pre","":"npre","":"sce","":"nsce","":"prE","":"scE","":"prnE","":"scnE","":"prap","":"scap","":"prnap","":"scnap","":"Pr","":"Sc","":"subdot","":"supdot","":"subplus","":"supplus","":"submult","":"supmult","":"subedot","":"supedot","":"subE","":"nsubE","":"supE","":"nsupE","":"subsim","":"supsim","":"vsubnE","":"subnE","":"vsupnE","":"supnE","":"csub","":"csup","":"csube","":"csupe","":"subsup","":"supsub","":"subsub","":"supsup","":"suphsub","":"supdsub","":"forkv","":"topfork","":"mlcp","":"Dashv","":"Vdashl","":"Barv","":"vBar","":"vBarv","":"Vbar","":"Not","":"bNot","":"rnmid","":"cirmid","":"midcir","":"topcir","":"nhpar","":"parsim","":"parsl","":"nparsl","":"flat","":"natur","":"sharp","":"curren","":"cent",$:"dollar","":"pound","":"yen","":"euro","":"sup1","":"half","":"frac13","":"frac14","":"frac15","":"frac16","":"frac18","":"sup2","":"frac23","":"frac25","":"sup3","":"frac34","":"frac35","":"frac38","":"frac45","":"frac56","":"frac58","":"frac78","":"ascr","":"aopf","":"afr","":"Aopf","":"Afr","":"Ascr","":"ordf","":"aacute","":"Aacute","":"agrave","":"Agrave","":"abreve","":"Abreve","":"acirc","":"Acirc","":"aring","":"angst","":"auml","":"Auml","":"atilde","":"Atilde","":"aogon","":"Aogon","":"amacr","":"Amacr","":"aelig","":"AElig","":"bscr","":"bopf","":"bfr","":"Bopf","":"Bscr","":"Bfr","":"cfr","":"cscr","":"copf","":"Cfr","":"Cscr","":"Copf","":"cacute","":"Cacute","":"ccirc","":"Ccirc","":"ccaron","":"Ccaron","":"cdot","":"Cdot","":"ccedil","":"Ccedil","":"incare","":"dfr","":"dd","":"dopf","":"dscr","":"Dscr","":"Dfr","":"DD","":"Dopf","":"dcaron","":"Dcaron","":"dstrok","":"Dstrok","":"eth","":"ETH","":"ee","":"escr","":"efr","":"eopf","":"Escr","":"Efr","":"Eopf","":"eacute","":"Eacute","":"egrave","":"Egrave","":"ecirc","":"Ecirc","":"ecaron","":"Ecaron","":"euml","":"Euml","":"edot","":"Edot","":"eogon","":"Eogon","":"emacr","":"Emacr","":"ffr","":"fopf","":"fscr","":"Ffr","":"Fopf","":"Fscr","":"fflig","":"ffilig","":"ffllig","":"filig",fj:"fjlig","":"fllig","":"fnof","":"gscr","":"gopf","":"gfr","":"Gscr","":"Gopf","":"Gfr","":"gacute","":"gbreve","":"Gbreve","":"gcirc","":"Gcirc","":"gdot","":"Gdot","":"Gcedil","":"hfr","":"planckh","":"hscr","":"hopf","":"Hscr","":"Hfr","":"Hopf","":"hcirc","":"Hcirc","":"hbar","":"hstrok","":"Hstrok","":"iopf","":"ifr","":"iscr","":"ii","":"Iopf","":"Iscr","":"Im","":"iacute","":"Iacute","":"igrave","":"Igrave","":"icirc","":"Icirc","":"iuml","":"Iuml","":"itilde","":"Itilde","":"Idot","":"iogon","":"Iogon","":"imacr","":"Imacr","":"ijlig","":"IJlig","":"imath","":"jscr","":"jopf","":"jfr","":"Jscr","":"Jfr","":"Jopf","":"jcirc","":"Jcirc","":"jmath","":"kopf","":"kscr","":"kfr","":"Kscr","":"Kopf","":"Kfr","":"kcedil","":"Kcedil","":"lfr","":"lscr","":"ell","":"lopf","":"Lscr","":"Lfr","":"Lopf","":"lacute","":"Lacute","":"lcaron","":"Lcaron","":"lcedil","":"Lcedil","":"lstrok","":"Lstrok","":"lmidot","":"Lmidot","":"mfr","":"mopf","":"mscr","":"Mfr","":"Mopf","":"Mscr","":"nfr","":"nopf","":"nscr","":"Nopf","":"Nscr","":"Nfr","":"nacute","":"Nacute","":"ncaron","":"Ncaron","":"ntilde","":"Ntilde","":"ncedil","":"Ncedil","":"numero","":"eng","":"ENG","":"oopf","":"ofr","":"oscr","":"Oscr","":"Ofr","":"Oopf","":"ordm","":"oacute","":"Oacute","":"ograve","":"Ograve","":"ocirc","":"Ocirc","":"ouml","":"Ouml","":"odblac","":"Odblac","":"otilde","":"Otilde","":"oslash","":"Oslash","":"omacr","":"Omacr","":"oelig","":"OElig","":"pfr","":"pscr","":"popf","":"Popf","":"Pfr","":"Pscr","":"qopf","":"qfr","":"qscr","":"Qscr","":"Qfr","":"Qopf","":"kgreen","":"rfr","":"ropf","":"rscr","":"Rscr","":"Re","":"Ropf","":"racute","":"Racute","":"rcaron","":"Rcaron","":"rcedil","":"Rcedil","":"sopf","":"sscr","":"sfr","":"Sopf","":"Sfr","":"Sscr","":"oS","":"sacute","":"Sacute","":"scirc","":"Scirc","":"scaron","":"Scaron","":"scedil","":"Scedil","":"szlig","":"tfr","":"tscr","":"topf","":"Tscr","":"Tfr","":"Topf","":"tcaron","":"Tcaron","":"tcedil","":"Tcedil","":"trade","":"tstrok","":"Tstrok","":"uscr","":"uopf","":"ufr","":"Uopf","":"Ufr","":"Uscr","":"uacute","":"Uacute","":"ugrave","":"Ugrave","":"ubreve","":"Ubreve","":"ucirc","":"Ucirc","":"uring","":"Uring","":"uuml","":"Uuml","":"udblac","":"Udblac","":"utilde","":"Utilde","":"uogon","":"Uogon","":"umacr","":"Umacr","":"vfr","":"vopf","":"vscr","":"Vfr","":"Vopf","":"Vscr","":"wopf","":"wscr","":"wfr","":"Wscr","":"Wopf","":"Wfr","":"wcirc","":"Wcirc","":"xfr","":"xscr","":"xopf","":"Xopf","":"Xfr","":"Xscr","":"yfr","":"yscr","":"yopf","":"Yscr","":"Yfr","":"Yopf","":"yacute","":"Yacute","":"ycirc","":"Ycirc","":"yuml","":"Yuml","":"zscr","":"zfr","":"zopf","":"Zfr","":"Zopf","":"Zscr","":"zacute","":"Zacute","":"zcaron","":"Zcaron","":"zdot","":"Zdot","":"imped","":"thorn","":"THORN","":"napos","":"alpha","":"Alpha","":"beta","":"Beta","":"gamma","":"Gamma","":"delta","":"Delta","":"epsi","":"epsiv","":"Epsilon","":"gammad","":"Gammad","":"zeta","":"Zeta","":"eta","":"Eta","":"theta","":"thetav","":"Theta","":"iota","":"Iota","":"kappa","":"kappav","":"Kappa","":"lambda","":"Lambda","":"mu","":"micro","":"Mu","":"nu","":"Nu","":"xi","":"Xi","":"omicron","":"Omicron","":"pi","":"piv","":"Pi","":"rho","":"rhov","":"Rho","":"sigma","":"Sigma","":"sigmaf","":"tau","":"Tau","":"upsi","":"Upsilon","":"Upsi","":"phi","":"phiv","":"Phi","":"chi","":"Chi","":"psi","":"Psi","":"omega","":"ohm","":"acy","":"Acy","":"bcy","":"Bcy","":"vcy","":"Vcy","":"gcy","":"Gcy","":"gjcy","":"GJcy","":"dcy","":"Dcy","":"djcy","":"DJcy","":"iecy","":"IEcy","":"iocy","":"IOcy","":"jukcy","":"Jukcy","":"zhcy","":"ZHcy","":"zcy","":"Zcy","":"dscy","":"DScy","":"icy","":"Icy","":"iukcy","":"Iukcy","":"yicy","":"YIcy","":"jcy","":"Jcy","":"jsercy","":"Jsercy","":"kcy","":"Kcy","":"kjcy","":"KJcy","":"lcy","":"Lcy","":"ljcy","":"LJcy","":"mcy","":"Mcy","":"ncy","":"Ncy","":"njcy","":"NJcy","":"ocy","":"Ocy","":"pcy","":"Pcy","":"rcy","":"Rcy","":"scy","":"Scy","":"tcy","":"Tcy","":"tshcy","":"TSHcy","":"ucy","":"Ucy","":"ubrcy","":"Ubrcy","":"fcy","":"Fcy","":"khcy","":"KHcy","":"tscy","":"TScy","":"chcy","":"CHcy","":"dzcy","":"DZcy","":"shcy","":"SHcy","":"shchcy","":"SHCHcy","":"hardcy","":"HARDcy","":"ycy","":"Ycy","":"softcy","":"SOFTcy","":"ecy","":"Ecy","":"yucy","":"YUcy","":"yacy","":"YAcy","":"aleph","":"beth","":"gimel","":"daleth"},y=/["&'<>`]/g,i={'"':"&quot;","&":"&amp;","'":"&#x27;","<":"&lt;",">":"&gt;","`":"&#x60;"},a=/&#(?:[xX][^a-fA-F0-9]|[^0-9xX])/,v=/[\0-\x08\x0B\x0E-\x1F\x7F-\x9F\uFDD0-\uFDEF\uFFFE\uFFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDFFE\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,b=/&#([0-9]+)(;?)|&#[xX]([a-fA-F0-9]+)(;?)|&([0-9a-zA-Z]+);|&(Aacute|Agrave|Atilde|Ccedil|Eacute|Egrave|Iacute|Igrave|Ntilde|Oacute|Ograve|Oslash|Otilde|Uacute|Ugrave|Yacute|aacute|agrave|atilde|brvbar|ccedil|curren|divide|eacute|egrave|frac12|frac14|frac34|iacute|igrave|iquest|middot|ntilde|oacute|ograve|oslash|otilde|plusmn|uacute|ugrave|yacute|AElig|Acirc|Aring|Ecirc|Icirc|Ocirc|THORN|Ucirc|acirc|acute|aelig|aring|cedil|ecirc|icirc|iexcl|laquo|micro|ocirc|pound|raquo|szlig|thorn|times|ucirc|Auml|COPY|Euml|Iuml|Ouml|QUOT|Uuml|auml|cent|copy|euml|iuml|macr|nbsp|ordf|ordm|ouml|para|quot|sect|sup1|sup2|sup3|uuml|yuml|AMP|ETH|REG|amp|deg|eth|not|reg|shy|uml|yen|GT|LT|gt|lt)([=a-zA-Z0-9])?/g,w={aacute:"",Aacute:"",abreve:"",Abreve:"",ac:"",acd:"",acE:"",acirc:"",Acirc:"",acute:"",acy:"",Acy:"",aelig:"",AElig:"",af:"",afr:"",Afr:"",agrave:"",Agrave:"",alefsym:"",aleph:"",alpha:"",Alpha:"",amacr:"",Amacr:"",amalg:"",amp:"&",AMP:"&",and:"",And:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",aogon:"",Aogon:"",aopf:"",Aopf:"",ap:"",apacir:"",ape:"",apE:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",aring:"",Aring:"",ascr:"",Ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",atilde:"",Atilde:"",auml:"",Auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",barwed:"",Barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",bcy:"",Bcy:"",bdquo:"",becaus:"",because:"",Because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",beta:"",Beta:"",beth:"",between:"",bfr:"",Bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bnot:"",bNot:"",bopf:"",Bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxdl:"",boxdL:"",boxDl:"",boxDL:"",boxdr:"",boxdR:"",boxDr:"",boxDR:"",boxh:"",boxH:"",boxhd:"",boxhD:"",boxHd:"",boxHD:"",boxhu:"",boxhU:"",boxHu:"",boxHU:"",boxminus:"",boxplus:"",boxtimes:"",boxul:"",boxuL:"",boxUl:"",boxUL:"",boxur:"",boxuR:"",boxUr:"",boxUR:"",boxv:"",boxV:"",boxvh:"",boxvH:"",boxVh:"",boxVH:"",boxvl:"",boxvL:"",boxVl:"",boxVL:"",boxvr:"",boxvR:"",boxVr:"",boxVR:"",bprime:"",breve:"",Breve:"",brvbar:"",bscr:"",Bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpe:"",bumpE:"",bumpeq:"",Bumpeq:"",cacute:"",Cacute:"",cap:"",Cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",ccaron:"",Ccaron:"",ccedil:"",Ccedil:"",ccirc:"",Ccirc:"",Cconint:"",ccups:"",ccupssm:"",cdot:"",Cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",centerdot:"",CenterDot:"",cfr:"",Cfr:"",chcy:"",CHcy:"",check:"",checkmark:"",chi:"",Chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cire:"",cirE:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",colon:":",Colon:"",colone:"",Colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",conint:"",Conint:"",ContourIntegral:"",copf:"",Copf:"",coprod:"",Coproduct:"",copy:"",COPY:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",cross:"",Cross:"",cscr:"",Cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",cup:"",Cup:"",cupbrcap:"",cupcap:"",CupCap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",dagger:"",Dagger:"",daleth:"",darr:"",dArr:"",Darr:"",dash:"",dashv:"",Dashv:"",dbkarow:"",dblac:"",dcaron:"",Dcaron:"",dcy:"",Dcy:"",dd:"",DD:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",delta:"",Delta:"",demptyv:"",dfisht:"",dfr:"",Dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",diamond:"",Diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",djcy:"",DJcy:"",dlcorn:"",dlcrop:"",dollar:"$",dopf:"",Dopf:"",dot:"",Dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",downarrow:"",Downarrow:"",DownArrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",dscr:"",Dscr:"",dscy:"",DScy:"",dsol:"",dstrok:"",Dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",dzcy:"",DZcy:"",dzigrarr:"",eacute:"",Eacute:"",easter:"",ecaron:"",Ecaron:"",ecir:"",ecirc:"",Ecirc:"",ecolon:"",ecy:"",Ecy:"",eDDot:"",edot:"",eDot:"",Edot:"",ee:"",efDot:"",efr:"",Efr:"",eg:"",egrave:"",Egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",emacr:"",Emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",eng:"",ENG:"",ensp:"",eogon:"",Eogon:"",eopf:"",Eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",epsilon:"",Epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",escr:"",Escr:"",esdot:"",esim:"",Esim:"",eta:"",Eta:"",eth:"",ETH:"",euml:"",Euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",exponentiale:"",ExponentialE:"",fallingdotseq:"",fcy:"",Fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",ffr:"",Ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",fopf:"",Fopf:"",forall:"",ForAll:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",fscr:"",Fscr:"",gacute:"",gamma:"",Gamma:"",gammad:"",Gammad:"",gap:"",gbreve:"",Gbreve:"",Gcedil:"",gcirc:"",Gcirc:"",gcy:"",Gcy:"",gdot:"",Gdot:"",ge:"",gE:"",gel:"",gEl:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",gfr:"",Gfr:"",gg:"",Gg:"",ggg:"",gimel:"",gjcy:"",GJcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gne:"",gnE:"",gneq:"",gneqq:"",gnsim:"",gopf:"",Gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",gscr:"",Gscr:"",gsim:"",gsime:"",gsiml:"",gt:">",Gt:"",GT:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",hardcy:"",HARDcy:"",harr:"",hArr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",hcirc:"",Hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",hfr:"",Hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",hopf:"",Hopf:"",horbar:"",HorizontalLine:"",hscr:"",Hscr:"",hslash:"",hstrok:"",Hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",iacute:"",Iacute:"",ic:"",icirc:"",Icirc:"",icy:"",Icy:"",Idot:"",iecy:"",IEcy:"",iexcl:"",iff:"",ifr:"",Ifr:"",igrave:"",Igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",ijlig:"",IJlig:"",Im:"",imacr:"",Imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",int:"",Int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",iocy:"",IOcy:"",iogon:"",Iogon:"",iopf:"",Iopf:"",iota:"",Iota:"",iprod:"",iquest:"",iscr:"",Iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",itilde:"",Itilde:"",iukcy:"",Iukcy:"",iuml:"",Iuml:"",jcirc:"",Jcirc:"",jcy:"",Jcy:"",jfr:"",Jfr:"",jmath:"",jopf:"",Jopf:"",jscr:"",Jscr:"",jsercy:"",Jsercy:"",jukcy:"",Jukcy:"",kappa:"",Kappa:"",kappav:"",kcedil:"",Kcedil:"",kcy:"",Kcy:"",kfr:"",Kfr:"",kgreen:"",khcy:"",KHcy:"",kjcy:"",KJcy:"",kopf:"",Kopf:"",kscr:"",Kscr:"",lAarr:"",lacute:"",Lacute:"",laemptyv:"",lagran:"",lambda:"",Lambda:"",lang:"",Lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",larr:"",lArr:"",Larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",latail:"",lAtail:"",late:"",lates:"",lbarr:"",lBarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",lcaron:"",Lcaron:"",lcedil:"",Lcedil:"",lceil:"",lcub:"{",lcy:"",Lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",le:"",lE:"",LeftAngleBracket:"",leftarrow:"",Leftarrow:"",LeftArrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",leftrightarrow:"",Leftrightarrow:"",LeftRightArrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",leg:"",lEg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",lfr:"",Lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",ljcy:"",LJcy:"",ll:"",Ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",lmidot:"",Lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lne:"",lnE:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",longleftarrow:"",Longleftarrow:"",LongLeftArrow:"",longleftrightarrow:"",Longleftrightarrow:"",LongLeftRightArrow:"",longmapsto:"",longrightarrow:"",Longrightarrow:"",LongRightArrow:"",looparrowleft:"",looparrowright:"",lopar:"",lopf:"",Lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",lscr:"",Lscr:"",lsh:"",Lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",lstrok:"",Lstrok:"",lt:"<",Lt:"",LT:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",map:"",Map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",mcy:"",Mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",mfr:"",Mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",mopf:"",Mopf:"",mp:"",mscr:"",Mscr:"",mstpos:"",mu:"",Mu:"",multimap:"",mumap:"",nabla:"",nacute:"",Nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",ncaron:"",Ncaron:"",ncedil:"",Ncedil:"",ncong:"",ncongdot:"",ncup:"",ncy:"",Ncy:"",ndash:"",ne:"",nearhk:"",nearr:"",neArr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:"\n",nexist:"",nexists:"",nfr:"",Nfr:"",nge:"",ngE:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",ngt:"",nGt:"",ngtr:"",nGtv:"",nharr:"",nhArr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",njcy:"",NJcy:"",nlarr:"",nlArr:"",nldr:"",nle:"",nlE:"",nleftarrow:"",nLeftarrow:"",nleftrightarrow:"",nLeftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nlt:"",nLt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",nopf:"",Nopf:"",not:"",Not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrarr:"",nrArr:"",nrarrc:"",nrarrw:"",nrightarrow:"",nRightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",nscr:"",Nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsube:"",nsubE:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupe:"",nsupE:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",ntilde:"",Ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",nu:"",Nu:"",num:"#",numero:"",numsp:"",nvap:"",nvdash:"",nvDash:"",nVdash:"",nVDash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwarr:"",nwArr:"",nwarrow:"",nwnear:"",oacute:"",Oacute:"",oast:"",ocir:"",ocirc:"",Ocirc:"",ocy:"",Ocy:"",odash:"",odblac:"",Odblac:"",odiv:"",odot:"",odsold:"",oelig:"",OElig:"",ofcir:"",ofr:"",Ofr:"",ogon:"",ograve:"",Ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",omacr:"",Omacr:"",omega:"",Omega:"",omicron:"",Omicron:"",omid:"",ominus:"",oopf:"",Oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",or:"",Or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",oscr:"",Oscr:"",oslash:"",Oslash:"",osol:"",otilde:"",Otilde:"",otimes:"",Otimes:"",otimesas:"",ouml:"",Ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",pcy:"",Pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",pfr:"",Pfr:"",phi:"",Phi:"",phiv:"",phmmat:"",phone:"",pi:"",Pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",popf:"",Popf:"",pound:"",pr:"",Pr:"",prap:"",prcue:"",pre:"",prE:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",prime:"",Prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",pscr:"",Pscr:"",psi:"",Psi:"",puncsp:"",qfr:"",Qfr:"",qint:"",qopf:"",Qopf:"",qprime:"",qscr:"",Qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",quot:'"',QUOT:'"',rAarr:"",race:"",racute:"",Racute:"",radic:"",raemptyv:"",rang:"",Rang:"",rangd:"",range:"",rangle:"",raquo:"",rarr:"",rArr:"",Rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",rarrtl:"",Rarrtl:"",rarrw:"",ratail:"",rAtail:"",ratio:"",rationals:"",rbarr:"",rBarr:"",RBarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",rcaron:"",Rcaron:"",rcedil:"",Rcedil:"",rceil:"",rcub:"}",rcy:"",Rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",reg:"",REG:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",rfr:"",Rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",rho:"",Rho:"",rhov:"",RightAngleBracket:"",rightarrow:"",Rightarrow:"",RightArrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",ropf:"",Ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",rscr:"",Rscr:"",rsh:"",Rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",sacute:"",Sacute:"",sbquo:"",sc:"",Sc:"",scap:"",scaron:"",Scaron:"",sccue:"",sce:"",scE:"",scedil:"",Scedil:"",scirc:"",Scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",scy:"",Scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",searr:"",seArr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",sfr:"",Sfr:"",sfrown:"",sharp:"",shchcy:"",SHCHcy:"",shcy:"",SHcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",sigma:"",Sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",softcy:"",SOFTcy:"",sol:"/",solb:"",solbar:"",sopf:"",Sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",square:"",Square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",sscr:"",Sscr:"",ssetmn:"",ssmile:"",sstarf:"",star:"",Star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",sub:"",Sub:"",subdot:"",sube:"",subE:"",subedot:"",submult:"",subne:"",subnE:"",subplus:"",subrarr:"",subset:"",Subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",sum:"",Sum:"",sung:"",sup:"",Sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supe:"",supE:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supne:"",supnE:"",supplus:"",supset:"",Supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swarr:"",swArr:"",swarrow:"",swnwar:"",szlig:"",Tab:"\t",target:"",tau:"",Tau:"",tbrk:"",tcaron:"",Tcaron:"",tcedil:"",Tcedil:"",tcy:"",Tcy:"",tdot:"",telrec:"",tfr:"",Tfr:"",there4:"",therefore:"",Therefore:"",theta:"",Theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",thorn:"",THORN:"",tilde:"",Tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",topf:"",Topf:"",topfork:"",tosa:"",tprime:"",trade:"",TRADE:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",tscr:"",Tscr:"",tscy:"",TScy:"",tshcy:"",TSHcy:"",tstrok:"",Tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",uacute:"",Uacute:"",uarr:"",uArr:"",Uarr:"",Uarrocir:"",ubrcy:"",Ubrcy:"",ubreve:"",Ubreve:"",ucirc:"",Ucirc:"",ucy:"",Ucy:"",udarr:"",udblac:"",Udblac:"",udhar:"",ufisht:"",ufr:"",Ufr:"",ugrave:"",Ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",umacr:"",Umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",uogon:"",Uogon:"",uopf:"",Uopf:"",uparrow:"",Uparrow:"",UpArrow:"",UpArrowBar:"",UpArrowDownArrow:"",updownarrow:"",Updownarrow:"",UpDownArrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",upsi:"",Upsi:"",upsih:"",upsilon:"",Upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",uring:"",Uring:"",urtri:"",uscr:"",Uscr:"",utdot:"",utilde:"",Utilde:"",utri:"",utrif:"",uuarr:"",uuml:"",Uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",varr:"",vArr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",vBar:"",Vbar:"",vBarv:"",vcy:"",Vcy:"",vdash:"",vDash:"",Vdash:"",VDash:"",Vdashl:"",vee:"",Vee:"",veebar:"",veeeq:"",vellip:"",verbar:"|",Verbar:"",vert:"|",Vert:"",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",vfr:"",Vfr:"",vltri:"",vnsub:"",vnsup:"",vopf:"",Vopf:"",vprop:"",vrtri:"",vscr:"",Vscr:"",vsubne:"",vsubnE:"",vsupne:"",vsupnE:"",Vvdash:"",vzigzag:"",wcirc:"",Wcirc:"",wedbar:"",wedge:"",Wedge:"",wedgeq:"",weierp:"",wfr:"",Wfr:"",wopf:"",Wopf:"",wp:"",wr:"",wreath:"",wscr:"",Wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",xfr:"",Xfr:"",xharr:"",xhArr:"",xi:"",Xi:"",xlarr:"",xlArr:"",xmap:"",xnis:"",xodot:"",xopf:"",Xopf:"",xoplus:"",xotime:"",xrarr:"",xrArr:"",xscr:"",Xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",yacute:"",Yacute:"",yacy:"",YAcy:"",ycirc:"",Ycirc:"",ycy:"",Ycy:"",yen:"",yfr:"",Yfr:"",yicy:"",YIcy:"",yopf:"",Yopf:"",yscr:"",Yscr:"",yucy:"",YUcy:"",yuml:"",Yuml:"",zacute:"",Zacute:"",zcaron:"",Zcaron:"",zcy:"",Zcy:"",zdot:"",Zdot:"",zeetrf:"",ZeroWidthSpace:"",zeta:"",Zeta:"",zfr:"",Zfr:"",zhcy:"",ZHcy:"",zigrarr:"",zopf:"",Zopf:"",zscr:"",Zscr:"",zwj:"",zwnj:""},S={aacute:"",Aacute:"",acirc:"",Acirc:"",acute:"",aelig:"",AElig:"",agrave:"",Agrave:"",amp:"&",AMP:"&",aring:"",Aring:"",atilde:"",Atilde:"",auml:"",Auml:"",brvbar:"",ccedil:"",Ccedil:"",cedil:"",cent:"",copy:"",COPY:"",curren:"",deg:"",divide:"",eacute:"",Eacute:"",ecirc:"",Ecirc:"",egrave:"",Egrave:"",eth:"",ETH:"",euml:"",Euml:"",frac12:"",frac14:"",frac34:"",gt:">",GT:">",iacute:"",Iacute:"",icirc:"",Icirc:"",iexcl:"",igrave:"",Igrave:"",iquest:"",iuml:"",Iuml:"",laquo:"",lt:"<",LT:"<",macr:"",micro:"",middot:"",nbsp:"",not:"",ntilde:"",Ntilde:"",oacute:"",Oacute:"",ocirc:"",Ocirc:"",ograve:"",Ograve:"",ordf:"",ordm:"",oslash:"",Oslash:"",otilde:"",Otilde:"",ouml:"",Ouml:"",para:"",plusmn:"",pound:"",quot:'"',QUOT:'"',raquo:"",reg:"",REG:"",sect:"",shy:"",sup1:"",sup2:"",sup3:"",szlig:"",thorn:"",THORN:"",times:"",uacute:"",Uacute:"",ucirc:"",Ucirc:"",ugrave:"",Ugrave:"",uml:"",uuml:"",Uuml:"",yacute:"",Yacute:"",yen:"",yuml:""},x={0:"",128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""},A=[1,2,3,4,5,6,7,8,11,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,64976,64977,64978,64979,64980,64981,64982,64983,64984,64985,64986,64987,64988,64989,64990,64991,64992,64993,64994,64995,64996,64997,64998,64999,65e3,65001,65002,65003,65004,65005,65006,65007,65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111],E=String.fromCharCode,k={}.hasOwnProperty,D=function(e,t){return k.call(e,t)},T=function(e,t){for(var r=-1,n=e.length;++r<n;)if(e[r]==t)return!0;return!1},I=function(e){throw Error("Parse error: "+e)},C=(n.options={isAttributeValue:!(l.options={allowUnsafeSymbols:!1,encodeEverything:!1,strict:!1,useNamedReferences:!1,decimal:!1}),strict:!1},{version:"1.1.1",encode:l,decode:n,escape:function(e){return e.replace(y,function(e){return i[e]})},unescape:n});if(o&&!o.nodeType)if(t)t.exports=C;else for(var P in C)D(C,P)&&(o[P]=C[P]);else r.he=C}),Jr={OPENING:1,CLOSING:2,SELF:3,CDATA:4},Qr={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,decodeHTMLchar:!1,cdataTagName:!1,cdataPositionChar:"\\c"};function Zr(e,t){return e&&(t.trimValues&&(e=e.trim()),e=$r(e=t.decodeHTMLchar?Yr.decode(e):e,t.parseNodeValue)),e}function $r(e,t){return t&&"string"==typeof e?""===e.trim()||isNaN(e)?"true"===e||"false"!==e&&e:-1!==e.indexOf(".")?Number.parseFloat(e):Number.parseInt(e,10):T.isExist(e)?e:""}var Xr=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function en(e,t){if(!t.ignoreAttributes&&"string"==typeof e){e=e.replace(/\r?\n/g," ");for(var r=T.getAllMatches(e,Xr),n=r.length,o={},i=0;i<n;i++){var a=function(e,t){if(t.ignoreNameSpace){var t=e.split(":"),r="/"===e.charAt(0)?"/":"";if("xmlns"===t[0])return"";2===t.length&&(e=r+t[1])}return e}(r[i][1],t);a.length&&(void 0!==r[i][4]?(t.trimValues&&(r[i][4]=r[i][4].trim()),t.decodeHTMLchar&&(r[i][4]=Yr.decode(r[i][4],{isAttributeValue:!0})),o[t.attributeNamePrefix+a]=$r(r[i][4],t.parseAttributeValue)):t.allowBooleanAttributes&&(o[t.attributeNamePrefix+a]=!0))}if(Object.keys(o).length)return t.attrNodeName?((e={})[t.attrNodeName]=o,e):o}}var tn=function(e,t){for(var r={},n=0;n<e.child.length;n++){var o,i=e.child[n].tagname,a=tn(e.child[n],t);void 0!==r[i]?(Array.isArray(r[i])||(o=r[i],r[i]=[],r[i].push(o)),r[i].push(a)):r[i]=t.arrayMode?[a]:a}return T.merge(r,e.attrsMap),T.isEmptyObject(r)?T.isExist(e.val)?e.val:"":(T.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==t.cdataPositionChar)&&(r[t.textNodeName]=e.val),r)},rn={parse:function(e,t){return t=Object.assign({},Qr,t),tn(Wr(e,t),t)},getTraversalObj:Wr,convertToJson:tn}.parse;function nn(e,t){return We(e,P(P({},t),{fileName:"metadata/metadata.xml"})).then(function(e){return rn(e,{ignoreAttributes:!1,attributeNamePrefix:"@_",textNodeName:"#value"})}).catch(function(){return null})}function on(e,t,r){var n=t.data,o=t.stack,t=t.requestOptions;return o.finish(r,{error:e}),{data:P(P({},n),{errors:cn(e,n.errors)}),stack:o,requestOptions:t}}function an(e,t,r){return t=t.reduce(function(e,t){t=un[t];return t&&e.push(t),e},[]),le(t)({data:{item:e},stack:new Br,requestOptions:r}).then(function(e){return e.data})}var sn,un={groupIds:function(t){var e,r=t.data,n=t.stack,o=t.requestOptions,i=n.start("enrichGroupIds");return e=r.item.id,v(Ke(e,e=o)+"/groups",e).then(function(e){e=h(e.admin,e.member,e.other).map(function(e){return e.id});return n.finish(i),{data:P(P({},r),{groupIds:e}),stack:n,requestOptions:o}}).catch(function(e){return on(e,t,i)})},metadata:function(e){var t=e.data,r=e.stack,n=e.requestOptions,o=r.start("enrichMetadata");return nn(t.item.id,n).then(function(e){return r.finish(o),{data:P(P({},t),{metadata:e}),stack:r,requestOptions:n}})},ownerUser:function(t){var r=t.data,n=t.stack,o=t.requestOptions,i=n.start("enrichOwner");return pt(P({username:r.item.owner},o)).then(function(e){return n.finish(i),{data:P(P({},r),{ownerUser:e}),stack:n,requestOptions:o}}).catch(function(e){return on(e,t,i)})},data:function(t){var r=t.data,n=t.stack,o=t.requestOptions,i=n.start("enrichData");return Ve(r.item.id,o).then(function(e){return n.finish(i),{data:P(P({},r),{data:e}),stack:n,requestOptions:o}}).catch(function(e){return on(e,t,i)})},server:function(t){var r=t.data,n=t.stack,o=t.requestOptions,i=n.start("enrichServer"),e=r.item.url,e=P(P({},o),{url:e});return v(b((e=e).url),e).then(function(e){return n.finish(i),{data:P(P({},r),{server:e}),stack:n,requestOptions:o}}).catch(function(e){return on(e,t,i)})},layers:function(t){var e,r,n=t.data,o=t.stack,i=t.requestOptions,a=o.start("enrichLayers"),s=n.item.url,s=P(P({},i),{url:s});return r=(e=s).url,e=ue(s,["url"]),v(Zt(r)+"/layers",e).then(function(e){return h(e.layers,e.tables).filter(function(e){return"Group Layer"!==e.type})}).then(function(e){return o.finish(a),{data:P(P({},n),{layers:e}),stack:o,requestOptions:i}}).catch(function(e){return on(e,t,a)})}},cn=function(e,t){return h(t=void 0===t?[]:t,[{type:"Other",message:"string"==typeof e?e:e.message}])},ln=function(e){e=[].concat.apply([],e.filter(Array.isArray));return e.length?e:void 0},pn=(ae(dn,sn=Error),dn);function dn(e,t,r){e=sn.call(this,e)||this;return e.status=r,e.url=t,e}function fn(e,t){var r,n,t=P({httpMethod:"GET"},t),o=t.fetch||fetch,i=P({"Content-Type":"application/json"},t.headers),a=("GET"===t.httpMethod?r=t.params:n=JSON.stringify(t.params),Le({host:Ut(t),path:("/api/v3/"+e).replace(/\/\//g,"/"),query:r}));return o(a,{method:t.httpMethod,headers:i,body:n}).then(function(e){if(e.ok)return e.json();throw new pn(e.statusText,a,e.status)})}function mn(e){var t=["groupIds","metadata","ownerUser","org"];return function(e){e=qr(e);return d(["template","solution"],or(e))||d(["Web Map","Web Scene"],e)}(e)&&t.push("data"),qt(e.url)?t.concat("server","layers"):t}function hn(e,t){return(e=l(e)).params=P(P({},e.params),{"fields[datasets]":"slug,boundary,extent,searchDescription,statistics"}),t&&(e.params["filter[slug]"]=t),e}function gn(e){var t=(r=Rr(e.id)).itemId,r=(r=r.layerId)&&parseInt(r,10),e=e.attributes;return{itemId:t,layerId:r,slug:e.slug,boundary:e.boundary,extent:e.extent,searchDescription:e.searchDescription,statistics:e.statistics}}function yn(u,c){return f(void 0,void 0,void 0,function(){var r,n,o,i,a,s;return m(this,function(e){switch(e.label){case 0:return(r=u.item,n=u.data,o=u.layers,!(i=o&&Mr(r,o,c&&c.layerId))||i.type)?[3,2]:(a=Zt(r.url)+"/"+i.id,a=Object.assign({url:a},c),[4,v(b((t=a).url),t)]);case 1:i=e.sent(),o=o.map(function(e){return e.id===i.id?i:e}),e.label=2;case 2:return i&&Lr(i)&&!n?[4,an(r,["data"],c)]:[3,4];case 3:return s=e.sent(),[3,5];case 4:s=void 0,e.label=5;case 5:return a=s,[2,P(P(P({},u),a),{errors:ln([u.errors,null==a?void 0:a.errors]),layers:o})]}var t})})}function vn(i,a){return f(void 0,void 0,void 0,function(){var n,o;return m(this,function(e){switch(e.label){case 0:n=i.url,o=i.viewDefinition,o=null==o?void 0:o.definitionExpression,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,(t=P(P({},a),{url:n,where:o,returnCountOnly:!0}),r=Ee(t,["where","objectIds","relationParam","time","distance","units","outFields","geometry","geometryType","spatialRel","returnGeometry","maxAllowableOffset","geometryPrecision","inSR","outSR","gdbVersion","returnDistinctValues","returnIdsOnly","returnCountOnly","returnExtentOnly","orderByFields","groupByFieldsForStatistics","outStatistics","returnZ","returnM","multipatchOption","resultOffset","resultRecordCount","quantizationParameters","returnCentroid","resultType","historicMoment","returnTrueCurves","sqlFormat","returnExceededLimitFeatures","f"],{httpMethod:"GET",params:P({where:"1=1",outFields:"*"},t.params)}),v(b(t.url)+"/query",r))];case 2:return[2,e.sent().count];case 3:return e.sent(),[2,1/0];case 4:return[2]}var t,r})})}var bn=function(r,n){return f(void 0,void 0,void 0,function(){var t;return m(this,function(e){switch(e.label){case 0:return[4,fn("/datasets",hn(n,r))];case 1:return t=e.sent(),[2,gn(t.data[0])]}})})},wn=function(r,n){return f(void 0,void 0,void 0,function(){var t;return m(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,fn("/datasets/"+r,hn(n))];case 1:return t=e.sent(),[2,gn(t.data)];case 2:return t=e.sent(),[2,{errors:cn(t)}];case 3:return[2]}})})},Sn=function(n,o){return f(void 0,void 0,void 0,function(){var t,r;return m(this,function(e){switch(e.label){case 0:return[4,Be(n,o)];case 1:return(t=e.sent()).url=Ar(t,o)||t.url,r=(null==o?void 0:o.enrichments)||mn(t),[4,an(t,r,o)];case 2:return r=e.sent(),[2,yn(P(P({},r),{item:t}),o)]}})})};function xn(e){void 0===e&&(e=""),console.warn("DEPRECATED: Use getCollection() instead. getCategory will be removed at v10.0.0");e=jt(e);return"feedback"===e?"app":e}function An(t,e){return d(["template","feedback"],t.family)?t.id:cr(t.type)?(r=(C(e,"data.values.pages")||[]).find(function(e){return e.id===t.id}))?r.slug:t.id:t.slug?(r=C(e,"domainInfo.orgKey"),C(e,"data.values.isUmbrella")?t.slug:_r(t.slug,r)):t.hubId||t.id;var r}function En(e){return Nr(e)}function kn(e){if(e){var t,r,n,o,i,a,s,u,c,l,p,d,f,m,h,g,y,v,b,w,S,x,A,E,k,D,T,I,C,P,q,O,F,U,L,N,R,G,j,_,B,K,M=e.id,e=e.attributes;if(e)return M=Rr(M).itemId,t=e.owner,r=e.orgId,n=e.created,o=e.modified,i=e.name,a=e.title,s=e.type,u=e.typeKeywords,c=e.description,l=e.snippet,p=e.tags,d=e.thumbnail,f=e.categories,m=e.contentStatus,h=e.spatialReference,g=e.accessInformation,y=e.licenseInfo,v=e.culture,b=e.url,w=e.access,S=e.proxyFilter,x=e.properties,A=e.appCategories,E=e.industries,k=e.languages,D=e.largeThumbnail,T=e.banner,I=e.screenshots,C=e.listed,P=e.ownerFolder,q=e.size,O=e.protected,F=e.commentsEnabled,U=e.numComments,L=e.numRatings,N=e.avgRating,R=e.numViews,G=e.itemControl,j=e.scoreCompleteness,_=e.itemExtent,B=e.itemModified,K=e.modifiedProvenance,e=e.serviceSpatialReference,{id:M,owner:t,orgId:r,created:n,modified:B||"item.modified"===K&&o,title:a||i,type:b&&Ft(b)||s,typeKeywords:u,description:c,tags:p,snippet:l,thumbnail:d,extent:_||[],categories:f,contentStatus:m,spatialReference:h||e,accessInformation:g,licenseInfo:y,culture:v,url:b,access:w,size:q,protected:O,proxyFilter:S,properties:x,appCategories:A,industries:E,languages:k,largeThumbnail:D,banner:T,screenshots:I,listed:C,ownerFolder:P,commentsEnabled:F,numComments:U,numRatings:L,avgRating:N,numViews:R,itemControl:G,scoreCompleteness:j}}}function Dn(e,t){return t?"CSV":W(e||"")}function Tn(e,t){var r=An(e,t);return{relative:e=Cn(e,r),absolute:""+C(t,"item.url").replace(/\/$/,"")+e}}function In(e,t){return t=P(P({},e.urls),t),P(P({},e),{urls:t})}function Cn(e,t){return ur(e.type,t||e.identifier,e.typeKeywords)}var Pn=function(e,t){var t=Tn(e,t),r=t.relative,t=t.absolute;return In(e,{relative:r,site:t})};const qn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";const On="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var Fn={atob:function(t){if((t=(t=(t=""+t).replace(/[ \t\n\f\r]/g,"")).length%4==0?t.replace(/==?$/,""):t).length%4==1||/[^+/0-9A-Za-z]/.test(t))return null;let r="",n=0,o=0;for(let e=0;e<t.length;e++)n=(n<<=6)|function(e){e=qn.indexOf(e);return e<0?void 0:e}(t[e]),24===(o+=6)&&(r=(r=(r+=String.fromCharCode((16711680&n)>>16))+String.fromCharCode((65280&n)>>8))+String.fromCharCode(255&n),n=o=0);return 12===o?(n>>=4,r+=String.fromCharCode(n)):18===o&&(n>>=2,r=(r+=String.fromCharCode((65280&n)>>8))+String.fromCharCode(255&n)),r},btoa:function(e){let t;for(e=""+e,t=0;t<e.length;t++)if(255<e.charCodeAt(t))return null;let r="";for(t=0;t<e.length;t+=3){const n=[void 0,void 0,void 0,void 0];n[0]=e.charCodeAt(t)>>2,n[1]=(3&e.charCodeAt(t))<<4,e.length>t+1&&(n[1]|=e.charCodeAt(t+1)>>4,n[2]=(15&e.charCodeAt(t+1))<<2),e.length>t+2&&(n[2]|=e.charCodeAt(t+2)>>6,n[3]=63&e.charCodeAt(t+2));for(let e=0;e<n.length;e++)void 0===n[e]?r+="=":r+=function(e){if(0<=e&&e<64)return On[e];return}(n[e])}return r}},Un="4326",Mn={csv:{name:"CSV",itemTypes:["CSV","CSV Collection"],supportsProjection:!0},kml:{name:"KML",itemTypes:["KML","KML Collection"],supportsProjection:!1},shapefile:{name:"Shapefile",itemTypes:["Shapefile"],supportsProjection:!0},fileGeodatabase:{name:"File Geodatabase",itemTypes:["File Geodatabase"],supportsProjection:!0},geojson:{name:"GeoJson",itemTypes:["GeoJson"],supportsProjection:!1},excel:{name:"Excel",itemTypes:["Microsoft Excel"],supportsProjection:!0},featureCollection:{name:"Feature Collection",itemTypes:["Feature Collection"],supportsProjection:!0}};function Ln(e){var t,r;return"object"==typeof e?(t=e.wkid,r=e.wkt,t?t+"":Fn.btoa(r)):e}function Nn(e){return"spatialRefId:"+Ln(function(t){var r;try{r=JSON.parse(t)}catch(e){r=t}return r}(e))}function Rn(e){return"exportItem:"+e}function Gn(e){return e?"exportLayer:0"+e:"exportLayer:null"}function jn(e){var t,r=e.autoAddResult,n=e.inviteResult,o=e.primaryEmailResult,e=e.secondaryEmailResult;return(o||e)&&(t={success:(o=[o,e].filter(function(e){return e})).every(function(e){return e.success})},(e=o.reduce(function(e,t){return e.concat(a(t,"errors",[]))},[])).length&&(t.errors=e)),{success:[r,n,t].filter(function(e){return e}).every(function(e){return e.success}),autoAdd:r,invite:n,email:t}}function _n(t,e){var r;return t&&(r=!C(t,"notAdded.length")&&!t.errors,e.autoAddResult={success:r},r||(r=t.errors||[],C(t,"notAdded.length")&&r.push(new y("Users not auto-added: "+t.notAdded.join(", "))),e.autoAddResult.errors=r,r=e.usersToAutoAdd.filter(function(e){return d(t.notAdded,e.username)}),e.usersToInvite=e.usersToInvite.concat(r))),e}function Bn(e,t){return e.orgId===t.orgId}function Kn(e){return"org_admin"===e.role&&!e.roleId}function Vn(e,t,r,n){var o=Promise.resolve(null);return e.length&&(r={authentication:r,message:t.body,subject:t.subject,notificationChannelType:"email",users:e.map(function(e){return e.username})},n||(r.batchSize=1),o=ct(r)),o}function Hn(t){var r,e=Promise.resolve(t);return t.email&&t.secondaryRO&&C(t,"inviteResult.success")&&(r=a(t,"secondaryRO.portalSelf.user",{}),e=Vn(t.usersToInvite.filter(function(e){return Bn(e,r)}),t.email,t.secondaryRO.authentication,Kn(r)).then(function(e){return t.secondaryEmailResult=e,t})),e}function Wn(e,t,r){var n=Promise.resolve(null);return n=t.length?et({id:e,users:t.map(function(e){return e.username}),authentication:r}):n}function zn(t){return Wn(C(t,"groupId"),C(t,"usersToAutoAdd"),C(t,"primaryRO.authentication")).then(function(e){return _n(e,t)})}function Yn(e,t,r,n,o){void 0===n&&(n=20160),void 0===o&&(o="group_member");var i=Promise.resolve(null);return i=t.length?ot({id:e,users:t.map(function(e){return e.username}),authentication:r,role:o,expiration:n}):i}function Jn(t){return Yn(C(t,"groupId"),C(t,"usersToInvite"),C(t,"primaryRO.authentication")).then(function(e){return t.inviteResult=e,t})}function Qn(t){var e=Promise.resolve(t);return e=t.email&&C(t,"inviteResult.success")?Vn(t.usersToEmail,t.email,t.primaryRO.authentication,Kn(t.requestingUser)).then(function(e){return t.primaryEmailResult=e,t}):e}function Zn(e,t){var r,n=[];return-1!==t.privileges.indexOf("portal:admin:assignToGroups")&&(r=[t.orgId,t.cOrgId].filter(function(e){return e}),n=e.filter(function(e){return-1!==r.indexOf(e.orgId)})),n}function $n(e,t){var r=Zn(e,t);return e.filter(function(t){return!r.some(function(e){return e.username===t.username})})}function Xn(e,t,r){void 0===r&&(r=!1);e=$n(e,t).filter(function(e){return Bn(e,t)});return r&&e.push(t),e}var eo=["ar","bs","ca","cs","da","de","en","es","et","el","fi","fr","hr","he","hu","it","id","ja","ko","lt","lv","nb","nl","pl","pt","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","uk","vi","zh","zh-cn","zh-tw","zh-hk"];function to(e,t){if("object"==typeof e&&null!==e&&"string"==typeof t){for(var r=t.split("."),n=0;n<r.length-1;n++){if(!e.hasOwnProperty(r[n]))return;e=e[r[n]]}delete e[r[r.length-1]]}}function ro(e){var t=l(e.item);return t.text=JSON.stringify(e.data),t}function no(e,t){return Promise.all([Be(e,t),Ve(e,t)]).then(function(e){return{item:e[0],data:e[1]}})}function oo(e,t){var r=l(e),n=l(e.item);return n.data=l(e.data),je(P({item:n},t)).then(function(e){return r.item.id=e.id,r.item.created=(new Date).getTime(),r.item.modified=r.item.created,r})}function io(e,t){var r=l(e),n=l(e.item);return n.data=l(e.data),Ge(P({item:n},t)).then(function(){return r.item.modified=(new Date).getTime(),r})}function ao(r,n){return f(this,void 0,void 0,function(){var t;return m(this,function(e){switch(e.label){case 0:return[4,Ve(r.id,n)];case 1:return t=e.sent(),[2,{item:r,data:t}]}})})}function so(e,t,r){return void 0===r&&(r=void 0),t.split(".").reduce(function(e,t){return e?e[t]:r},e)}function uo(r,n){return Object.keys(r).reduce(function(e,t){return e[t]=n(r[t],t,r),e},{})}function co(e){return e instanceof Date}function lo(e){return"function"==typeof e}function po(e){return"object"==typeof e}function fo(e){return e instanceof RegExp}function mo(e){return"object"==typeof e}function ho(e){var o,t,r;return Array.isArray(e)?(t=e.map(n).filter(function(e){return null!=e}),r=t=t,t=t.reduce(function(e,t){return vo(t)&&yo(t)&&(e<(t=go(t))&&(e=t)),e},-1),r=-1<t?0===t?[]:"{{delete:"+(t-1)+"}}":r):e&&mo(e)?(o=uo(e,n),t=0<(t=Object.keys(o).reduce(function(e,t){var r,n=o[t];return vo(n)&&yo(n)?(r=go(n))>e.maxLevel&&(e.maxLevel=r):e.obj[t]=n,e},{obj:{},maxLevel:-1})).maxLevel?1===t.maxLevel?void 0:"{{delete:"+(t.maxLevel-1)+"}}":t.obj):e="string"==typeof(e=r=e)&&yo(r)?function(e){var t=e,e=go(e);t=0===e?void 0:"{{delete:"+e+"}}";return t}(r):e;function n(e,t){return ho(e)}}var go=function(e){return parseInt(e.replace(/{|}/g,"").split(":")[1])};function yo(e){return e&&"string"==typeof e&&-1<e.indexOf("{{delete")}var vo=function(e){return"string"==typeof e};function bo(e,t,r,n){return void 0===n&&(n=0),t?t:"{{delete:"+n+"}}"}var wo=function(e){var t={};if(Array.isArray(e))t=e.map(wo);else if("object"==typeof e)for(var r in e)null!=e[r]&&"object"==typeof e[r]?t[r]=wo(e[r]):t[r]=e[r];else t=e;return t},So=/{{\s*?[\w].*?}}/g,xo=function(e){return"string"==typeof e};function Ao(e){return e||""===e||0===e}function Eo(e,a,s){if((s=wo(s=void 0===s?null:s)||{}).optional)throw new Error("Please do not pass in an `optional` transform; adlib provides that internally.");return s.optional=bo,ho(function r(e,n,o){return o=o||"",Array.isArray(e)?e.map(t):!e||!po(e)||co(e)||fo(e)||lo(e)?n(e,o):Object.assign({},e,uo(e,t));function t(e,t){return r(e,n,o?o+"."+t:t)}}(e,function(t,e){if(!xo(t))return t;var r,n=t.match(So);return n&&n.length?(n.map(function(e){var o,i=!1,t=e.replace(/{|}/g,"").trim(),r=(-1<t.indexOf("||")&&(r=t.split("||").map(function(e){return e.trim()}),o=r.length,t=r.find(function(e,t){var r,n;return n=a,r=(r=e).split(":")[0],null!=(n=so(n,r,null))?e:t+1===o&&(i=!0,isNaN(e)?e:parseInt(e))})),{key:e,value:t});return i||(t=function(e,t,r){var n,o=e.split(":");if(1<o.length){var i,a=o[0],s=o[1];if(o[2]&&(i=o[2]),!r||!r[s]||"function"!=typeof r[s])throw new Error("Attempted to apply non-existant transform "+s+" on "+a+" with params "+e);n=so(t,a),n=r[s](a,n,t,i)}else n=so(t,e);return n}(t,a,s),r.value=Ao(t)?t:e),r}).forEach(function(e){t===e.key?("string"!=typeof e.value||isNaN(e.value)||""===e.value||(-1<e.value.indexOf(".")?e.value=parseFloat(e.value):e.value=parseInt(e.value)),r=e.value):t=t.replace(e.key,e.value)}),Ao(r)?r:t):t}))}function ko(e,t,r){return Eo(e,t,r)}function Do(e,t,r){return $e({q:'title:"'+e+'" AND '+Object.keys(t).map(function(e){return e+':"'+t[e]+'"'}).join(" AND "),authentication:r}).then(function(e){return 0<e.results.length}).catch(function(e){throw Error("Error in doesItemExistWithTitle "+e)})}function To(e,t){return t.toLowerCase()+"-"+me(e)}function Io(e,t){e=e.filter(function(e){return!e.startsWith("slug|")});return e.push("slug|"+t),e}function Co(e,t){return Po({slug:e},t).then(function(e){return e.length?e[0]:null})}function Po(e,t){var r={filter:'typekeywords:"slug|'+e.slug+'"'};return t.authentication?r.authentication=t.authentication:t.portal&&(r.portal=t.portal),e.exclude&&(r.q="NOT id:"+e.exclude),$e(r).then(function(e){return e.results}).catch(function(e){throw e})}function qo(t,r,n){void 0===n&&(n=0);var o=t.slug;return Po({slug:o=n?t.slug+"-"+n:o,exclude:t.existingId},r).then(function(e){return e.length?qo(t,r,++n):o}).catch(function(e){throw Error("Error in getUniqueSlug "+e)})}var Oo=["id","isOrgItem","proxyFilter","ownerFolder","protected","owner","created","modified","guid","name","access","size","listed","numComments","numRatings","avgRating","numViews","scoreCompleteness","groupDesignations","listed","screenshots","banner","appCategories","industries","languages","largeThumbnail"];function Fo(n,o,i,a){return f(this,void 0,void 0,function(){var t,r;return m(this,function(e){switch(e.label){case 0:t=P({item:{id:n},params:{thumbnail:o},filename:i},a),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Ge(t)];case 2:if(e.sent().success)return[3,4];throw new U("Set Project Thumbnail","Unknown error setting thumbnail.");case 3:throw(r=e.sent())instanceof Error?new U("Set Project Thumbnail",r.message,r):new U("Set Project Thumbnail","Unknown error setting thumbnail.");case 4:return[2]}})})}function Uo(e,t,r){return v(St(r)+"/oauth2/registerApp",{method:"POST",authentication:r.authentication,params:{itemId:e,appType:"browser",redirect_uris:JSON.stringify(t)}})}var Mo={arcgis:{label:"ArcGIS Online",url:"https://www.arcgis.com",type:"arcgis"},arcgisQA:{label:"ArcGIS Online QAEXT",url:"https://qaext.arcgis.com",type:"arcgis"},arcgisDEV:{label:"ArcGIS Online DEVEXT",url:"https://devext.arcgis.com",type:"arcgis"},hub:{label:"ArcGIS Hub",url:"https://hub.arcgis.com/api",type:"arcgis-hub"},hubDEV:{label:"ArcGIS Hub DEV",url:"https://hubdev.arcgis.com/api",type:"arcgis-hub"},hubQA:{label:"ArcGIS Hub QA",url:"https://hubqa.arcgis.com/api",type:"arcgis-hub"}};function Lo(e){return"string"==typeof e&&e in Mo?Mo[e]:e}function No(e,t){var r=l(e);return t.from<e.from&&(r.from=t.from),t.to>e.to&&(r.to=t.to),r}function Ro(r,n){var o={};return["any","all","not","exact"].forEach(function(e){var t=h(Go(r,e),Go(n,e));t.length&&(o[e]=t.filter(z))}),o}function Go(e,t){var r=[];return e[t]&&(e=e[t],r=Array.isArray(e)?e:[e]),r}function jo(e){var t={};return Array.isArray(e)?t={any:e}:("string"==typeof e&&(t={any:[e]}),"object"==typeof e&&(t=e)),t}function _o(e){var t=new Date,r={type:"date-range",from:t.getTime(),to:t.getTime()};switch(e.unit){case"hours":case"days":case"weeks":r.from=r.to-{min:6e4,hours:36e5,days:864e5,weeks:6048e5}[e.unit]*e.num;break;case"months":t.setMonth(t.getMonth()-e.num),r.from=t.getTime();break;case"years":t.setFullYear(t.getFullYear()-e.num),r.from=t.getTime()}return r}function I(e,t,r){var e=l(e),n=t.q,t=t.filter;return n&&(e.q=(e.q?" ("+e.q+" "+r+" "+n+")":n).trim()),t&&(e.filter=(e.filter?"("+e.filter+" "+r+" "+t+")":t).trim()),e}function Bo(e,t){var r={q:"",filter:""};return t.exact&&(h(["username","firstname","lastname","fullname","email"],["title","tags","typekeywords","type","name","owner"],["title","typekeywords","owner"]).includes(e)?r.filter=Vo("AND",e,t.exact):("string"==typeof t.exact&&(t.all||(t.all=[]),"string"==typeof t.all&&(t.all=[t.all]),t.all.push(t.exact)),Array.isArray(t.exact)&&(t.all||(t.all=[]),"string"==typeof t.all&&(t.all=[t.all]),t.all=t.all.concat(t.exact)))),t.any&&(r.q=Vo("OR",e,t.any)),t.all&&(r.q=(r.q?r.q+" AND ":"")+Vo("AND",e,t.all)),t.not&&(r.q=(r.q?r.q+" AND ":"")+Vo("OR","-"+e,t.not)),r}function Ko(e,t){return{q:e+":["+t.from+" TO "+t.to+"]",filter:""}}function Vo(e,t,r){return Array.isArray(r)?"("+t+':"'+r.join('" '+e+" "+t+':"')+'")':t+':"'+r+'"'}function Ho(e,t,r,n){var o=l(e);return e.authentication&&(o.authentication=Oe.deserialize(e.authentication.serialize())),o.start=-1<t?t:r+1,function(e){return e&&(o.authentication=e),n(o)}}function Wo(e,t,r){var n=null;return t.thumbnail&&(n=e+"/community/groups/"+t.id+"/info/"+t.thumbnail,r&&"public"!==t.access&&(n=n+"?token="+r)),n}function zo(e,t,r){var n=null;return t.thumbnail&&(n=e+"/community/users/"+t.username+"/info/"+t.thumbnail,r&&"public"!==t.access&&(n=n+"?token="+r)),n}var Yo={$apps:[{type:{any:["Code Sample","Web Mapping Application","Mobile Application","Application","Desktop Application Template","Desktop Application","Operation View","Dashboard","Operations Dashboard Extension","Workforce Project","Insights Workbook","Insights Page","Insights Model","Hub Page","Hub Initiative","Hub Site Application","StoryMap","Web Experience","Web Experience Template","Form"],not:["Code Attachment","Featured Items","Symbol Set","Color Set","Windows Viewer Add In","Windows Viewer Configuration","Map Area","Indoors Map Configuration"]},typekeywords:{not:["MapAreaPackage","SMX"]}}],$storymap:[{type:"StoryMap"},{type:"Web Mapping Application",typekeywords:["Story Map"]}],$dashboard:[{type:"Dashboard",typekeywords:{any:["Dashboard"],not:["ArcGIS Operation View","Add In","Extension"]}}],$dataset:[],$experience:[{type:{any:["Web Experience"],not:["Web Experience Template"]}}],$site:[{type:["Hub Site Application","Site Application"]},{type:["Web Mapping Application"],typekeywords:["hubSite"]}],$initiative:[{type:{any:"Hub Initiative",not:"Hub Initiative Template"}}],$document:[{typekeywords:{any:"Document",not:["MapAreaPackage","SMX"]},type:{any:["Image","Layout","Desktop Style","Project Template","Report Template","Pro Report","Statistical Data Collection","360 VR Experience","netCDF","PDF","CSV","Administrative Report","Raster function template"],not:["Image Service","Explorer Document","Explorer Map","Globe Document","Scene Document","Code Attachment","Featured Items","Symbol Set","ColorSet","Windows Viewer Add In","Windows Viewer Configuration","Map Area","Indoors Map Configuration"]}}]};function Jo(e,i){void 0===i&&(i="OR");var t,r=[];return null!=(t=e.aggregations)&&t.counts&&e.aggregations.counts.forEach(function(n){var e={label:n.fieldName,key:n.fieldName,aggField:n.fieldName,display:"multi-select"},o=[];n.fieldValues.forEach(function(e){var t={filterType:"content"},r={},r=(r["OR"===i?"any":"all"]=[e.value],t[n.fieldName]=r,{label:e.value+" ("+e.count+")",key:e.value,count:e.count,selected:!1,filter:t});o.push(r)}),e.options=o,r.push(e)}),r}function Qo(e){var e=e.map(Zo),n=["created","modified"],o=h(["filterType","subFilters","term"],n),e=e.reduce(function(r,e){return Object.entries(e).forEach(function(e){var t=e[0],e=e[1];r.hasOwnProperty(t)?o.includes(t)?n.includes(t)?r[t]=No(r[t],e):"term"===t?r[t]=r[t]+" "+e:"subFilters"===t&&(r[t]=h(r[t],e)):r[t]=Ro(r[t],e):r[t]=l(e)}),r},{});return e.filterType="content",e}function Zo(e){var t=$o(e);return Array.isArray(e.subFilters)&&(t.subFilters=t.subFilters.reduce(function(e,t){return"string"==typeof t?Yo[t]&&(e=e.concat(Yo[t])):e.push(t),e},[])),ti(t)}function $o(e){var r=l(e);return r.subFilters=r.subFilters||[],r.type&&(Array.isArray(r.type)?r.type=r.type.reduce(function(e,t){return Xo(t)?r.subFilters=r.subFilters.concat(ei(t)):e.push(t),e},[]):Xo(r.type)&&(e=r.type,r.subFilters=r.subFilters.concat(ei(e)),delete r.type)),r}function Xo(e){var t=!1;return t="string"==typeof e?e in Yo:t}function ei(e){return Yo[e]}function ti(t){var e,r={},n=(t.term&&(r.term=t.term),["created","modified"]),o=h(["filterType","subFilters","term"],n);return Object.entries(t).forEach(function(e){var t=e[0],e=e[1];o.includes(t)||(r[t]=jo(e))}),t.subFilters&&Array.isArray(t.subFilters)&&(e=t.subFilters,r.subFilters=e.map(ti)),n.forEach(function(e){t[e]&&("relative-date"===t[e].type?r[e]=_o(t[e]):r[e]=l(t[e]))}),r}function ri(e){var t,r=ni(e);return e.subFilters&&(t=e.subFilters.reduce(function(e,t){return e="object"==typeof t?I(e,ni(t),"OR"):e},{q:"",filter:""}),r=I(r,t,"AND")),e.term&&(r.q=(e.term+" "+r.q).trim()),r}function ni(e){var r={q:"",filter:""},n=["created","modified"],o=h(["filterType","subFilters","term"],n);return Object.entries(e).forEach(function(e){var t=e[0],e=e[1];o.includes(t)||(r=I(r,Bo(t,e),"AND")),n.includes(t)&&(r=I(r,Ko(t,e),"AND"))}),r}function oi(e,t,r){var a,n=ri(Zo(e)),e=(null!=(e=r.aggregations)&&e.length&&(console.warn("IHubSearchOptions.aggregations is deprecated. Please use .aggFields instead."),n.countFields=r.aggregations.join(","),n.countSize=r.aggLimit||10),null!=(e=r.aggFields)&&e.length&&(n.countFields=r.aggFields.join(","),n.countSize=r.aggLimit||10),["authentication","num","sortField","sortOrder","site","start"].forEach(function(e){r.hasOwnProperty(e)&&(n[e]=r[e])}),a=t,function o(i){return f(this,void 0,void 0,function(){var t,r,n;return m(this,function(e){switch(e.label){case 0:return[4,$e(i)];case 1:return t=e.sent(),[4,Promise.all(t.results.map(function(e){return a(e,i)}))];case 2:return r=e.sent(),n=Jo(t),[2,{total:t.total,results:r,facets:n,hasNext:-1<t.nextStart,next:Ho(i,t.nextStart,t.total,o)}]}})})});return r.api&&!r.authentication&&(t=Lo(r.api),n.portal=t.url),e(n)}ai.prototype.modelToObject=function(e,t){return r=this.mappings,si(e,"modelKey",t,"objectKey",r);var r},ai.prototype.objectToModel=function(e,t){return r=this.mappings,si(e,"objectKey",t,"modelKey",r);var r};var ii=ai;function ai(e){this.mappings=e}function si(r,n,e,o,t){var i=l(e);return t.forEach(function(e){var t=C(e,n),e=C(e,o),t=C(r,t);null!=t&&$(i,e,t)}),i}var _t="Hub Project",ui={name:"No title provided",tags:[],typeKeywords:["Hub Project"],status:"inactive"},ci={item:{type:_t,title:"No Title Provided",description:"No Description Provided",snippet:"",tags:[],typeKeywords:["Hub Project"],properties:{slug:""}},data:{display:"about",timeline:{},status:"inactive",contacts:[],schemaVersion:1}};function li(){var t=[];return["created","culture","description","extent","id","modified","owner","snippet","tags","typeKeywords","url","type"].forEach(function(e){t.push({objectKey:e,modelKey:"item."+e})}),["contacts","display","geometry","headerImage","layout","location","status"].forEach(function(e){t.push({objectKey:e,modelKey:"data."+e})}),t.push({objectKey:"slug",modelKey:"item.properties.slug"}),t.push({objectKey:"orgUrlKey",modelKey:"item.properties.orgUrlKey"}),t.push({objectKey:"name",modelKey:"item.title"}),t}function pi(i,a){return f(this,void 0,void 0,function(){var t,r,n,o;return m(this,function(e){switch(e.label){case 0:return(t=P(P({},ui),i)).slug||(t.slug=To(t.name,t.orgUrlKey)),[4,qo({slug:(r=t).slug},a)];case 1:return r.slug=e.sent(),t.typeKeywords=Io(t.typeKeywords,t.slug),n=new ii(li()),[4,oo(o=n.objectToModel(t,l(ci)),a)];case 2:return o=e.sent(),[2,n.modelToObject(o,{})]}})})}function di(o,i){return f(this,void 0,void 0,function(){var t,r,n;return m(this,function(e){switch(e.label){case 0:return[4,qo({slug:(t=o).slug,existingId:o.id},i)];case 1:return t.slug=e.sent(),[4,no(o.id,i)];case 2:return n=e.sent(),r=new ii(li()),[4,io(r.objectToModel(o,n),i)];case 3:return n=e.sent(),[2,r.modelToObject(n,o)]}})})}function fi(e,t){e=(fe(e)?Be:Co)(e,t);return e.then(function(e){return e?gi(e,t):null})}function mi(t,r){return f(this,void 0,void 0,function(){return m(this,function(e){switch(e.label){case 0:return[4,Je(P(P({},r),{id:t}))];case 1:return e.sent(),[2]}})})}function hi(t,r){return f(this,void 0,void 0,function(){return m(this,function(e){return[2,oi(Qo([{filterType:"content",type:{exact:["Hub Project"]}},t]),gi,r)]})})}function gi(o,i){return f(this,void 0,void 0,function(){var t,r,n;return m(this,function(e){switch(e.label){case 0:return[4,ao(o,i)];case 1:return t=e.sent(),n=new ii(li()),i.authentication&&(r=i.authentication,r=r.token),(n=n.modelToObject(t,{})).thumbnailUrl=br(t.item,i,r),[2,n]}})})}q.init=function(e){return new q(e)},Object.defineProperty(q.prototype,"context",{get:function(){return this._contextManager?this._contextManager.context:this._context},enumerable:!1,configurable:!0}),q.prototype.create=function(t,r){return f(this,void 0,void 0,function(){return m(this,function(e){if(r||this.context.isAuthenticated)return t.orgUrlKey||(t.orgUrlKey=this.context.portal.urlKey),[2,pi(t,r||this.context.userRequestOptions)];throw new U("Create Project","Creating Hub Projects requires authentication.")})})},q.prototype.update=function(t,r){return f(this,void 0,void 0,function(){return m(this,function(e){if(r||this.context.isAuthenticated)return[2,di(t,r||this.context.userRequestOptions)];throw new U("Update Project","Updating Hub Projects requires authentication.")})})},q.prototype.destroy=function(t,r){return f(this,void 0,void 0,function(){return m(this,function(e){if(r||this.context.isAuthenticated)return[2,mi(t,r||this.context.userRequestOptions)];throw new U("Destroy Project","Destroying Hub Projects requires authentication.")})})},q.prototype.get=function(t,r){return f(this,void 0,void 0,function(){return m(this,function(e){return console.warn("HubProjectManager.get is deprecated and will be removed. Use .fetch() instead."),[2,this.fetch(t,r)]})})},q.prototype.fetch=function(t,r){return f(this,void 0,void 0,function(){return m(this,function(e){if(r||this.context.requestOptions)return[2,fi(t,r||this.context.requestOptions)];throw new U("Fetch Project","Can not retrieve context.requestOptions from Context Manager. HubProjectManager is configured incorrectly.")})})},q.prototype.search=function(t,r){return f(this,void 0,void 0,function(){return m(this,function(e){return!r.authentication&&this.context.session&&(r.authentication=this.context.session),[2,hi(t,r)]})})},q.prototype.updateThumbnail=function(r,n,o,i){return f(this,void 0,void 0,function(){var t;return m(this,function(e){switch(e.label){case 0:return t=i||this.context.userRequestOptions,[4,Fo(r.id,n,o,t)];case 1:return e.sent(),[2,this.fetch(r.id,i)]}})})},q.prototype.fromItem=function(r,n){return f(this,void 0,void 0,function(){var t;return m(this,function(e){return t=n||this.context.userRequestOptions,[2,gi(r,t)]})})};var yi=q;function q(e){e instanceof Gt?this._contextManager=e:this._context=e}function vi(e,t){var r=e;return r=-1===e.indexOf("token")&&-1<e.indexOf(t.authentication.portal)?e+"?token="+t.authentication.token:r}function bi(e,t){return(t=void 0===t?{}:t).credentials||(t.credentials="same-origin"),fetch(e,t).then(function(e){return e.blob()})}function wi(r){return bi(r.url).then(function(e){return Re(t={id:r.id,owner:r.owner,name:r.fileName,resource:e,authentication:r.authentication}).then(function(e){e=s(t)+"/content/users/"+e+"/items/"+t.id+"/addResources";return t.params=P({file:t.resource,fileName:t.name,resourcesPrefix:t.prefix,text:t.content,access:t.private?"private":"inherit"},t.params),v(e,t)});var t})}function Si(t){return bi(t.url).then(function(e){return Ge({item:{id:t.id,owner:t.owner},params:{fileName:t.fileName,thumbnail:e},authentication:t.authentication}).catch(function(e){return Promise.resolve()})}).catch(function(e){return Promise.resolve()})}c.FileExtension=void 0,(x=c.FileExtension||(c.FileExtension={})).aptx="aptx",x.bpk="bpk",x.csv="csv",x.eaz="eaz",x.esriaddin="esriaddin",x.esriaddinx="esriaddinx",x.doc="doc",x.docx="docx",x.dlpk="dlpk",x.featurecollection="featurecollection",x.geojson="geojson",x.gcpk="gcpk",x.gpk="gpk",x.gpkg="gpkg",x.gpkx="gpkx",x.insightswbk="insightswbk",x.ipynb="ipynb",x.jpg="jpg",x.jpeg="jpeg",x.json="json",x.key="key",x.kml="kml",x.kmz="kmz",x.lpk="lpk",x.lpkx="lpkx",x.lyr="lyr",x.lyrx="lyrx",x.mapx="mapx",x.mmpk="mmpk",x.mpk="mpk",x.mpkx="mpkx",x.msd="msd",x.mspk="mspk",x.mxd="mxd",x.ncfg="ncfg",x.nmc="nmc",x.nmf="nmf",x.numbers="numbers",x.pages="pages",x.pagx="pagx",x.parquet="parquet",x.pdf="pdf",x.pmf="pmf",x.png="png",x.ppkx="ppkx",x.ppt="ppt",x.pptx="pptx",x.proconfigx="proconfigx",x.rpk="rpk",x.rptx="rptx",x.sd="sd",x.slpk="slpk",x.spk="spk",x.stylx="stylx",x.surveyaddin="surveyaddin",x.sxd="sxd",x.tif="tif",x.tiff="tiff",x.tpk="tpk",x.tpkx="tpkx",x.vsd="vsd",x.vtpk="vtpk",x.wmpk="wmpk",x.wpk="wpk",x.xls="xls",x.xml="xml",x.xlsx="xlsx",x.zip="zip",x["3dd"]="3dd",x["3vr"]="3vr",x["3ws"]="3ws",x["rft.json"]="rft.json",x["rft.xml"]="rft.xml",c.ItemType=void 0,(A=c.ItemType||(c.ItemType={}))["360 VR Experience"]="360 VR Experience",A["Apache Parquet"]="Apache Parquet",A["AppBuilder Widget Package"]="AppBuilder Widget Package",A["Desktop Add In"]="Desktop Add In",A["Explorer Add In"]="Explorer Add In",A["Explorer Map"]="Explorer Map",A["Explorer Layer"]="Explorer Layer",A["Windows Mobile Package"]="Windows Mobile Package",A["ArcGIS Pro Add In"]="ArcGIS Pro Add In",A["ArcGIS Pro Configuration"]="ArcGIS Pro Configuration",A["Globe Document"]="Globe Document",A["Map Document"]="Map Document",A["ArcPad Package"]="ArcPad Package",A["Published Map"]="Published Map",A["Scene Document"]="Scene Document",A["CityEngine Web Scene"]="CityEngine Web Scene",A["Code Sample"]="Code Sample",A["CSV Collection"]="CSV Collection",A.CSV="CSV",A["CAD Drawing"]="CAD Drawing",A["Deep Learning Package"]="Deep Learning Package",A["Desktop Application"]="Desktop Application",A["Desktop Application Template"]="Desktop Application Template",A["Desktop Style"]="Desktop Style",A["Earth Configuration"]="Earth Configuration",A["Feature Collection"]="Feature Collection",A["File Geodatabase"]="File Geodatabase",A.GeoJson="GeoJson",A["Geoprocessing Package"]="Geoprocessing Package",A.GeoPackage="GeoPackage",A["Geoprocessing Sample"]="Geoprocessing Sample",A.GML="GML",A["Image Collection"]="Image Collection",A.Image="Image",A["iWork Keynote"]="iWork Keynote",A["iWork Numbers"]="iWork Numbers",A["iWork Pages"]="iWork Pages",A["KML Collection"]="KML Collection",A.KML="KML",A.Layer="Layer",A["Layer Package"]="Layer Package",A.Layout="Layout",A["Locator Package"]="Locator Package",A["Map Package"]="Map Package",A["Map Template"]="Map Template",A["Microsoft Excel"]="Microsoft Excel",A["Microsoft Powerpoint"]="Microsoft Powerpoint",A["Visio Document"]="Visio Document",A["Microsoft Word"]="Microsoft Word",A["Mobile Basemap Package"]="Mobile Basemap Package",A["Mobile Map Package"]="Mobile Map Package",A["Mobile Scene Package"]="Mobile Scene Package",A.Notebook="Notebook",A.PDF="PDF",A["Pro Map"]="Pro Map",A["Pro Report"]="Pro Report",A["Project Package"]="Project Package",A["Project Template"]="Project Template",A["Raster function template"]="Raster function template",A["Rule Package"]="Rule Package",A["Scene Package"]="Scene Package",A["Service Definition"]="Service Definition",A.Shapefile="Shapefile",A["Survey123 Add In"]="Survey123 Add In",A["Tile Package"]="Tile Package",A["Vector Tile Package"]="Vector Tile Package",A["Workflow Manager Package"]="Workflow Manager Package",A["Document Link"]="Document Link",A["Feature Service"]="Feature Service",A["Geocoding Service"]="Geocoding Service",A["Geodata Service"]="Geodata Service",A["Geometry Service"]="Geometry Service",A["Geoprocessing Service"]="Geoprocessing Service",A["Geoenrichment Service"]="Geoenrichment Service",A["Globe Service"]="Globe Service",A["Image Service"]="Image Service",A["Map Service"]="Map Service",A["Network Analysis Service"]="Network Analysis Service",A["Vector Tile Service"]="Vector Tile Service",A.WFS="WFS",A.WMS="WMS",A.WMTS="WMTS",A.OGCFeatureServer="OGCFeatureServer",A["Scene Service"]="Scene Service",A["Stream Service"]="Stream Service",A["Workflow Manager Service"]="Workflow Manager Service",A["Web Mapping Application"]="Web Mapping Application",A["Mobile Application"]="Mobile Application",A["AppBuilder Extension"]="AppBuilder Extension",A["Google Drive"]="Google Drive",A.Dropbox="Dropbox",A.OneDrive="OneDrive",A.StoryMap="StoryMap",A.Dashboard="Dashboard",A["Hub Initiative"]="Hub Initiative",A["Hub Site Application"]="Hub Site Application",A["Web Experience"]="Web Experience",A["Insights Workbook Package"]="Insights Workbook Package",A.Application="Application",A["ArcGIS Explorer Application Configuration"]="ArcGIS Explorer Application Configuration",A["ArcMap Document"]="ArcMap Document",A["Layer File"]="Layer File",A.ogcFeature="ogcFeature",A.FeatureServer="Feature Service",A.GeocodeServer="GeocodeServer",A.GeoDataServer="GeoDataServer",A.GeometryServer="GeometryServer",A.GeoenrichmentServer="GeoenrichmentServer",A.GPServer="GPServer",A.GlobeServer="GlobeServer",A.ImageServer="ImageServer",A.MapServer="MapServer",A.NAServer="NAServer",A.ElevationServer="ElevationServer",A.VectorTileServer="VectorTileServer",A["Scene Server"]="Scene Server",A.StreamServer="StreamServer",A.WMServer="WMServer",A.TiledImageServer="TiledImageServer";var xi,Bt={"360 VR Experience":{fileExt:[c.FileExtension["3dd"]],type:c.ItemType["360 VR Experience"],typeKeywords:[]},"Apache Parquet":{fileExt:[c.FileExtension.parquet],type:c.ItemType["Apache Parquet"],typeKeywords:[]},"AppBuilder Widget Package":{fileExt:[c.FileExtension.zip],type:c.ItemType["AppBuilder Widget Package"],typeKeywords:[]},"Desktop Add In":{fileExt:[c.FileExtension.esriaddin],type:c.ItemType["Desktop Add In"],typeKeywords:["Tool","Add In","Desktop Add In","ArcGIS Desktop","ArcMap","ArcGlobe","ArcScene","esriaddin"]},"Explorer Add In":{fileExt:[c.FileExtension.eaz],type:c.ItemType["Explorer Add In"],typeKeywords:["Tool","Add In","Explorer Add In","ArcGIS Explorer","eaz"]},"Explorer Map":{fileExt:[c.FileExtension.nmf],type:c.ItemType["Explorer Map"],typeKeywords:["Map","Explorer Map","Explorer Document","2D","3D","ArcGIS Explorer","nmf"]},"ArcGIS Explorer Application Configuration":{fileExt:[c.FileExtension.ncfg],type:c.ItemType["Explorer Map"],typeKeywords:["Map","Explorer Map","Explorer Mapping Application","2D","3D","ArcGIS Explorer"]},"Explorer Layer":{fileExt:[c.FileExtension.nmc],type:c.ItemType["Explorer Layer"],typeKeywords:["Data","Layer","Explorer Layer","ArcGIS Explorer","nmc"]},"Windows Mobile Package":{fileExt:[c.FileExtension.wmpk],type:c.ItemType["Windows Mobile Package"],typeKeywords:[]},"ArcGIS Pro Add In":{fileExt:[c.FileExtension.esriaddinx],type:c.ItemType["ArcGIS Pro Add In"],typeKeywords:["Tool","Add In","Pro Add In","esriaddinx"]},"ArcGIS Pro Configuration":{fileExt:[c.FileExtension.proconfigx],type:c.ItemType["ArcGIS Pro Configuration"],typeKeywords:[]},"Globe Document":{fileExt:[c.FileExtension["3dd"]],type:c.ItemType["Globe Document"],typeKeywords:["Map","Globe Document","3D","ArcGlobe","ArcGIS Server","3dd"]},"Map Document":{fileExt:[c.FileExtension.msd],type:c.ItemType["Map Document"],typeKeywords:["Map Document","Map","2D","ArcMap","ArcGIS Server","msd"]},"ArcMap Document":{fileExt:[c.FileExtension.mxd],type:c.ItemType["Map Document"],typeKeywords:["Map Document","Map","2D","ArcMap","ArcGIS Server"]},"ArcPad Package":{fileExt:[c.FileExtension.zip],type:c.ItemType["ArcPad Package"],typeKeywords:["Map","Layer","Data"]},"Published Map":{fileExt:[c.FileExtension.pmf],type:c.ItemType["Published Map"],typeKeywords:["Map","Published Map","2D","ArcReader","ArcMap","ArcGIS Server","pmf"]},"Scene Document":{fileExt:[c.FileExtension.sxd],type:c.ItemType["Scene Document"],typeKeywords:["Map","Scene Document","3D","ArcScene","sxd"]},"CityEngine Web Scene":{fileExt:[c.FileExtension["3ws"]],type:c.ItemType["CityEngine Web Scene"],typeKeywords:["3D","Map","Scene","Web"]},"Code Sample":{fileExt:[c.FileExtension.zip],type:c.ItemType["Code Sample"],typeKeywords:["Code","Sample"]},"CSV Collection":{fileExt:[c.FileExtension.zip],type:c.ItemType["CSV Collection"],typeKeywords:[]},CSV:{fileExt:[c.FileExtension.csv],type:c.ItemType.CSV,typeKeywords:["CSV"]},"CAD Drawing":{fileExt:[c.FileExtension.zip],type:c.ItemType["CAD Drawing"],typeKeywords:[]},"Deep Learning Package":{fileExt:[c.FileExtension.zip,c.FileExtension.dlpk],type:c.ItemType["Deep Learning Package"],typeKeywords:["Deep Learning","Raster"]},"Desktop Application":{type:c.ItemType["Desktop Application"],typeKeywords:["Desktop Application"]},"Desktop Application Template":{fileExt:[c.FileExtension.zip],type:c.ItemType["Desktop Application Template"],typeKeywords:["application","template","ArcGIS desktop"]},"Desktop Style":{fileExt:[c.FileExtension.stylx],type:c.ItemType["Desktop Style"],typeKeywords:["ArcGIS Pro","Symbology","Style","Symbols"]},"Earth Configuration":{fileExt:[c.FileExtension.xml],type:c.ItemType["Earth Configuration"],typeKeywords:["ArcGIS Earth","Earth","Earth Configuration"]},"Feature Collection":{type:c.ItemType["Feature Collection"],fileExt:[c.FileExtension.featurecollection],typeKeywords:[]},"File Geodatabase":{fileExt:[c.FileExtension.zip],type:c.ItemType["File Geodatabase"],typeKeywords:[]},GeoJson:{fileExt:[c.FileExtension.geojson,c.FileExtension.json],type:c.ItemType.GeoJson,typeKeywords:["Coordinates Type","CRS","Feature","FeatureCollection","GeoJSON","Geometry","GeometryCollection"]},"Geoprocessing Package":{fileExt:[c.FileExtension.gpk,c.FileExtension.gpkx],type:c.ItemType["Geoprocessing Package"],typeKeywords:["ArcGIS Desktop","ArcGlobe","ArcMap","ArcScene","Geoprocessing Package","gpk","Model","Result","Script","Sharing","Tool","Toolbox"]},GeoPackage:{fileExt:[c.FileExtension.gpkg],type:c.ItemType.GeoPackage,typeKeywords:["Data","GeoPackage","gpkg"]},"Geoprocessing Sample":{fileExt:[c.FileExtension.zip],type:c.ItemType["Geoprocessing Sample"],typeKeywords:["tool","geoprocessing","sample"]},GML:{fileExt:[c.FileExtension.zip],type:c.ItemType.GML,typeKeywords:[]},"Image Collection":{fileExt:[c.FileExtension.zip],type:c.ItemType["Image Collection"],typeKeywords:[]},Image:{fileExt:[c.FileExtension.jpg,c.FileExtension.jpeg,c.FileExtension.png,c.FileExtension.tif,c.FileExtension.tiff],type:c.ItemType.Image,typeKeywords:["Data","Image"]},"iWork Keynote":{fileExt:[c.FileExtension.key],type:c.ItemType["iWork Keynote"],typeKeywords:["Data","Document","Mac"]},"iWork Numbers":{fileExt:[c.FileExtension.numbers],type:c.ItemType["iWork Numbers"],typeKeywords:["Data","Document","Mac"]},"iWork Pages":{fileExt:[c.FileExtension.pages],type:c.ItemType["iWork Pages"],typeKeywords:["Data","Document","Mac"]},"KML Collection":{fileExt:[c.FileExtension.zip],type:c.ItemType["KML Collection"],typeKeywords:[]},KML:{type:c.ItemType.KML,fileExt:[c.FileExtension.kml,c.FileExtension.kmz],typeKeywords:["Data","Map","kml"]},Layer:{fileExt:[c.FileExtension.lyr],type:c.ItemType.Layer,typeKeywords:["Data","Layer","ArcMap","ArcGlobe","ArcGIS Explorer","lyr"]},"Layer File":{fileExt:[c.FileExtension.lyrx],type:c.ItemType.Layer,typeKeywords:["ArcGIS Pro","Layer","Layer File"]},"Layer Package":{fileExt:[c.FileExtension.lpk,c.FileExtension.lpkx],type:c.ItemType["Layer Package"],typeKeywords:[]},Layout:{fileExt:[c.FileExtension.pagx],type:c.ItemType.Layout,typeKeywords:["ArcGIS Pro","Layout","Layout File","pagx"]},"Locator Package":{fileExt:[c.FileExtension.gcpk],type:c.ItemType["Locator Package"],typeKeywords:[]},"Map Package":{fileExt:[c.FileExtension.mpk,c.FileExtension.mpkx],type:c.ItemType["Map Package"],typeKeywords:[]},"Map Template":{fileExt:[c.FileExtension.zip],type:c.ItemType["Map Template"],typeKeywords:["map","ArcMap","template","ArcGIS desktop"]},"Microsoft Excel":{fileExt:[c.FileExtension.xls,c.FileExtension.xlsx],type:c.ItemType["Microsoft Excel"],typeKeywords:["Data","Document","Microsoft Excel"]},"Microsoft Powerpoint":{fileExt:[c.FileExtension.ppt,c.FileExtension.pptx],type:c.ItemType["Microsoft Powerpoint"],typeKeywords:["Data","Document","Microsoft Powerpoint"]},"Visio Document":{fileExt:[c.FileExtension.vsd],type:c.ItemType["Visio Document"],typeKeywords:["Data","Document","Visio Document"]},"Microsoft Word":{fileExt:[c.FileExtension.doc,c.FileExtension.docx],type:c.ItemType["Microsoft Word"],typeKeywords:["Data","Document"]},"Mobile Basemap Package":{fileExt:[c.FileExtension.bpk],type:c.ItemType["Mobile Basemap Package"],typeKeywords:[]},"Mobile Map Package":{fileExt:[c.FileExtension.mmpk],type:c.ItemType["Mobile Map Package"],typeKeywords:[]},"Mobile Scene Package":{fileExt:[c.FileExtension.mspk],type:c.ItemType["Mobile Scene Package"],typeKeywords:[]},Notebook:{fileExt:[c.FileExtension.ipynb],type:c.ItemType.Notebook,typeKeywords:["Notebook","Python"]},PDF:{fileExt:[c.FileExtension.pdf],type:c.ItemType.PDF,typeKeywords:["Data","Document","PDF"]},"Pro Map":{fileExt:[c.FileExtension.mapx],type:c.ItemType["Pro Map"],typeKeywords:["ArcGIS Pro","Map","Map File","mapx"]},"Pro Report":{fileExt:[c.FileExtension.rptx],type:c.ItemType["Pro Report"],typeKeywords:[]},"Project Package":{fileExt:[c.FileExtension.ppkx],type:c.ItemType["Project Package"],typeKeywords:[]},"Project Template":{fileExt:[c.FileExtension.aptx],type:c.ItemType["Project Template"],typeKeywords:[]},"Raster function template":{fileExt:[c.FileExtension["rft.json"],c.FileExtension["rft.xml"]],type:c.ItemType["Raster function template"],typeKeywords:["Raster","Functions","Processing","rft","srf","function template","templates","ArcGIS Pro"]},"Rule Package":{fileExt:[c.FileExtension.rpk],type:c.ItemType["Rule Package"],typeKeywords:[]},"Scene Package":{fileExt:[c.FileExtension.slpk,c.FileExtension.spk],type:c.ItemType["Scene Package"],typeKeywords:[]},"Service Definition":{fileExt:[c.FileExtension.sd],type:c.ItemType["Service Definition"],typeKeywords:["Data","Service","Service Definition"]},Shapefile:{fileExt:[c.FileExtension.zip],type:c.ItemType.Shapefile,typeKeywords:["Data","Layer","shapefile"]},"Survey123 Add In":{fileExt:[c.FileExtension.surveyaddin],type:c.ItemType["Survey123 Add In"],typeKeywords:["Add In","Survey123 Add In","Tool"]},"Tile Package":{fileExt:[c.FileExtension.tpk,c.FileExtension.tpkx],type:c.ItemType["Tile Package"],typeKeywords:[]},"Vector Tile Package":{fileExt:[c.FileExtension.vtpk],type:c.ItemType["Vector Tile Package"],typeKeywords:[]},"Workflow Manager Package":{fileExt:[c.FileExtension.wpk],type:c.ItemType["Workflow Manager Package"],typeKeywords:[]},"Document Link":{type:c.ItemType["Document Link"],typeKeywords:["Data","Document"]},"Feature Service":{type:c.ItemType["Feature Service"],typeKeywords:["ArcGIS Server","Data","Feature Access","Feature Service","Service","Singlelayer","Hosted Service"]},GeocodeServer:{type:c.ItemType["Geocoding Service"],typeKeywords:["ArcGIS Server","Geocoding Service","Locator Service","Service","Tool","Service Proxy"]},GeoDataServer:{type:c.ItemType["Geodata Service"],typeKeywords:["Data","Service","Geodata Service","ArcGIS Server"]},GeometryServer:{type:c.ItemType["Geometry Service"],typeKeywords:["Tool","Service","Geometry Service","ArcGIS Server"]},GeoenrichmentServer:{type:c.ItemType["Geoenrichment Service"],typeKeywords:["Geoenrichment Service","ArcGIS Server"]},GPServer:{type:c.ItemType["Geoprocessing Service"],typeKeywords:["Tool","Service","Geoprocessing Service","ArcGIS Server"]},GlobeServer:{type:c.ItemType["Globe Service"],typeKeywords:["Data","Service","Globe Service","ArcGIS Server"]},ImageServer:{type:c.ItemType["Image Service"],typeKeywords:["Data","Service","Image Service","ArcGIS Server"]},MapServer:{type:c.ItemType["Map Service"],typeKeywords:["Data","Service","Map Service","ArcGIS Server"]},NAServer:{type:c.ItemType["Network Analysis Service"],typeKeywords:["Tool","Service","Network Analysis Service","ArcGIS Server"]},ElevationServer:{type:c.ItemType["Image Service"],typeKeywords:["Elevation 3D Layer"]},VectorTileServer:{type:c.ItemType["Vector Tile Service"],typeKeywords:[]},WFS:{type:c.ItemType.WFS,typeKeywords:["Data","Service","Web Feature Service","OGC"]},WMS:{type:c.ItemType.WMS,typeKeywords:["Data","Service","Web Map Service","OGC"]},WMTS:{type:c.ItemType.WMTS,typeKeywords:["Data","Service","OGC"]},ogcFeature:{type:c.ItemType.OGCFeatureServer,typeKeywords:["Data","Service","Feature Service","OGC","OGC Feature Service"]},SceneServer:{type:c.ItemType["Scene Service"],typeKeywords:["Scene Service"]},StreamServer:{type:c.ItemType["Stream Service"],typeKeywords:["Data","Service","Stream Service","ArcGIS Server"]},WMServer:{type:c.ItemType["Workflow Manager Service"],typeKeywords:["Workflow Manager","ArcGIS Server","WMServer","Workflow","JTX","Job Tracking"]},TiledImageServer:{type:c.ItemType["Image Service"],typeKeywords:["Tiled Imagery"]},"Web Mapping Application":{type:c.ItemType["Web Mapping Application"],typeKeywords:["JavaScript","Map","Mapping Site","Online Map","Ready To Use","Web AppBuilder","Web Map (+ WAB2D or WAB3D)"]},"Mobile Application":{type:c.ItemType["Mobile Application"],typeKeywords:["ArcGIS Mobile Map","Mobile Application"]},"AppBuilder Extension":{type:c.ItemType["AppBuilder Extension"],typeKeywords:["Widget","App Builder"]},"Google Drive":{type:c.ItemType["Google Drive"],typeKeywords:["CSV","Shapefile","GeoJSON","Excel","FileGeodatabase"]},Dropbox:{type:c.ItemType.Dropbox,typeKeywords:["CSV","Shapefile","GeoJSON","Excel","FileGeodatabase"]},OneDrive:{type:c.ItemType.OneDrive,typeKeywords:["CSV","Shapefile","GeoJSON","Excel","FileGeodatabase"]},"Map Service":{type:c.ItemType["Map Service"],typeKeywords:["ArcGIS Server","Data","Map Service","Service","Hosted Service"]},StoryMap:{type:c.ItemType.StoryMap,typeKeywords:["arcgis-storymaps","StoryMap","Web Application (smstatusdraft or smsstatuspublished)"]},Dashboard:{type:c.ItemType.Dashboard,typeKeywords:["Dashboard","Operations Dashboard"]},"Hub Initiative":{type:c.ItemType["Hub Initiative"],typeKeywords:["Hub","hubInitiative","OpenData"]},"Hub Site Application":{type:c.ItemType["Hub Site Application"],typeKeywords:["Hub","hubSite","hubSolution","JavaScript","Map","Mapping Site","Online Map","OpenData","Ready To Use","selfConfigured","Web Map","Registered App"]},"Web Experience":{type:c.ItemType["Web Experience"],typeKeywords:["EXB Experience","JavaScript","Ready To Use Web Application","Web Experience","Web Mapping Application","Web Page","Web Site"]},"Insights Workbook Package":{type:c.ItemType["Insights Workbook Package"],fileExt:[c.FileExtension.insightswbk],typeKeywords:["Insights","Insights Workbook Package"]}},Ai=/(feature)server(\/|\/(\d+))?$/i,Ei=/\/[a-zA-Z]+server(\/|\/(\d+))?$/i;function ki(e,t){return{title:t.name,description:t.description,extent:t.extent,url:e}}function Di(e,t){var r=t.serviceDescription||t.description;return{title:e.match(/\/services\/(.+)\/(feature|map|image)server/i)[1],description:r,extent:t.fullExtent||t.initialExtent,url:e}}function Ti(i){return f(this,void 0,void 0,function(){var r,n,o;return m(this,function(e){switch(e.label){case 0:return(r=new URL(i)).searchParams.set("f","json"),[4,fetch(r.href)];case 1:return(r=e.sent()).ok?[4,r.json()]:[2,{ok:!1}];case 2:return(n=e.sent()).error?[2,{ok:!1}]:(o=(t=(t=i).match(Ai))&&t[3]?ki:Di,[2,{ok:!0,item:o(i,n)}])}var t})})}function Ii(r){var n={},o=["created","modified"],i=h(["term","searchUserAccess"],o);return Object.entries(r).forEach(function(e){var t=e[0],e=e[1];i.includes(t)||p(t,jo(e),n),o.includes(t)&&(e=l(C(r,t)),"relative-date"===C(r,t+".type")?p(t,_o(e),n):p(t,e,n))}),r.hasOwnProperty("searchUserAccess")&&(n.searchUserAccess=r.searchUserAccess),r.term&&(n.term=r.term),n}function Ci(e){var r={q:"",filter:""},n=["created","modified"],o=h(["term","searchUserAccess","filterType"],n);return Object.entries(e).forEach(function(e){var t=e[0],e=e[1];o.includes(t)||(r=I(r,Bo(t,e),"AND")),n.includes(t)&&(r=I(r,Ko(t,e),"AND"))}),e.hasOwnProperty("searchUserAccess")&&(r.searchUserAccess=e.searchUserAccess),e.term&&(r.q=(e.term+" "+r.q).trim()),r}function Pi(r){var n={},o=["created","modified","lastlogin"],i=h(["disabled","term"],o);return Object.entries(r).forEach(function(e){var t=e[0],e=e[1];i.includes(t)||p(t,jo(e),n),o.includes(t)&&(e=l(C(r,t)),"relative-date"===C(r,t+".type")?p(t,_o(e),n):p(t,e,n))}),r.hasOwnProperty("disabled")&&(n.disabled=r.disabled),r.term&&(n.term=r.term),n}function qi(e){var r={q:"",filter:""},n=["created","modified","lastlogin"],o=h(["term","filterType"],n);return Object.entries(e).forEach(function(e){var t=e[0],e=e[1];o.includes(t)||(r=I(r,Bo(t,e),"AND")),n.includes(t)&&(r=I(r,Ko(t,e),"AND"))}),e.hasOwnProperty("disabled")&&(r.disabled=e.disabled),e.term&&(r.q=("("+e.term+") "+r.q).trim()),r}function Oi(o){function i(e){return e.thumbnailUrl=br(e,r,t),e}var e,t,r=(null==(e=o.authentication)?void 0:e.portal)||o.portal;o.authentication&&(t=o.authentication.token);return $e(o).then(function(e){var t=-1<e.nextStart,r=e.results.map(En),n=(r=(r=o.site?r.map(function(e){return Pn(e,o.site)}):r).map(i),Jo(e));return{total:e.total,results:r,facets:n,hasNext:t,next:Ho(o,e.nextStart,e.total,Oi)}})}function Fi(o){function i(e){return e.siteTeamUrl=o.site.item.url+"/teams/"+e.id+"/about",e}function a(e){return e.thumbnailUrl=Wo(r,e,t),e}var e,t,r=(null==(e=o.authentication)?void 0:e.portal)||o.portal;o.authentication&&(t=o.authentication.token);return Ze(o,"group").then(function(e){var t,r=-1<e.nextStart,n=e.results.map(a);return null!=(t=null==(t=o.site)?void 0:t.item)&&t.url&&(n=e.results.map(i)),{hasNext:r,total:e.total,results:n,next:Ho(o,e.nextStart,e.total,Fi)}})}function Ui(o){function i(e){return e.profileUrl=o.site.item.url+"/people/"+e.username+"/profile",e}function a(e){return e.thumbnail&&(e.thumbnailUrl=zo(t,e,r)),e}var t=o.authentication.portal,r=o.authentication.token;return Ze(o,"user").then(function(e){var t,r=-1<e.nextStart,n=e.results.map(a);return null!=(t=null==(t=o.site)?void 0:t.item)&&t.url&&(n=e.results.map(i)),{hasNext:r,total:e.total,results:n,next:Ho(o,e.nextStart,e.total,Ui)}})}function Mi(e,t){var r,n,o,i,a,s,u=l(e);switch(e.display){case"single-select":a=t,(s=l(i=e)).options=s.options.map(function(e){return e.selected=e.key===a[i.key],e}),u=s;break;case"multi-select":s=t,n=l(r=e),o=(null==(s=s[r.key])?void 0:s.split(","))||[],n.options=n.options.map(function(e){return e.selected=o.includes(e.key),e}),u=n}return u}function Li(e){if(1.4<=C(e,"item.properties.schemaVersion"))return e;var e=l(e),t=C(e,"data.values.gacode");return e.data.values.telemetry={consentNotice:{isTheme:!0,consentText:"",policyURL:""},customAnalytics:{ga:{customerTracker:{enabled:Boolean(t),id:t}}}},to(e,"data.values.gacode"),p("item.properties.schemaVersion",1.4,e),e}function Ni(t){return f(this,void 0,void 0,function(){return m(this,function(e){return 200<=t.status&&t.status<300?[2,t.json()]:[2,t.json().then(function(e){throw e.error?new Error(e.error.title+" :: "+e.error.detail+" :: "+t.status):new Error("Got "+t.status+" "+t.statusText)})]})})}function O(e){var t={},e=C(e,"authentication.token");return e&&(t.Authorization=e),t}function F(e){return(e||"https://hub.arcgis.com")+"/api/v3/domains"}function Ri(e,t){var r=e,n="hubsubdomain|"+(r=-1<e.indexOf("#/")?e.split("#/")[1]:r);return $e(Object.assign({q:"typekeywords: "+n},t)).then(function(e){return e.results.filter(function(e){return d(e.typeKeywords,n)})[0]}).then(function(e){if(e)return{hostname:e.url,siteId:e.id};throw new Error("site not found")})}function Gi(e,t){if(t.isPortal)throw new Error("addDomain is not available in ArcGIS Enterprise. Instead, edit the hubdomain typekeyword on the item");var r=O(t),t=(r["Content-Type"]="application/json",""+F(t.hubApiUrl)),n=e.siteTitle;return"number"==typeof n&&(e.siteTitle=n.toString()),fetch(t,{method:"POST",headers:r,mode:"cors",body:JSON.stringify(e)}).then(Ni)}function ji(e,t){if(t.isPortal)throw new Error("domainExists is not available in ArcGIS Enterprise.");e=xt(e);e=F(t.hubApiUrl)+"/"+e,t=O(t);return fetch(e,{method:"GET",headers:t,mode:"cors"}).then(function(e){return 404!==e.status})}function _i(e,t){return Ri(e,t).then(function(e){return!0}).catch(function(e){return!1})}function Bi(t,r,n,o){var i=t;return ji((i=(o=void 0===o?0:o)?t+"-"+o:t)+"-"+r,n).then(function(e){return e?Bi(t,r,n,o+1):i})}function Ki(t,r,n){var o=(n=void 0===n?0:n)?t+"-"+n:t;return _i(o,r).then(function(e){return e?Ki(t,r,n+1):o})}function Vi(e,t){return t.isPortal?Ri(e,t):(e=F(t.hubApiUrl)+"/"+e,t=O(t),fetch(e,{method:"GET",headers:t,mode:"cors"}).then(Ni))}function Hi(e,t){if(t.isPortal)throw new Error("removeDomain is not available in ArcGIS Enterprise. Instead, edit the hubdomain typekeyword on the item");var r=O(t),t=(r["Content-Type"]="application/json",F(t.hubApiUrl)+"/"+e);return fetch(t,{method:"DELETE",headers:r,mode:"cors"}).then(Ni)}function Wi(e,t){if(t.isPortal)throw new Error("removeDomainsBySiteId is not available in ArcGIS Enterprise. Instead, edit the hubdomain typekeyword on the item");var r=O(t),t=(r["Content-Type"]="application/json",F(t.hubApiUrl)+"/?siteId="+e);return fetch(t,{method:"DELETE",headers:r,mode:"cors"}).then(Ni)}function zi(e,t){var e=l(e),r=63;return t&&(r-=t.length+1),e=e.length>r?e.slice(0,r-6)+"-"+de(5):e}function Yi(e,t){return(t.isPortal?Ki(e,t):Bi(e,t.portalSelf.urlKey+"."+xt(Ut(t)),t)).then(function(e){return zi(e,t.portalSelf.urlKey)})}function Ji(r,n){return n.isPortal?Promise.resolve([]):Promise.all(["defaultHostname","customHostname"].reduce(function(e,t){var t=C(r,"data.values."+t);return t&&(t={hostname:t,clientKey:r.data.values.clientId,orgId:n.portalSelf.id,orgTitle:n.portalSelf.name,orgKey:n.portalSelf.urlKey,siteId:r.item.id,siteTitle:r.item.title,sslOnly:!0},e.push(Gi(t,n))),e},[]))}function Qi(r,n){return f(this,void 0,void 0,function(){var t;return m(this,function(e){switch(e.label){case 0:if(n.isPortal)throw new Error("removeDomainByHostname is not available in ArcGIS Enterprise. Instead, edit the hubdomain typekeyword on the item");e.label=1;case 1:return e.trys.push([1,5,,6]),[4,Vi(r,n)];case 2:return(t=e.sent(),t=C(t,"id"))?[4,Hi(t,n)]:[3,4];case 3:e.sent(),e.label=4;case 4:return[3,6];case 5:throw t=e.sent(),new Error("Error removing domain entry for "+r+": "+t);case 6:return[2]}})})}function Zi(e,t){return fe(e)?$i(e,t):Vi(xt(e).split("/")[0],t).then(function(e){return $i(e.siteId,t)})}function $i(e,t){return no(e,t).then(va)}function Xi(e,t,r){var n=this;return t=t||"UNKNOWN_ERROR",r=a(r,"rootCause",r),(n=xi.call(this,e,t,r)||this).name="HubError",n.stack=a(r,"stack",(new Error).stack),n}ae(Xi,xi=pe);var U=Xi;var ea="Hub Site Application",ta="Site Application",ra={name:"No title provided",tags:[],typeKeywords:["Hub Site","hubSite","DELETEMESITE"],capabilities:["api_explorer","pages","my_data","social_logins","json_chart_card","document_iframes","items_view","app_page","underlinedLinks","globalNav","socialSharing"],catalog:{groups:[]},subdomain:"",defaultHostname:"",customHostname:"",clientId:"",map:null,feeds:{},pages:[],theme:null,contentViews:{sidePanelOpen:{app:!0,map:!0,dataset:!0,document:!0,feedback:!0}}},na={item:{title:"No Title Provided",description:"No Description Provided",snippet:"",tags:[],typeKeywords:["Hub Site","hubSite","DELETEMESITE"],properties:{slug:"",orgUrlKey:"",defaultHostname:"",customHostname:"",clientId:"",subdomain:"",schemaVersion:1.5},url:""},data:{catalog:{groups:[]},feeds:{},values:{title:"",defaultHostname:"",customHostname:"",subdomain:"",faviconUrl:"",uiVersion:"2.4",clientId:"",map:{basemaps:{}},defaultExtent:{},pages:[],theme:{},layout:{sections:[],header:{component:{name:"site-header",settings:{fullWidth:!1,iframeHeight:"150px",iframeUrl:"",links:[],logoUrl:"",title:"default site",markdown:"",headerType:"default",schemaVersion:3,showLogo:!0,showTitle:!0,logo:{display:{},state:"valid"},shortTitle:"",menuLinks:[],socialLinks:{facebook:{},twitter:{},instagram:{},youtube:{}}}},showEditor:!1},footer:{component:{name:"site-footer",settings:{footerType:"none",markdown:"",schemaVersion:2.1}},showEditor:!1}},contentViews:{sidePanelOpen:{app:!0,map:!0,dataset:!0,document:!0,feedback:!0}}}}};function oa(){var t=[];["created","culture","description","extent","id","modified","owner","snippet","tags","typeKeywords","url","type"].forEach(function(e){t.push({objectKey:e,modelKey:"item."+e})}),["catalog","feeds"].forEach(function(e){t.push({objectKey:e,modelKey:"data."+e})});return["pages","theme","capabilities","subdomain","defaultHostname","customHostname","clientId","defaultExtent","map","telemetry","headerSass"].forEach(function(e){t.push({objectKey:e,modelKey:"data.values."+e})}),t.push({objectKey:"slug",modelKey:"item.properties.slug"}),t.push({objectKey:"orgUrlKey",modelKey:"item.properties.orgUrlKey"}),t.push({objectKey:"name",modelKey:"item.title"}),t}function ia(s,u){return f(this,void 0,void 0,function(){var t,r,n,o,i,a;return m(this,function(e){switch(e.label){case 0:return t=P(P({},ra),s),r=u.portalSelf,t.type=u.isPortal?ta:ea,t.slug||(t.slug=To(t.name,t.orgUrlKey)),t.typeKeywords=Io(t.typeKeywords,t.slug),t.subdomain||(t.subdomain=me(t.name)),[4,Yi((n=t).subdomain,u)];case 1:return n.subdomain=e.sent(),u.isPortal?(t.typeKeywords.push(("hubsubdomain|"+t.subdomain).toLowerCase()),t.url=u.authentication.portal.replace("/sharing/rest","/apps/sites")+"/#/"+t.subdomain):(t.defaultHostname=t.subdomain+"-"+r.urlKey+"."+xt(Ut(u)),t.url="https://"+(t.customHostname||t.defaultHostname)),t.orgUrlKey=r.urlKey,t.theme||(t.theme=ha(r)),t.defaultExtent||(t.defaultExtent=r.defaultExtent),t.culture||(t.culture=r.culture),C(t,"map.basemaps.primary")||p("map.basemaps.primary",r.defaultBasemap,t),C(t,"layout.header.component.settings.title")||p("layout.header.component.settings.title",t.name,t),o=new ii(oa()),[4,oo(i=o.objectToModel(t,l(na)),u)];case 2:return[4,da(i=e.sent(),u)];case 3:return a=e.sent(),i.data.values.clientId=a.client_id,[4,Ji(i,u)];case 4:return e.sent(),[4,io(i,u)];case 5:return a=e.sent(),[2,o.modelToObject(a,{})]}})})}function aa(i,a){return f(this,void 0,void 0,function(){var t,r,n,o;return m(this,function(e){switch(e.label){case 0:return t=new ii(oa()),r=t.objectToModel(i,l(na)),[4,no(i.id,a)];case 1:return n=e.sent(),[4,function(o,i,a){return f(this,void 0,void 0,function(){var t,r,n;return m(this,function(e){return t={clientKey:o.data.values.clientId,orgId:a.portalSelf.id,orgTitle:a.portalSelf.name,orgKey:a.portalSelf.urlKey,siteId:o.item.id,siteTitle:o.item.title,sslOnly:!0},r={remove:[],add:[]},["customHostname","defaultHostname"].forEach(function(e){var t=C(i,"data.values."+e),e=C(o,"data.values."+e);e!==t&&(r.remove.push(t),r.add.push(e))}),n=[],r.add.map(function(e){e=P({hostname:e},t);n.push(Gi(e,a))}),r.remove.map(function(e){n.push(Qi(e,a))}),[2,Promise.all(n)]})})}(r,n,a)];case 2:return e.sent(),r.item.properties.slug!==n.item.properties.slug&&(r.item.typeKeywords=Io(r.item.typeKeywords,r.item.properties.slug)),[4,io(t.objectToModel(i,n),a)];case 3:return o=e.sent(),[2,t.modelToObject(o,i)]}})})}function sa(t,r){return f(this,void 0,void 0,function(){return m(this,function(e){switch(e.label){case 0:return r.isPortal?[3,2]:[4,Wi(t,r)];case 1:e.sent(),e.label=2;case 2:return[4,Je(P(P({},r),{id:t}))];case 3:return e.sent(),[2]}})})}function ua(o,i){return f(this,void 0,void 0,function(){var t,r,n;return m(this,function(e){switch(e.label){case 0:return[4,Zi(o,i)];case 1:return t=e.sent(),r=new ii(oa()),r=r.modelToObject(t,{}),i.authentication&&(n=i.authentication,n=n.token),r.thumbnailUrl=br(t.item,i,n),[2,r]}})})}function ca(o,i){return f(this,void 0,void 0,function(){var t,r,n;return m(this,function(e){switch(e.label){case 0:return[4,ao(o,i)];case 1:return t=e.sent(),n=new ii(oa()),i.authentication&&(r=i.authentication,r=r.token),(n=n.modelToObject(t,{})).thumbnailUrl=br(t.item,i,r),[2,n]}})})}function la(t,r){return f(this,void 0,void 0,function(){return m(this,function(e){return[2,oi(Qo([{filterType:"content",type:"$site"},t]),ca,r)]})})}M.init=function(e){return new M(e)},Object.defineProperty(M.prototype,"context",{get:function(){return this._contextManager?this._contextManager.context:this._context},enumerable:!1,configurable:!0}),M.prototype.create=function(t,r){return f(this,void 0,void 0,function(){return m(this,function(e){if(r||this.context.isAuthenticated)return t.orgUrlKey||(t.orgUrlKey=this.context.portal.urlKey),[2,ia(t,r||this.context.hubRequestOptions)];throw new U("Create Site","Creating Hub Sites requires authentication.")})})},M.prototype.update=function(t,r){return f(this,void 0,void 0,function(){return m(this,function(e){if(r||this.context.isAuthenticated)return[2,aa(t,r||this.context.hubRequestOptions)];throw new U("Update Site","Updating a Hub Site requires authentication.")})})},M.prototype.destroy=function(t,r){return f(this,void 0,void 0,function(){return m(this,function(e){if(r||this.context.isAuthenticated)return[2,sa(t,r||this.context.hubRequestOptions)];throw new U("Destroy Site","Destroying Hub Sites requires authentication.")})})},M.prototype.fetch=function(t,r){return f(this,void 0,void 0,function(){return m(this,function(e){try{if(r||this.context.hubRequestOptions)return[2,ua(t,r||this.context.hubRequestOptions)];throw new U("Fetch Site","Can not retrieve context.hubRequestOptions from Context Manager. HubSiteManager is configured incorrectly.")}catch(e){throw new U("Fetch Site","Can not retrieve context.hubRequestOptions from Context Manager. HubSiteManager is configured incorrectly.",e)}return[2]})})},M.prototype.search=function(t,r){return f(this,void 0,void 0,function(){return m(this,function(e){return!r.authentication&&this.context.session&&(r.authentication=this.context.session),[2,la(t,r)]})})},M.prototype.updateThumbnail=function(r,n,o,i){return f(this,void 0,void 0,function(){var t;return m(this,function(e){switch(e.label){case 0:return t=i||this.context.userRequestOptions,[4,Fo(r.id,n,o,t)];case 1:return e.sent(),[2,this.fetch(r.id,i)]}})})},M.prototype.fromItem=function(r,n){return f(this,void 0,void 0,function(){var t;return m(this,function(e){return t=n||this.context.userRequestOptions,[2,ca(r,t)]})})};var pa=M;function M(e){e instanceof Gt?this._contextManager=e:this._context=e}function da(e,t){if(t.isPortal)return Promise.resolve({});var r=[e.data.values.defaultHostname],r=(C(e,"data.values.customHostname")&&r.push(e.data.values.customHostname),r.reduce(function(e,t){return e.concat(At(t))},[]));return Uo(e.item.id,r,t)}var fa=1.5,ma={header:{background:"#fff",text:"#4c4c4c"},body:{background:"#fff",text:"#4c4c4c",link:"#0079c1"},button:{background:"#0079c1",text:"#fff"},logo:{small:""},fonts:{base:{url:"",family:"Avenir Next"},heading:{url:"",family:"Avenir Next"}}};function ha(e){var t=l(ma),e=C(e,"portalProperties.sharedTheme");return t=e?Y(t,X(e)):t}function ga(e){if(1.5<=C(e,"item.properties.schemaVersion"))return e;var r,e=l(e),t=e.data.values.dcatConfig;return e.data.feeds={},t&&(e.data.feeds.dcatUS11=(r=JSON.stringify(t),Object.keys(ya).forEach(function(e){var t=ya[e];r=r.split(e).join(t)}),JSON.parse(r))),e.item.properties.schemaVersion=1.5,e}var ya={"{{default.name}}":"{{name}}","{{default.description}}":"{{description}}","{{item.tags}}":"{{tags}}","{{item.created:toISO}}":"{{created:toISO}}","{{item.modified:toISO}}":"{{modified:toISO}}","{{default.source.source}}":"{{source}}","{{item.owner}}":"{{owner}}","{{org.portalProperties.links.contactUs.url}}":"{{orgContactEmail}}","{{org.name}}":"{{orgName}}","{{item.categories}}":"{{categories}}","{{item.licenseInfo}}":"{{licenseInfo}}","{{item.modified}}":"{{modified}}","{{enrichments.categories}}":"{{categories}}","{{default.id}}":"{{id}}","{{item.licenseInfo || No License}}":"{{licenseInfo || No License}}","{{org.portalProperties.links.contactUs.url || mailto:data@tempe.gov}}":"{{orgContactEmail || mailto:data@tempe.gov}}","{{default.description || No Description}}":"{{description || No Description}}","{{item.id}}":"{{id}}"};function va(e){return C(e,"item.properties.schemaVersion")===fa?e:ga(e=Li(e=function(e){if(1.3<=C(e,"item.properties.schemaVersion"))return e;var t=C(e=l(e),"data.catalog.groups")||[];return e.data.catalog.groups=t.filter(fe),e.item.properties.schemaVersion=1.3,e}(e=function(e){if(1.2<=C(e,"item.properties.schemaVersion"))return e;var t=C(e=l(e),"data.catalog")||{};return C(e,"data.values.groups")&&(t.groups=l(e.data.values.groups),delete e.data.values.groups),e.data.catalog=t,e.item.properties.schemaVersion=1.2,e}(e=function(e){if(1.1<=C(e,"item.properties.schemaVersion"))return e;var t=l(e);return["subdomain","defaultHostname","internalUrl","customHostname","externalUrl"].forEach(function(e){t.data.values[e]&&"string"==typeof t.data.values[e]&&(t.data.values[e]=t.data.values[e].toLowerCase())}),t.item.properties.schemaVersion=1.1,t}(e=function(e){if(1<=C(e,"item.properties.schemaVersion"))return e;var t=l(e);return["groupId","title"].forEach(function(e){delete t.data.values[e]}),t.item.properties||(t.item.properties={}),t.item.properties.schemaVersion=1,t.data.values.groups&&Array.isArray(t.data.values.groups)&&(e=t.data.values.groups.map(function(e){return"object"==typeof e?e.id:e}).filter(function(e){return!!e}),t.data.values.groups=e),t}(e))))))}function ba(e,t){return He(P({id:e,relationshipType:"Survey2Service",direction:"forward"},t)).then(function(e){var t,e=e.relatedItems[0];return t=e?{item:e}:t})}function wa(e,t){return He(P({id:e,relationshipType:"Service2Data",direction:"forward"},t)).then(function(e){var t,e=e.relatedItems[0];return t=e?{item:e}:t})}function Sa(e,t){return He(P({id:e,relationshipType:"Survey2Data",direction:"forward"},t)).then(function(e){var t,e=e.relatedItems[0];return t=e?{item:e}:t})}function xa(t){function e(e){return-1<t.typeKeywords.indexOf(e)}var r=e("FieldworkerView");return r=r||["Survey123","Feature Service","View Service"].every(e)&&!e("StakeholderView")}Aa.create=function(r){return f(this,void 0,void 0,function(){var t;return m(this,function(e){switch(e.label){case 0:return r.contextManager?[2,new Aa(r.contextManager)]:[3,1];case 1:return t=r.managerOptions||{},[4,Gt.create(t)];case 2:return[2,new Aa(e.sent())]}})})},Object.defineProperty(Aa.prototype,"context",{get:function(){return this._contextManager.context},enumerable:!1,configurable:!0}),Object.defineProperty(Aa.prototype,"projects",{get:function(){return this._projectManager||(this._projectManager=yi.init(this._contextManager)),this._projectManager},enumerable:!1,configurable:!0}),Object.defineProperty(Aa.prototype,"sites",{get:function(){return this._siteManager||(this._siteManager=pa.init(this._contextManager)),this._siteManager},enumerable:!1,configurable:!0});Kt=Aa;function Aa(e){this._contextManager=e}c.ArcGISContext=Rt,c.ArcGISContextManager=Gt,c.DEFAULT_THEME=ma,c.ENTERPRISE_SITE_ITEM_TYPE=ta,c.GLOBAL_EXTENT=Xt,c.HUB_CDN_URLMAP=bt,c.HUB_LOCALES=eo,c.HUB_PROJECT_ITEM_TYPE=_t,c.HUB_SITE_ITEM_TYPE=ea,c.Hub=Kt,c.HubError=U,c.HubProjectManager=yi,c.HubSiteManager=pa,c.Logger=g,c.OperationError=pe,c.OperationStack=Br,c.PORTAL_EXPORT_TYPES=Mn,c.REQUIRED_PRIVS=Me,c.RemoteServerError=pn,c.SEARCH_APIS=Mo,c.SITE_SCHEMA_VERSION=fa,c.STANDARD_LICENSES=yr,c.WGS84_WKID=Un,c._addTokenToResourceUrl=vi,c._canEmailUser=Bn,c._checkStatusAndParseJson=Ni,c._consolidateResults=jn,c._deepMapValues=N,c._ensureSafeDomainLength=zi,c._ensureTelemetry=Li,c._fetchSite=ua,c._formatAutoAddResponse=_n,c._getAuthHeader=O,c._getAutoAddUsers=Zn,c._getDomainServiceUrl=F,c._getEmailUsers=Xn,c._getHttpAndHttpsUris=At,c._getInviteUsers=$n,c._getLocation=function(){if(window)return window.location},c._isDate=G,c._isFunction=j,c._isObject=_,c._isOrgAdmin=Kn,c._isRegExp=B,c._isString=R,c._lookupPortal=Ri,c._mapValues=L,c._processAutoAdd=zn,c._processInvite=Jn,c._processPrimaryEmail=Qn,c._processSecondaryEmail=Hn,c._searchContent=function(o,i){var a;return f(this,void 0,void 0,function(){var t,r,n;return m(this,function(e){return t=Zo(o),r=Lo(i.api||"arcgis"),[2,"arcgis"===r.type?(n=ri(t),["authentication","num","sortField","sortOrder","site","start"].forEach(function(e){i.hasOwnProperty(e)&&(n[e]=i[e])}),n.authentication||(n.portal=r.url+"/sharing/rest"),null!=(a=i.aggregations)&&a.length&&(console.warn("IHubSearchOptions.aggregations is deprecated. Please use .aggFields instead."),n.countFields=i.aggregations.join(","),n.countSize=i.aggLimit||10),null!=(a=i.aggFields)&&a.length&&(n.countFields=i.aggFields.join(","),n.countSize=i.aggLimit||10),Oi(n)):Promise.resolve({total:0,results:[],facets:[],hasNext:!1,next:function(){Promise.resolve(null)}})]})})},c._searchGroups=function(o,i){return f(this,void 0,void 0,function(){var t,r,n;return m(this,function(e){if(t=Ii(o),"arcgis"===(r=Lo(i.api||"arcgis")).type)return n=Ci(t),["authentication","num","sortField","sortOrder","site","start"].forEach(function(e){i.hasOwnProperty(e)&&(n[e]=i[e])}),n.authentication||(n.portal=r.url+"/sharing/rest"),[2,Fi(n)];throw new Error("_searchGroups is not implemented for non-arcgis apis")})})},c._searchUsers=function(n,o){return f(this,void 0,void 0,function(){var t,r;return m(this,function(e){if(!o.authentication)throw new Error("Authentication required to search for users.");if(t=Pi(n),"arcgis"===Lo(o.api||"arcgis").type)return r=qi(t),["authentication","num","sortField","sortOrder","site","start"].forEach(function(e){o.hasOwnProperty(e)&&(r[e]=o[e])}),[2,Ui(r)];throw new Error("_searchUsers is not implemented for non-arcgis apis")})})},c._unprotectAndRemoveGroup=function(e){var t=n(at,{success:!0}),r=n(st,{success:!0});return t(e).then(function(){return r(e)})},c._unprotectAndRemoveItem=function(e){var t=n(ze,{success:!0}),r=n(Je,{success:!0});return t(e).then(function(){return r(e)})},c.addContextToSlug=jr,c.addCreateItemTypes=Bt,c.addDays=function(e,t){try{var r=new Date(e);return new Date(r.setDate(r.getDate()+t)).toISOString().split("T")[0]}catch(e){throw new Error("Invalid Date")}},c.addDomain=Gi,c.addSiteDomains=Ji,c.addSolutionResourceUrlToAssets=function(e,t){var r,n,o=e.assets||e.resources||[];return e.bundleItemId&&(r=St(t.portalSelf)+"/content/items/"+e.bundleItemId,n=e.itemId,o=o.map(function(e){return{name:e.name,type:e.type||"resource",url:r+"/resources/"+n+"-"+e.name}})),o},c.addUsersToGroup=function(e,t,r,n,o){var i=l(a(r,"portalSelf.user",{}));return i.cOrgId=C(r,"portalSelf.portalProperties.hub.settings.communityOrg.orgId"),zn({groupId:e,allUsers:t,primaryRO:r,email:n,secondaryRO:o,requestingUser:i,usersToAutoAdd:Zn(t,i),usersToInvite:$n(t,i),usersToEmail:Xn(t,i,C(n,"copyMe"))}).then(Jn).then(Qn).then(Hn).then(jn)},c.applyCollectionState=function(e,r){var t,n,o,i,e=l(e);return r.query&&(e.defaultQuery=r.query),e.sortOption=(t=e.sortOption,n=r.sort,t=l(t),n&&(o=(n=n.split("|"))[0],i=n[1],n=n[2],t.label=o,t.attribute=i,t.order=n),t),e.facets=e.facets.map(function(e){var t;return Object.keys(r).includes(e.key)?((t={})[e.key]=r[e.key],Mi(e,t)):(e.options.forEach(function(e){e.selected=!1}),e)}),e},c.applyPropertiesToItems=function(e,t){return e.map(function(e){return e.properties||(e.properties={}),Object.assign(e.properties,t),e})},c.arrayToObject=function(e,r){return e.reduce(function(e,t){return e[C(t,r)]=t,e},{})},c.atob=Fn.atob,c.autoAddUsers=Wn,c.bBoxToPolygon=nr,c.batch=oe,c.btoa=Fn.btoa,c.buildDraft=function(e,t){return te(e,{},t)},c.buildExistingExportsPortalQuery=function(e,t){var r,n,o,i,a=(t=function(e){if(e)return{onlyTypes:e.onlyTypes,layerId:e.layerId,spatialRefId:e.spatialRefId};return{}}(t)).onlyTypes,s=t.layerId,t=t.spatialRefId,u=Object.keys(Mn).map(function(e){return Mn[e]}),c=new Set(Z(u.filter(function(e){return!e.supportsProjection}).map(function(e){return e.itemTypes}))),a=a||Z(u.map(function(e){return e.itemTypes})),u=(new Qe).startGroup().match(Rn(e)).in("typekeywords").and().match(Gn(s)).in("typekeywords").endGroup().and().startGroup();function l(e,t){var r;t.startGroup().match(/\s/g.test(e)?e:'"'+e+'"').in("type").and().match(Nn((t=e,e=Un,e=(r=i)&&!o.has(t)?r:e))).in("typekeywords").endGroup()}return r=u,n=(e={types:a,spatialRefId:t,noProjectionItemTypes:c}).types,o=e.noProjectionItemTypes,i=e.spatialRefId,n.forEach(function(e,t){l(e,r),t<n.length-1&&r.or()}),u.endGroup(),u.toParam()},c.buildUrl=Le,c.camelize=W,c.canEditEvent=function(e,t){var r=!1;return Fe(t)&&(e=C(e,"initiative.item.properties.collaborationGroupId"),t=t.groups,r=!!e&&!!K(void 0===t?[]:t,"id",e)),r},c.canEditItem=Ue,c.canEditSite=function(e,t){var r=!1;return r=!C(e,"properties.isDefaultHubHome")&&Fe(t)?Ue(e,t):r},c.canEditSiteContent=function(e,t){var r,n=!1,o=C(e,"properties.isDefaultHubHome"),i=Fe(t);return!o&&i?n=Ue(e,t):i&&(o=t.orgId,i=e.orgId,o&&o===i&&(r=t.privileges||[],n=Me.every(function(e){return d(r,e)}))),n},c.capitalize=J,c.categories=Yt,c.chunkArray=function(e,t){for(var r=[],n=0;n<e.length;)r.push(e.slice(n,n+t)),n+=t;return r},c.clearSession=function(e,t){(t=void 0===t?window:t).localStorage&&t.localStorage.removeItem("__CONTEXT_"+e)},c.cloneObject=l,c.completeOAuth2=function(t,e){var r=(e=(e=void 0===e?window:e).location.href.match(/access_token=(.+)&expires_in=.+&username=([^&]+)/))[1],n="https://www.arcgis.com/sharing/rest/community/users/"+decodeURIComponent(e[2]);return v(n,{params:{token:r},httpMethod:"GET"}).then(function(e){return Date.now()-e.created<5e3?v(n+"/update",{params:{token:r,tags:["hubRole:participant","org:"+e.orgId],access:"public"}}).then(function(){return Oe.completeOAuth2(t)}):Oe.completeOAuth2(t)})},c.compose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce(function(r,n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r(n.apply(void 0,e))}})},c.composeContent=Nr,c.constructSlug=To,c.convertCatalog=function(e){var t={filterType:"content"},e=C(e,"groups");return Array.isArray(e)&&e.length?t.group=e:"string"==typeof e&&(t.group=[e]),{title:"Default Catalog",filter:t}},c.convertContentDefinitionToFilter=ti,c.convertContentFilterToSearchOptions=ni,c.convertItemToProject=gi,c.convertItemToSite=ca,c.convertPortalResponseToFacets=Jo,c.convertSolutionTemplateResourcesToAssets=function(e,t){var r,n,o=[];return e.resources&&e.bundleItemId&&(r=St(t.portalSelf)+"/content/items/"+e.bundleItemId,n=e.itemId,o=e.resources.map(function(e){return{name:e,type:"resource",url:r+"/resources/"+n+"-"+e}})),o},c.convertToWellKnownLocale=function(e){var t="en";return e=(e=void 0===e?"en":e).toLowerCase(),-1<eo.indexOf(e)?t=e:1<(e=e.split("-")).length&&-1<eo.indexOf(e[0])&&(t=e[0]),t},c.convertUrlsToAnchorTags=function(t){var e=t.match(/((((ftp|https?):\/\/)|(w{3}\.))[-\w@:%_+.~#?,&//=]+)/g);return e&&e.forEach(function(e){t=t.replace(e,'<a target="_blank" href="'+e+'">'+e+"</a>")}),t.replace("(","<br/>(")},c.createExtent=function(e,t,r,n,o){return{xmin:e,ymin:t,xmax:r,ymax:n,spatialReference:{wkid:o=void 0===o?4326:o}}},c.createId=V,c.createModel=oo,c.createOperationPipeline=le,c.createProject=pi,c.createSite=ia,c.dasherize=function(e){return e.replace(/([a-z\d])([A-Z])/g,"$1_$2").toLowerCase().replace(/[ _]/g,"-")},c.datasetToContent=function(e){var t=kn(e),r=(e=e.attributes).errors,n=e.boundary,o=e.metadata,i=e.slug,a=e.groupIds,s=e.orgId,u=e.orgName,c=e.organization,l=e.orgExtent,p=e.server,d=e.layers,f=e.layer,m=e.recordCount,h=e.statistics,g=e.extent,e=e.searchDescription,f=f&&f.id;return Nr(t,{layerId:f,slug:i,errors:r,metadata:o||null,groupIds:a,org:s&&{id:s,name:u||c,extent:l},server:p,layers:d,recordCount:m,boundary:n,extent:g,searchDescription:e,statistics:h})},c.datasetToItem=kn,c.deepFind=re,c.deepFindById=function(e,t){return re(e,function(e){return e.id===t})},c.deepSet=$,c.deepStringReplace=ee,c.deleteProp=to,c.destroyProject=mi,c.destroySite=sa,c.doesItemExistWithTitle=Do,c.domainExists=ji,c.domainExistsPortal=_i,c.emailOrgUsers=Vn,c.ensureProp=function(e,t){return $(e,t)},c.ensureUniqueDomainName=Yi,c.ensureUniqueString=function(e,t){for(var r=!1,n=0,o=t;!r;)d(e,o)?o=t+"-"+ ++n:r=!0;return o},c.expandApi=Lo,c.expandApis=function(e){return e.map(Lo)},c.expandContentFilter=Zo,c.expandGroupFilter=Ii,c.expandTypeField=$o,c.expandUserFilter=Pi,c.extend=Y,c.extentToBBox=$t,c.failSafe=n,c.failSafeUpdate=function(e,t){return n(Ge,{id:e.item.id,success:!0})(Object.assign({item:ro(e)},t))},c.fetchAllPages=function(n,o,r,i){void 0===r&&(r=-1);var a=o.num||100,e=o.start||1;return(-1===r?n(P(P({},o),{num:a,start:e})):Promise.resolve({nextStart:e,total:r,results:[],num:a})).then(function(t){if(-1===t.nextStart)return[t];for(var e=[],r=t.nextStart;r<=t.total;r+=a)e.push(r);return oe(e,function(e){return n(P(P({},o),{start:e,num:a}))},i).then(function(e){return h([t],e)})}).then(function(e){var e=e.reduce(function(e,t){return h(e,t.results)},[]),t=-1===r?e.length:r;return e.slice(0,t)})},c.fetchAndUploadResource=wi,c.fetchAndUploadThumbnail=Si,c.fetchContent=function(s,d){return f(void 0,void 0,void 0,function(){var t,r,n,o,i,a;return m(this,function(e){switch(e.label){case 0:return Gr(s)?[4,(l=jr(s,null==d?void 0:d.siteOrgKey),p=d,f(void 0,void 0,void 0,function(){var t,r,n,o,i,a,s;return m(this,function(e){switch(e.label){case 0:return[4,bn(l,p)];case 1:return t=e.sent(),r=t.itemId,n=t.layerId,[4,Sn(r,p)];case 2:return(i=e.sent(),o=i.item,i=ue(i,["item"]),a=p&&p.layerId,Q(a)||a===n)?[3,4]:(n=a,s=[P({},t)],[4,wn(r+"_"+n,p)]);case 3:t=P.apply(void 0,s.concat([e.sent()])),e.label=4;case 4:return[2,Nr(o,P(P(P({requestOptions:p},i),t),{layerId:n,slug:l,errors:ln([i.errors,t.errors])}))]}})}))]:[3,2];case 1:return r=e.sent(),[3,4];case 2:return[4,(u=s,c=d,f(void 0,void 0,void 0,function(){var t,r,n,o,i,a,s;return m(this,function(e){switch(e.label){case 0:return t=Rr(u).itemId,[4,Sn(t,c)];case 1:return(t=e.sent(),r=t.item,n=ue(t,["item"]),o=c&&c.layerId,ar(r,c))?[4,wn(u,c)]:[3,3];case 2:return a=e.sent(),[3,4];case 3:a={},e.label=4;case 4:return s=(i=a).layerId,[2,Nr(r,P(P(P({requestOptions:c},n),i),{layerId:Q(o)?s:o,errors:ln([n.errors,i.errors])}))]}})}))];case 3:r=e.sent(),e.label=4;case 4:return(n=(t=r).layer,o=t.type,i=t,n&&["Feature Layer","Table"].includes(o))?[4,vn(t,d)]:[3,6];case 5:return a=e.sent(),[3,7];case 6:a=void 0,e.label=7;case 7:return i.recordCount=a,[2,t]}var u,c,l,p})})},c.fetchHubTranslation=function(t,e,r){void 0===r&&(r="cors");var n=(wt(e)+"/locales/"+t+".json").toLocaleLowerCase();return fetch(n,{method:"GET",credentials:"same-origin",mode:r}).then(function(e){return e.json()}).catch(function(e){throw Error("Attempt to fetch locale "+t+" from "+n+" failed: "+JSON.stringify(e))})},c.fetchImageAsBlob=bi,c.fetchModelFromItem=ao,c.fetchProject=fi,c.fetchSite=function(e,t){return console.warn("@esri/hub-common::fetchSite is deprecated. Please use @esri/hub-common::fetchSiteModel instead"),Zi(e,t)},c.fetchSiteModel=Zi,c.filterBy=function(e,t,r){return e.filter(function(e){return C(e,t)===r})},c.findBy=K,c.findItemsBySlug=Po,c.flattenArray=Z,c.generateRandomString=de,c.getCategory=xn,c.getContentIdentifier=An,c.getContentSiteUrls=Tn,c.getContentTypeIcon=Sr,c.getContentTypeLabel=Dn,c.getCulture=function(e){return C(e,"portalSelf.user.culture")||C(e,"portalSelf.culture")||"en-us"},c.getDomainsForSite=function(e,t){return t.isPortal?Promise.resolve([]):(e=F(t.hubApiUrl)+"?siteId="+e,t=O(t),fetch(e,{method:"GET",headers:t,mode:"cors"}).then(Ni).catch(function(e){throw Error("Error in getDomainsForSite "+e)}))},c.getExportItemTypeKeyword=Rn,c.getExportLayerTypeKeyword=Gn,c.getFamily=or,c.getGeographicOrgExtent=er,c.getGroupThumbnailUrl=Wo,c.getHubApiFromPortalUrl=Ct,c.getHubApiUrl=Ut,c.getHubApiUrlFromPortal=function(e){return kt(e)+"/api/v3"},c.getHubLocaleAssetUrl=wt,c.getHubProduct=function(e){var t=C(e,"portalProperties.hub.enabled")||!1?"premium":"basic";return t=e.isPortal&&"singletenant"===e.portalMode?"portal":t},c.getHubUrlFromPortal=kt,c.getInputFeatureServiceModel=ba,c.getItemApiUrl=Tt,c.getItemAssets=function(e,t){var r=St(t.portalSelf)+"/content/items/"+e.id,n=br(e,t),o=[];return n&&o.push({name:e.thumbnail,url:n,type:"thumbnail"}),n=e.id,n=Ke(n,e=t)+"/resources",(e=P({},e)).params=P({num:1e3},e.params),v(n,e).then(function(e){e=e.resources.map(function(e){return{name:e.resource,type:"resource",url:r+"/resources/"+e.resource}});return o.concat(e)})},c.getItemBySlug=Co,c.getItemDataUrl=It,c.getItemHomeUrl=Dt,c.getItemHubId=Fr,c.getItemHubType=function(e){return console.warn("DEPRECATED: Use getFamily() instead. getItemHubType() will be removed at v10.0.0"),e=qr(e="string"==typeof e?{type:e}:e),jt(e)},c.getItemLayer=Mr,c.getItemLayerId=Or,c.getItemThumbnailUrl=br,c.getLayerIdFromUrl=Cr,c.getModel=no,c.getModelBySlug=function(e,r){return Co(e,r).then(function(e){var t=[Promise.resolve(e)];return e?t.push(Ve(e.id,r)):t.push(Promise.resolve(null)),Promise.all(t)}).then(function(e){return e[0]?{item:e[0],data:e[1]}:null})},c.getModelFromOptions=function(e,t){var r=e+"Model",e=e+"Id";if(t[r])return Promise.resolve(t[r]);if(t[e])return n(no,{item:{id:t[e]},isMissing:!0})(t[e],t);throw new Error("getModelFromOptions requires either a ."+r+" or ."+e+" property.")},c.getNextFunction=Ho,c.getOrgDefaultTheme=ha,c.getOrgExtentAsBBox=function(e){return er(e).then($t)},c.getPortalApiUrl=St,c.getPortalBaseFromOrgUrl=Pt,c.getPortalUrl=vt,c.getPortalUrls=xr,c.getProp=C,c.getProps=function(r,e){return e.reduce(function(e,t){t=C(r,t);return t&&e.push(t),e},[])},c.getProxyUrl=Ar,c.getServiceTypeFromUrl=Ft,c.getSession=function(e,t){var r=null;return r=(t=void 0===t?window:t).localStorage&&(t=t.localStorage.getItem("__CONTEXT_"+e))?Oe.deserialize(t):r},c.getSiteById=$i,c.getSourceFeatureServiceModelFromFieldworker=wa,c.getSpatialRefTypeKeyword=Nn,c.getStakeholderModel=Sa,c.getStructuredLicense=vr,c.getSubscriptionType=function(e){return a(e,"subscriptionInfo.type","Enterprise")},c.getSurveyModels=function(e,r){var n,o;return("string"==typeof e?Be(e,r):Promise.resolve(e)).then(function(t){var e=[ba(t.id,r),Sa(t.id,r)];return Promise.all(e).then(function(e){var t=e[0],e=e[1];return o=e,t&&xa(t.item)?wa((n=t).item.id,r):t}).then(function(e){return{form:{item:t},featureService:e,fieldworker:n,stakeholder:o}})})},c.getTypeCategories=function(e){return(e=xn(qr(e=void 0===e?{}:e)))?((e=Array.from(e))[0]=e[0].toUpperCase(),[e.join("")]):["Other"]},c.getTypes=function(e){return Yt[(e=void 0===e?"":e).toLowerCase()]},c.getUniqueDomainName=Bi,c.getUniqueDomainNamePortal=Ki,c.getUniqueItemTitle=function t(r,n,o,i){var a=(i=void 0===i?0:i)?r+" "+i:r;return Do(a,n,o).then(function(e){return e?t(r,n,o,++i):a}).catch(function(e){throw Error("Error in getUniqueItemTitle "+e)})},c.getUniqueSlug=qo,c.getUserThumbnailUrl=zo,c.getWithDefault=a,c.hasBasePriv=Fe,c.hubApiRequest=fn,c.hubApiSearch=function(e){var t=(t=e.authentication)&&t.serialize&&{authentication:t.serialize()};return fn("/search",P(P({},{headers:t,httpMethod:"POST"}),e))},c.includes=d,c.incrementString=function(e){var t=e.match(/-\s(\d+$)/);return t?(t=parseInt(t[1],10),e=e.replace("- "+t,"- "+(t+1))):e+=" - 1",e},c.interpolate=ko,c.interpolateItemId=function(e){return ko(e,{item:{id:e.item.id},appid:e.item.id},{toISO:function(e,t){return t}})},c.inviteUsers=Yn,c.isBBox=tr,c.isDomainForLegacySite=function(e){return!fe(e.siteId)},c.isDomainUsedElsewhere=function(e,t,r){return Vi(e,r).then(function(e){return e.siteId!==t}).catch(function(){return!1})},c.isDownloadable=Jt,c.isExtentCoordinateArray=rr,c.isFeatureService=Pr,c.isFieldworkerView=xa,c.isGuid=fe,c.isLayerView=Lr,c.isMapOrFeatureServerUrl=qt,c.isNil=Q,c.isSlug=Gr,c.isUpdateGroup=he,c.isValidDomain=function(t,e){if(e.isPortal)throw new Error("isValidDomain is not available in ArcGIS Enterprise.");var r=F(e.hubApiUrl)+"/validate?hostname="+t,e=O(e);return fetch(r,{method:"GET",headers:e,mode:"cors"}).then(function(e){return e.json()}).catch(function(e){return{success:!1,input:t,error:{code:400,detail:e,message:"lookupFailed"}}})},c.isValidExtent=function(t){return!!t&&[rr,function(t){return["xmin","ymin","xmax","ymax"].every(function(e){return"number"==typeof t[e]})}].some(function(e){return e(t)})},c.itemPropsNotInTemplates=Oo,c.itemToContent=En,c.last=function(e){return e[e.length-1]},c.lookupDomain=Vi,c.mapBy=function(t,e){return(e=void 0===e?[]:e).map(function(e){return e[t]})},c.maybeAdd=function(e,t,r){return null!=t&&((r=l(r))[e]=t),r},c.maybePush=H,c.mergeContentFilter=Qo,c.mergeDateRange=No,c.mergeGroupFilters=function(e){var e=e.map(Ii),o=["created","modified"],i=h(["filterType","term"],o);return e.reduce(function(n,e){return Object.entries(e).forEach(function(e){var t,r=e[0],e=e[1];n.hasOwnProperty(r)?(t=C(n,r),i.includes(r)?o.includes(r)?p(r,No(t,e),n):"term"===r&&(n[r]=n[r]+" "+e):p(r,Ro(t,e),n)):p(r,l(e),n)}),n},{filterType:"group"})},c.mergeMatchOptions=Ro,c.mergeObjects=te,c.mergeSearchOptions=I,c.mergeUserFilters=function(e){var e=e.map(Pi),o=["created","modified","lastlogin"],i=h(["disabled","term","filterType"],o);return e.reduce(function(n,e){return Object.entries(e).forEach(function(e){var t,r=e[0],e=e[1];n.hasOwnProperty(r)?(t=C(n,r),i.includes(r)?o.includes(r)?p(r,No(t,e),n):"term"===r&&(n[r]=n[r]+" "+e):p(r,Ro(t,e),n)):p(r,l(e),n)}),n},{filterType:"user"})},c.normalizeItemType=qr,c.normalizeSolutionTemplateItem=function(e){var t=l(e);return Oo.forEach(function(e){delete t[e]}),t.extent="{{organization.defaultExtentBBox}}",t},c.objectToArray=function(r,n){return void 0===n&&(n="id"),Object.keys(r).reduce(function(e,t){return r[t][n]=t,e.push(l(r[t])),e},[])},c.objectToJsonBlob=function(e){if("undefined"!=typeof Blob)return new Blob([JSON.stringify(e)],{type:"application/json"});throw new Error("objectToJsonBlob is not currently supported on Node")},c.parseDatasetId=Rr,c.parseItemCategories=Ur,c.processRevertableTasks=function(e){return Promise.all(e).then(function(e){function t(e){return"fullfilled"===e.status}var r,n=e.filter(t),e=e.filter(function(e){return!t(e)});if(e.length)throw r=n.map(function(e){return e.revert()}),Promise.all(r).catch(function(){}),e[0].error;return n.map(function(e){return e.results})})},c.propifyString=function(e){return e=W(e=(e=e.replace(/^[0-9]*/g,"")).replace(/[^\w\s]/g,""))},c.registerBrowserApp=Uo,c.registerSiteAsApplication=da,c.relativeDateToDateRange=_o,c.removeContextFromSlug=_r,c.removeDomain=Hi,c.removeDomainByHostname=Qi,c.removeDomainsBySiteId=Wi,c.removeEmptyProps=X,c.replaceItemId=function(e,t,r){return void 0===r&&(r="{{appid}}"),ee(l(e),new RegExp(t,"g"),r)},c.runRevertableTask=function(e,t){return e().then(function(e){return{status:"fullfilled",results:e,revert:t}}).catch(function(e){return{status:"rejected",error:e}})},c.saveSession=function(e,t,r){(r=void 0===r?window:r).localStorage&&r.localStorage.setItem("__CONTEXT_"+e,t.serialize())},c.searchProjects=hi,c.searchSites=la,c.serializeCollectionState=function(e){var t={},r=(e.defaultQuery&&(t.query=e.defaultQuery),e.sortOption&&(t.sort=(r=e.sortOption).label+"|"+r.attribute+"|"+r.order),e.facets.reduce(function(e,t){return P(P({},e),function(e){var t,r,n,o={};switch(e.display){case"single-select":r={},n=(t=e).options.find(function(e){return e.selected}),r[t.key]=n?n.key:null,o=r;break;case"multi-select":t={},(r=(n=e).options.filter(function(e){return e.selected}).map(function(e){return e.key}).join(",")).length?t[n.key]=r:t[n.key]=null,o=t}return o}(t))},{}));return P(P({},t),r)},c.serializeContentFilterForPortal=ri,c.serializeDateRange=Ko,c.serializeGroupFilterForPortal=Ci,c.serializeMatchOptions=Bo,c.serializeModel=ro,c.serializeSpatialReference=Ln,c.serializeStringOrArray=Vo,c.serializeUserFilterForPortal=qi,c.setContentHubId=function(e,t){var r=e.id,r=e.slug||t||r,e=P(P({},e),{hubId:t,identifier:r});return In(e,{relative:Cn(e)})},c.setContentSiteUrls=Pn,c.setContentType=function(e,t){var t=qr(P(P({},e.item),{type:t})),r=or(t),n=Sr(t),o=Dn(t,e.isProxied),e=P(P({},e),{type:t,family:r,normalizedType:t,contentTypeIcon:n,contentTypeLabel:o});return In(e,{relative:Cn(e)})},c.setItemThumbnail=Fo,c.setProp=p,c.setSlugKeyword=Io,c.shareItemToGroups=function(t,e,r,n){return Promise.all(e.map(function(e){e=Object.assign({},{id:t,groupId:e},r);return n&&(e.owner=n),ft(e)}))},c.slugify=me,c.stringToBlob=function(e,t){if(void 0===t&&(t="application/octet-stream"),"undefined"==typeof Blob)throw new Error("stringToBlob is not currently supported on Node");for(var r=[],n=0;n<e.length;n++)r[n]=e.charCodeAt(n);var o=new Uint8Array(r);return new Blob([o],{type:t})},c.stripProtocol=xt,c.unique=z,c.uniqueBy=function(e,r){return e.reduce(function(e,t){return H(e.find(function(e){return C(e,r)===C(t,r)})?null:t,e)},[])},c.unprotectModel=function(e,t){return e.item.protected?ze(Object.assign({id:e.item.id},t)):Promise.resolve({success:!0})},c.unshareItemFromGroups=function(t,e,r,n){return Promise.all(e.map(function(e){e=Object.assign({},{id:t,groupId:e},r);return n&&(e.owner=n),gt(e)}))},c.updateDomain=function(e,t){if(t.isPortal)throw new Error("updateDomain is not available in ArcGIS Enterprise. Instead, edit the hubdomain typekeyword on the item");var r=O(t),t=(r["Content-Type"]="application/json",F(t.hubApiUrl)+"/"+e.id),n=e.siteTitle;return"number"==typeof n&&(e.siteTitle=n.toString()),fetch(t,{method:"PUT",headers:r,mode:"cors",body:JSON.stringify(e)}).then(Ni)},c.updateModel=io,c.updateProject=di,c.updateSite=aa,c.upgradeProtocol=function(e){return-1===e.indexOf("http")?"https://"+e:-1!==e.indexOf("http://")?e.replace(/^http:/i,"https:"):e},c.upgradeSiteSchema=va,c.uploadResourcesFromUrl=function(n,e,o){return Array.isArray(e)?(e=e.reduce(function(e,t){var r;return t.url&&(r={id:n.item.id,owner:n.item.owner,fileName:t.name,url:vi(t.url,o),authentication:o.authentication},"thumbnail"===t.type?e.push(Si(r)):e.push(wi(r))),e},[]),Promise.all(e)):Promise.resolve([])},c.validateUrl=function(u){return f(this,void 0,void 0,function(){var n,o,i,a,s;return m(this,function(e){switch(e.label){case 0:if(!function(e){try{return new URL(e)}catch(e){return g.error("Error parsing data url"),0}}(u))return[2,{pass:!1,error:"invalidFormat"}];if(n=Ai.test(u),r=u,Ei.test(r)&&!n)return[2,{pass:!1,error:"invalidFormat"}];a={},e.label=1;case 1:return(e.trys.push([1,6,,7]),n)?[4,Ti(u)]:[3,3];case 2:return s=e.sent(),[3,5];case 3:return[4,function(r){return f(this,void 0,void 0,function(){var t;return m(this,function(e){switch(e.label){case 0:return[4,fetch(r,{method:"HEAD"})];case 1:return[2,{ok:(t=e.sent()).ok,headers:t.headers}]}})})}(u)];case 4:s=e.sent(),e.label=5;case 5:return(a=s).ok?[3,7]:[2,{pass:!1,error:"invalidUrl"}];case 6:return e.sent(),g.error("error requesting url"),[3,7];case 7:return i=a.item||{title:function(e){try{var t=new URL(e),r="/"!==t.pathname?t.pathname.split("/").pop():t.hostname}catch(e){throw new Error("Error getting file name from data url")}return r}(u),url:u},a.headers&&(o=function(e){var t;if(e=e.get("Content-Type"))return"text/csv"===(e=e.split(";").shift())?t=c.ItemType.CSV:"application/vnd.ms-excel"===e||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e?t=c.ItemType["Microsoft Excel"]:"application/pdf"===e?t=c.ItemType.PDF:"image/jpeg"===e||"image/jpg"===e||"image/png"===e?t=c.ItemType.Image:"application/geo+json"===e&&(t=c.ItemType.GeoJson),t}(a.headers)),n?o=c.ItemType["Feature Service"]:o||("csv"===(r=(r=u).toLowerCase().split(".").pop())?t=c.ItemType.CSV:"xls"===r||"xlsx"===r?t=c.ItemType["Microsoft Excel"]:"pdf"===r?t=c.ItemType.PDF:"jpeg"===r||"jpg"===r||"png"===r?t=c.ItemType.Image:"geojson"===r&&(t=c.ItemType.GeoJson),o=t),o&&(i.type=o),i.type&&!["Feature Service","Document Link"].includes(i.type)&&(i.dataUrl=i.url),[2,{pass:!0,type:o,item:i}]}var t,r})})},c.valueToMatchOptions=jo,c.without=function(e,t){return e.filter(function(e){return e!==t})},c.withoutByProp=function(t,r,e){return e.filter(function(e){return e[t]!==r})},Object.defineProperty(c,"__esModule",{value:!0})});
//# sourceMappingURL=common.umd.min.js.map
